define("app/utils/Modal",[],function(){function Modal(content){this.modal=$("<div>",{"class":"modal"***REMOVED***)[0],this.back=$("<div>",{"class":"back"***REMOVED***)[0],this.container=$("<div>",{"class":"container"***REMOVED***)[0],this.wrapper=$("<div>",{"class":"wrapper"***REMOVED***)[0],this.content=$("<div>",{"class":"content"***REMOVED***)[0],"string"==typeof content?this.content.innerHTML=content:"object"==typeof content&&$(this.content).append(content),this.wrapper.appendChild(this.content),this.back.appendChild(this.wrapper),this.modal.appendChild(this.back),$(this.wrapper).on("click",function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0***REMOVED***),$(this.back).on("click",this.hide.bind(this)),$(this.wrapper).on("click",".close",this.hide.bind(this))***REMOVED***var errorTemplate=doT.compile('<div class="error"><h1>Error</h1><p>{{=it.message***REMOVED******REMOVED***</p><div class="txt-right"><a class="button close">Cerrar</a></div></div>'),infoTemplate=doT.compile('<div class="info"><h1>Información</h1><p>{{=it.message***REMOVED******REMOVED***</p><div class="txt-right"><a class="button close">Cerrar</a></div></div>');return Modal.prototype.addClass=function(className){return $(this.modal).addClass(className),this***REMOVED***,Modal.prototype.show=function(){$("html").css("overflow","hidden"),document.body.appendChild(this.modal),this.modal.style.display="block"***REMOVED***,Modal.prototype.hide=function(){$("html").css("overflow","visible"),this.modal.style.display="none";try{document.body.removeChild(this.modal)***REMOVED***catch(e){***REMOVED******REMOVED***,Modal.prototype.getElement=function(){return this.modal***REMOVED***,Modal.info=function(message){return new Modal(infoTemplate({message:message***REMOVED***))***REMOVED***,Modal.error=function(message){return new Modal(errorTemplate({message:message***REMOVED***))***REMOVED***,Modal***REMOVED***),define("app/network/urlsMap",{root:window.location.protocol+"//"+window.location.host,filtersProjects:"/api/FiltrosTotales/GetFiltros",departments:"/api/poligonos/departamento/",regions:"/api/poligonos/region/",municipalities:"/api/poligonos/municipio/",searchProjects:"/api/serviciosproyectos/busqueda",searchProjectsList:"/api/serviciosproyectos/listado",consolidated:"/api/datosconsolidados/",infoboxesResources:"/api/Recursos/GetInfograficosRecursos",searchResources:"/api/Recursos/GetPushPinsRecursos",consolidatedResources:"/api/Recursos/GetDataGraficasConsolidados",getBudget:"/api/Recursos/GetInformacionPresupuesto",getDistribution:"/api/Recursos/GetInformacionDistribucion",getOutlay:"/api/Recursos/GetInformacionGiros",getAprovedProyects:"/api/Proyectos/GetOtrosProyectosAprobados",getExecuted:"/api/Recursos/GetInformacionValorEjecutadoProyectos",getValueAproved:"/api/Recursos/GetInformacionValorAprobadoProyectos",getPerformance:"/api/Recursos/GetInformacionRendimientosDirectas",getRegalias:"/api/Recursos/GetInformacionLiquidacion",infoboxesProduction:"/api/produccion/GetInfograficosProduccion",getFieldOrMine:"/api/produccion/GetCampoOMinasPorGeografia",searchProduction:"/api/produccion/GetPushPinsProduccion",consolidatedProduction:"/api/produccion/GetDataGraficasConsolidados",getProductionInfo:"/api/produccion/GetInformacionProduccion",getFieldInfo:"/api/produccion/GetProduccionCampoOMina",infoboxesFiscalizacion:"/api/fiscalizacion/GetInfoboxes/",searchFiscalizacion:"/api/Fiscalizacion/GetPushPins/",actividadesFiscalizacion:"/api/Fiscalizacion/GetActividadesFiscalizacion/",consolidatedFiscalizacion:"/api/fiscalizacion/GetDataGraficasFiscalizacion",contact:"/api/Mail/setMail",sendByEmail:"/api/Correo/EnviarCorreo",texts:"/api/Textos/GetTextoParametrico"***REMOVED***),define("app/utils/ContactForm",["../network/urlsMap"],function(urlsMap){function checkValidity(evt){var inputsPassed,isValid,inputs=$(this).find("input, textarea");return evt.preventDefault(),supportsValidation&&!evt.target.checkValidity()?(isSafari&&(isValid=validateInputsSafari(inputs),isValid||evt.preventDefault()),!1):supportsValidation||(inputsPassed=validateInputsOldWay(inputs))?($.ajax({url:urlsMap.contact,data:$(this).serialize()***REMOVED***).done(notifySuccess).fail(notifyFailure),!1):!1***REMOVED***function validateInputsSafari(inputs){for(var input,i=inputs.length,valid=!0;i--;)input=inputs[i],input.checkValidity()?removeErrorStyleFrom(input):(input.validity.typeMismatch&&"email"==input.type?applyErrorStyleTo(input,"No es un correo válido"):input.validity.valueMissing&&applyErrorStyleTo(input,"Este campo es obligatorio"),valid=!1);return valid***REMOVED***function validateInputsOldWay(inputs){for(var input,i=inputs.length,valid=!0;i--;)input=inputs[i],"email"!=input.type||input.value.match(emailRegexp)?input.value.length?removeErrorStyleFrom(input):(applyErrorStyleTo(input,"Este campo es obligatorio"),valid=!1):(applyErrorStyleTo(input,"No es un correo válido"),valid=!1);return valid***REMOVED***function applyErrorStyleTo(input,message){input=$(input).addClass("error");var next=input.next();next.hasClass("errorMessage")||(next=$("<div>",{"class":"errorMessage"***REMOVED***),input.after(next)),next.html(message)***REMOVED***function removeErrorStyleFrom(input){$(input).removeClass("error").next(".errorMessage").remove()***REMOVED***function notifySuccess(){var message=$("<div>",{"class":"statusMessage"***REMOVED***);message.html("Su mensaje ha sido enviado con éxito"),$(".js-contact-form").empty().append(message)***REMOVED***function notifyFailure(){var message=$("<div>",{"class":"statusMessage statusError"***REMOVED***);message.html("No se pudo enviar el mensaje"),$(".js-contact-form").empty().append(message)***REMOVED***var chckinput=document.createElement("input"),supportsValidation="checkValidity"in chckinput,isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,emailRegexp=/@/;$(".js-contact-form").on("submit",checkValidity)***REMOVED***),define("app/storage/Storage",[],function(){function toLightFormat(object,parent){var key,i,j,k,light={***REMOVED***,lcord=[],lcords=[],keysArray=[],storeKey="_dnp_";for(key in object)if(object[key].constructor==Object)light[_keywordsMap[key]]=toLightFormat(object[key],object);else if("coordinates"==key)if("Polygon"==object.type){for(i=0,k=0;i<object[key][0].length;i++,k+=2)lcords[k]=object[key][0][i][0],lcords[k+1]=object[key][0][i][1];light[_keywordsMap[key]]=lcords***REMOVED***else{for(i=0;i<object[key].length;i++){for(lcords=[],j=0,k=0;j<object[key][i][0].length;j++,k+=2)lcords[k]=object[key][i][0][j][0],lcords[k+1]=object[key][i][0][j][1];lcord[i]=lcords***REMOVED***light[_keywordsMap[key]]=lcord***REMOVED***else if("features"==key){storeKey+="municipio"==parent.type?"ml":"departamento"==parent.type?"dl":"rl";var lastUpdated=+localStorage.getItem(storeKey+"_up");if(parent.lastUpdated>lastUpdated){for(i=0;i<object[key].length;i++){keysArray[i]=object[key][i].properties.id;var poly=toLightFormat(object[key][i],object);_storeLightObject(poly)***REMOVED***var lsList=localStorage.getObject(storeKey);if(lsList){for(i=0;i<keysArray.length;i++)-1==lsList.indexOf(keysArray[i])&&lsList.push(keysArray[i]);localStorage.setObject(storeKey,lsList)***REMOVED***else localStorage.setObject(storeKey,keysArray);localStorage.setItem(storeKey+"_up",parent.lastUpdated)***REMOVED******REMOVED***else light[_keywordsMap[key]]=object[key];return light***REMOVED***function _storeLightObject(object){var rootKey="_dnp_";rootKey+="departamento"==object.p.t?"d_"+object.p.i:"municipio"==object.p.t?"m_"+object.p.i:"r_"+object.p.i,localStorage.setObject(rootKey,object)***REMOVED***function getDataList(type){var lKey,iKey,arrayIds,array=[];"departments"==type?(lKey="_dnp_dl",iKey="_dnp_d_"):"municipalities"==type?(lKey="_dnp_ml",iKey="_dnp_m_"):(lKey="_dnp_rl",iKey="_dnp_r_"),arrayIds=localStorage.getObject(lKey)||[];for(var i=0;i<arrayIds.length;i++)array[i]=localStorage.getObject(iKey+arrayIds[i]);return{features:array,lastUpdated:localStorage.getItem(lKey+"_up")***REMOVED******REMOVED***var _keywordsMap={status:"s",lastUpdated:"l",type:"t",geojson:"g",features:"f",properties:"p",LAT:"LA",LON:"LO",name:"n",id:"i",geometry:"ge",coordinates:"c"***REMOVED***;return{storeDataList:toLightFormat,getDataList:getDataList***REMOVED******REMOVED***),define("lib/jquery/mockjax",[],function(){!function($){function parseXML(xml){void 0==window.DOMParser&&window.ActiveXObject&&(DOMParser=function(){***REMOVED***,DOMParser.prototype.parseFromString=function(xmlString){var doc=new ActiveXObject("Microsoft.XMLDOM");return doc.async="false",doc.loadXML(xmlString),doc***REMOVED***);try{var xmlDoc=(new DOMParser).parseFromString(xml,"text/xml");if(!$.isXMLDoc(xmlDoc))throw"Unable to parse XML";var err=$("parsererror",xmlDoc);if(1==err.length)throw"Error: "+$(xmlDoc).text()***REMOVED***catch(e){var msg=void 0==e.name?e:e.name+": "+e.message;return void $(document).trigger("xmlParseError",[msg])***REMOVED***return xmlDoc***REMOVED***function trigger(s,type,args){(s.context?$(s.context):$.event).trigger(type,args)***REMOVED***function isMockDataEqual(mock,live){var identical=!1;return"string"==typeof live?$.isFunction(mock.test)?mock.test(live):mock==live:($.each(mock,function(k){return void 0===live[k]?identical=!1:(identical=!0,"object"==typeof live[k]?isMockDataEqual(mock[k],live[k]):identical=$.isFunction(mock[k].test)?mock[k].test(live[k]):mock[k]==live[k])***REMOVED***),identical)***REMOVED***function getMockForRequest(handler,requestSettings){if($.isFunction(handler))return handler(requestSettings);if($.isFunction(handler.url.test)){if(!handler.url.test(requestSettings.url))return null***REMOVED***else{var star=handler.url.indexOf("*");if(handler.url!==requestSettings.url&&-1===star||!new RegExp(handler.url.replace(/[-[\]{***REMOVED***()+?.,\\^$|#\s]/g,"\\$&").replace("*",".+")).test(requestSettings.url))return null***REMOVED***return handler.data&&requestSettings.data&&!isMockDataEqual(handler.data,requestSettings.data)?null:handler&&handler.type&&handler.type.toLowerCase()!=requestSettings.type.toLowerCase()?null:handler***REMOVED***function logMock(mockHandler,requestSettings){if(window.console&&console.log){var message="MOCK "+requestSettings.type.toUpperCase()+": "+requestSettings.url,request=$.extend({***REMOVED***,requestSettings);if("function"==typeof console.log)console.log(message,request);else try{console.log(message+" "+JSON.stringify(request))***REMOVED***catch(e){console.log(message)***REMOVED******REMOVED******REMOVED***function _xhrSend(mockHandler,requestSettings,origSettings){var process=function(that){return function(){return function(){this.status=mockHandler.status,this.statusText=mockHandler.statusText,this.readyState=4,$.isFunction(mockHandler.response)&&mockHandler.response(origSettings),"json"==requestSettings.dataType&&"object"==typeof mockHandler.responseText?this.responseText=JSON.stringify(mockHandler.responseText):"xml"==requestSettings.dataType?this.responseXML="string"==typeof mockHandler.responseXML?parseXML(mockHandler.responseXML):mockHandler.responseXML:this.responseText=mockHandler.responseText,("number"==typeof mockHandler.status||"string"==typeof mockHandler.status)&&(this.status=mockHandler.status),"string"==typeof mockHandler.statusText&&(this.statusText=mockHandler.statusText),$.isFunction(this.onreadystatechange)?(mockHandler.isTimeout&&(this.status=-1),this.onreadystatechange(mockHandler.isTimeout?"timeout":void 0)):mockHandler.isTimeout&&(this.status=-1)***REMOVED***.apply(that)***REMOVED******REMOVED***(this);mockHandler.proxy?_ajax({global:!1,url:mockHandler.proxy,type:mockHandler.proxyType,data:mockHandler.data,dataType:"script"===requestSettings.dataType?"text/plain":requestSettings.dataType,complete:function(xhr){mockHandler.responseXML=xhr.responseXML,mockHandler.responseText=xhr.responseText,mockHandler.status=xhr.status,mockHandler.statusText=xhr.statusText,this.responseTimer=setTimeout(process,mockHandler.responseTime||0)***REMOVED******REMOVED***):requestSettings.async===!1?process():this.responseTimer=setTimeout(process,mockHandler.responseTime||50)***REMOVED***function xhr(mockHandler,requestSettings,origSettings,origHandler){return mockHandler=$.extend(!0,{***REMOVED***,$.mockjaxSettings,mockHandler),"undefined"==typeof mockHandler.headers&&(mockHandler.headers={***REMOVED***),mockHandler.contentType&&(mockHandler.headers["content-type"]=mockHandler.contentType),{status:mockHandler.status,statusText:mockHandler.statusText,readyState:1,open:function(){***REMOVED***,send:function(){origHandler.fired=!0,_xhrSend.call(this,mockHandler,requestSettings,origSettings)***REMOVED***,abort:function(){clearTimeout(this.responseTimer)***REMOVED***,setRequestHeader:function(header,value){mockHandler.headers[header]=value***REMOVED***,getResponseHeader:function(header){return mockHandler.headers&&mockHandler.headers[header]?mockHandler.headers[header]:"last-modified"==header.toLowerCase()?mockHandler.lastModified||(new Date).toString():"etag"==header.toLowerCase()?mockHandler.etag||"":"content-type"==header.toLowerCase()?mockHandler.contentType||"text/plain":void 0***REMOVED***,getAllResponseHeaders:function(){var headers="";return $.each(mockHandler.headers,function(k,v){headers+=k+": "+v+"\n"***REMOVED***),headers***REMOVED******REMOVED******REMOVED***function processJsonpMock(requestSettings,mockHandler,origSettings){if(processJsonpUrl(requestSettings),requestSettings.dataType="json",requestSettings.data&&CALLBACK_REGEX.test(requestSettings.data)||CALLBACK_REGEX.test(requestSettings.url)){createJsonpCallback(requestSettings,mockHandler);var rurl=/^(\w+:)?\/\/([^\/?#]+)/,parts=rurl.exec(requestSettings.url),remote=parts&&(parts[1]&&parts[1]!==location.protocol||parts[2]!==location.host);if(requestSettings.dataType="script","GET"===requestSettings.type.toUpperCase()&&remote){var newMockReturn=processJsonpRequest(requestSettings,mockHandler,origSettings);return newMockReturn?newMockReturn:!0***REMOVED******REMOVED***return null***REMOVED***function processJsonpUrl(requestSettings){"GET"===requestSettings.type.toUpperCase()?CALLBACK_REGEX.test(requestSettings.url)||(requestSettings.url+=(/\?/.test(requestSettings.url)?"&":"?")+(requestSettings.jsonp||"callback")+"=?"):requestSettings.data&&CALLBACK_REGEX.test(requestSettings.data)||(requestSettings.data=(requestSettings.data?requestSettings.data+"&":"")+(requestSettings.jsonp||"callback")+"=?")***REMOVED***function processJsonpRequest(requestSettings,mockHandler,origSettings){var callbackContext=origSettings&&origSettings.context||requestSettings,newMock=null;return mockHandler.response&&$.isFunction(mockHandler.response)?mockHandler.response(origSettings):$.globalEval("object"==typeof mockHandler.responseText?"("+JSON.stringify(mockHandler.responseText)+")":"("+mockHandler.responseText+")"),jsonpSuccess(requestSettings,mockHandler),jsonpComplete(requestSettings,mockHandler),$.Deferred&&(newMock=new $.Deferred,"object"==typeof mockHandler.responseText?newMock.resolveWith(callbackContext,[mockHandler.responseText]):newMock.resolveWith(callbackContext,[$.parseJSON(mockHandler.responseText)])),newMock***REMOVED***function createJsonpCallback(requestSettings,mockHandler){jsonp=requestSettings.jsonpCallback||"jsonp"+jsc++,requestSettings.data&&(requestSettings.data=(requestSettings.data+"").replace(CALLBACK_REGEX,"="+jsonp+"$1")),requestSettings.url=requestSettings.url.replace(CALLBACK_REGEX,"="+jsonp+"$1"),window[jsonp]=window[jsonp]||function(tmp){data=tmp,jsonpSuccess(requestSettings,mockHandler),jsonpComplete(requestSettings,mockHandler),window[jsonp]=void 0;try{delete window[jsonp]***REMOVED***catch(e){***REMOVED***head&&head.removeChild(script)***REMOVED******REMOVED***function jsonpSuccess(requestSettings,mockHandler){requestSettings.success&&requestSettings.success.call(callbackContext,mockHandler.response?mockHandler.response.toString():mockHandler.responseText||"",status,{***REMOVED***),requestSettings.global&&trigger(requestSettings,"ajaxSuccess",[{***REMOVED***,requestSettings])***REMOVED***function jsonpComplete(requestSettings){requestSettings.complete&&requestSettings.complete.call(callbackContext,{***REMOVED***,status),requestSettings.global&&trigger("ajaxComplete",[{***REMOVED***,requestSettings]),requestSettings.global&&!--$.active&&$.event.trigger("ajaxStop")***REMOVED***function handleAjax(url,origSettings){var mockRequest,requestSettings,mockHandler;"object"==typeof url?(origSettings=url,url=void 0):origSettings.url=url,requestSettings=$.extend(!0,{***REMOVED***,$.ajaxSettings,origSettings);for(var k=0;k<mockHandlers.length;k++)if(mockHandlers[k]&&(mockHandler=getMockForRequest(mockHandlers[k],requestSettings)))return logMock(mockHandler,requestSettings),"jsonp"===requestSettings.dataType&&(mockRequest=processJsonpMock(requestSettings,mockHandler,origSettings))?mockRequest:(mockHandler.cache=requestSettings.cache,mockHandler.timeout=requestSettings.timeout,mockHandler.global=requestSettings.global,copyUrlParameters(mockHandler,origSettings),function(mockHandler,requestSettings,origSettings,origHandler){mockRequest=_ajax.call($,$.extend(!0,{***REMOVED***,origSettings,{xhr:function(){return xhr(mockHandler,requestSettings,origSettings,origHandler)***REMOVED******REMOVED***))***REMOVED***(mockHandler,requestSettings,origSettings,mockHandlers[k]),mockRequest);return _ajax.apply($,[origSettings])***REMOVED***function copyUrlParameters(mockHandler,origSettings){if(!(!mockHandler.url instanceof RegExp)&&mockHandler.hasOwnProperty("urlParams")){var captures=mockHandler.url.exec(origSettings.url);if(1!==captures.length){captures.shift();var i=0,capturesLength=captures.length,paramsLength=mockHandler.urlParams.length,maxIterations=Math.min(capturesLength,paramsLength),paramValues={***REMOVED***;for(i;maxIterations>i;i++){var key=mockHandler.urlParams[i];paramValues[key]=captures[i]***REMOVED***origSettings.urlParams=paramValues***REMOVED******REMOVED******REMOVED***var _ajax=$.ajax,mockHandlers=[],CALLBACK_REGEX=/=\?(&|$)/,jsc=(new Date).getTime();$.extend({ajax:handleAjax***REMOVED***),$.mockjaxSettings={log:function(){if(window.console&&window.console.log){var log=Function.prototype.bind.call(console.log,console);log.apply(console,arguments)***REMOVED******REMOVED***,status:200,statusText:"OK",responseTime:500,isTimeout:!1,contentType:"text/plain",response:"",responseText:"",responseXML:"",proxy:"",proxyType:"GET",lastModified:null,etag:"",headers:{etag:"IJF@H#@923uf8023hFO@I#H#","content-type":"text/plain"***REMOVED******REMOVED***,$.mockjax=function(settings){var i=mockHandlers.length;return mockHandlers[i]=settings,i***REMOVED***,$.mockjaxClear=function(i){1==arguments.length?mockHandlers[i]=null:mockHandlers=[]***REMOVED***,$.mockjax.handler=function(i){return 1==arguments.length?mockHandlers[i]:void 0***REMOVED******REMOVED***(window.jQuery)***REMOVED***),define("app/network/Services",["./urlsMap","../storage/Storage","app/utils/Modal","lib/jquery/mockjax"],function(urls,Storage,Modal){function testCSS(prop){return prop in document.documentElement.style***REMOVED***function _get(url,data,callback,errorCb){if(errorCb=errorCb||defaultErrorCb,ready){var request=$.ajax({url:root+url,data:data,settings:{cache:_factoryCache(url,data)***REMOVED******REMOVED***);return request.pipe(function(response,status){var modal;return response.status||"abort"==status||(modal=Modal.error(response.message),modal.show()),response.status&&response.message&&(modal=Modal.info(response.message),modal.show()),response.status***REMOVED***,function(response,status){var modal;if(!response.status&&"abort"!=status,response.message&&"abort"!=status){var modal=Modal.error(response.message);modal.show()***REMOVED***return!response.status***REMOVED***),request.fail(errorCb).error(errorCb),callback&&request.done(callback),request***REMOVED***return queuedDebugQueries.push({url:url,data:data,callback:callback,errorCb:errorCb,done:function(callback){this.cb=this.cb||[],this.cb.push(callback)***REMOVED******REMOVED***),queuedDebugQueries[queuedDebugQueries.length-1]***REMOVED***function _factoryCache(url,data){var key=url+"::"+JSON.stringify(data);return _factoryCacheObj[key]?!0:(_factoryCacheObj[key]=!0,!1)***REMOVED***function defaultErrorCb(){***REMOVED***function polygonsRequester(type,callback,polygonsData){var data=polygonsData&&polygonsData.lastUpdated?{lastUpdated:polygonsData.lastUpdated***REMOVED***:{***REMOVED***;_get(urls[type],data,function(responseJSON){if(responseJSON.geojson&&responseJSON.geojson.features)try{isIE?callback(responseJSON.geojson):(Storage.storeDataList(responseJSON),callback(Storage.getDataList(type)))***REMOVED***catch(e){"localStorage"in window&&window.localStorage.clear(),callback(responseJSON.geojson)***REMOVED***else callback(polygonsData)***REMOVED***)***REMOVED***function loadInterface(type,callback){var polygonsData=Storage.getDataList(type);polygonsData.features.length?polygonsRequester(type,callback,polygonsData):polygonsRequester(type,callback)***REMOVED***function loadDepartments(callback){loadInterface("departments",callback)***REMOVED***function loadRegions(callback){loadInterface("regions",callback)***REMOVED***function loadMunicipalities(callback){loadInterface("municipalities",callback)***REMOVED***function loadProjectFilters(){return _get(urls.filtersProjects)***REMOVED***function search(type,query,options){return options=options||{***REMOVED***,"Proyectos"===type?options.isList?_get(urls.searchProjectsList,query):_get(urls.searchProjects,query):"Recursos"===type?options.pushpins?_get(urls.infoboxesResources,query):_get(urls.searchResources,query):"Produccion"===type?options.pushpins?_get(urls.infoboxesProduction,query):_get(urls.searchProduction,query):"Fiscalizacion"===type?options.pushpins?_get(urls.infoboxesFiscalizacion,query):_get(urls.searchFiscalizacion,query):void 0***REMOVED***function searchText(key){return _get(urls.texts,{id:key***REMOVED***)***REMOVED***function getConsolidated(paramsString){return _get(urls.consolidated,paramsString)***REMOVED***function getBudgetList(params){return _get(urls.getBudget,params)***REMOVED***function getDistributionList(params){return _get(urls.getDistribution,params)***REMOVED***function getOutlayList(params){return _get(urls.getOutlay,params)***REMOVED***function getAprovedList(params){return _get(urls.getAprovedProyects,params)***REMOVED***function getExecutedList(params){return _get(urls.getExecuted,params)***REMOVED***function getRegaliasList(params){return _get(urls.getRegalias,params)***REMOVED***function getValueAproved(params){return _get(urls.getValueAproved,params)***REMOVED***function getPerformance(params){return _get(urls.getPerformance,params)***REMOVED***function getConsolidatedResources(paramsString){return _get(urls.consolidatedResources,paramsString)***REMOVED***function getConsolidatedProduction(paramsString){return _get(urls.consolidatedProduction,paramsString)***REMOVED***function getConsolidatedFiscalizacion(paramsString){return _get(urls.consolidatedFiscalizacion,paramsString)***REMOVED***function getProductionInfo(paramsString){return _get(urls.getProductionInfo,paramsString)***REMOVED***function getFieldInfo(url,paramsString){return _get(url,paramsString)***REMOVED***function getProjectList(url){var split=url.split("?");return _get(split[0],split[1])***REMOVED***function sendByEmail(params){return _get(urls.sendByEmail,params)***REMOVED***var DEBUG_MODE=!!$(document.body).attr("data-debug"),_factoryCacheObj={***REMOVED***,ready=!DEBUG_MODE,queuedDebugQueries=[],isIE=!1||testCSS("msTransform"),root=DEBUG_MODE?"":window.location.protocol+"//"+window.location.host;return window.appVersion={Name:"Mapa Regalias",Version:"0.3.2"***REMOVED***,DEBUG_MODE&&require(["app/network/debugQueries"],function(){if(ready=!0,queuedDebugQueries.length)for(var i=0;i<queuedDebugQueries.length;i++){var promise=_get(queuedDebugQueries[i].url,queuedDebugQueries[i].data,queuedDebugQueries[i].callback,queuedDebugQueries[i].errorCb);queuedDebugQueries[i].cb&&promise.done(queuedDebugQueries[i].cb)***REMOVED******REMOVED***),$(document).on("click",".submenu a",function(e){e.preventDefault(),e.stopPropagation();var thishref=$(this).attr("href"),dataValue=$(this).attr("data-value");window.location.href=thishref,$(".map-container").attr("data-option-subtipo","fiscalizacion-option-subtipo-"+dataValue),$('.buttons-filter-fiscalization a[data-value="'+dataValue+'"]').trigger("click")***REMOVED***),$(document).on("click",".buttons-filter-fiscalization a",function(e){e.preventDefault();var $this=$(this),dataValue=$this.attr("data-value"),$searchCampo=$('.filter-group[data-parameter=campoProyectoFiscalizacion] .filter-list input[type="text"]'),$optionSelected=($(".filter-group[data-parameter=campoProyectoFiscalizacion] .filter-list .filter button"),$(".filter-group[data-parameter=campoProyectoFiscalizacion] .filter-list .options .option.selected")),dataTextFilter=$this.attr("data-text-filter");$(".buttons-filter-fiscalization a").removeClass("active"),$this.addClass("active"),$(".filter-group[data-parameter=campoProyectoFiscalizacion] .txt").text(dataTextFilter),""!=$searchCampo.val()&&$optionSelected.trigger("click"),$('.filter-group[data-parameter=tipoRecursoNaturalFiscalizacion] .option[data-value="'+dataValue+'"]').trigger("click")***REMOVED***),{polygons:{getDepartments:loadDepartments,getRegions:loadRegions,getMunicipalities:loadMunicipalities***REMOVED***,filters:{forProjects:loadProjectFilters***REMOVED***,search:search,resources:{presupuesto:getBudgetList,distribuido:getDistributionList,giros:getOutlayList,aprobado:getAprovedList,ejecutado:getExecutedList,regalias:getRegaliasList,valorAprobado:getValueAproved,rendimiento:getPerformance***REMOVED***,production:{productionInfo:getProductionInfo,fieldInfo:getFieldInfo,aproved:getAprovedList***REMOVED***,infograph:{consolidated:getConsolidated,resources:getConsolidatedResources,production:getConsolidatedProduction,fiscalizacion:getConsolidatedFiscalizacion***REMOVED***,projectsList:getProjectList,sendByEmail:sendByEmail,texts:searchText***REMOVED******REMOVED***),define("app/utils/MailSharer",["app/network/Services","app/utils/Modal"],function(Services,Modal){function reveal(){var $this=$(this);return sharerContainer.appendTo(document.body).css({left:$this.offset().left,top:$this.offset().top***REMOVED***).show(),$(document).on("click",hide),!1***REMOVED***function send(evt){var pre=location.href+"\n\n";return sharerContainer.addClass("loading"),Services.sendByEmail("to="+encodeURIComponent(sharerContainer.find("#field-email").val())+"&body="+encodeURIComponent(pre+sharerContainer.find("#field-message").val())).done(updateUserOk).fail(updateUserError),evt.preventDefault?evt.preventDefault():evt.returnValue=!1,!1***REMOVED***function hide(evt){evt&&0!=$(evt.target).parents(".mail-sharer").length||(sharerContainer.hide().detach(),$(document).off("click",hide))***REMOVED***function updateUserOk(response){if(sharerContainer.removeClass("loading"),response.status){sharerContainer.find("#field-email").val(""),sharerContainer.find("#field-message").val("");var message=response.message||"Esta página ha sido compartida con éxito al correo: "+sharerContainer.find("#field-email").val()+".";hide(),Modal.info(message).show()***REMOVED******REMOVED***function updateUserError(){sharerContainer.removeClass("loading")***REMOVED***var mailButtons=$("[data-share-by-email]"),sharerContainer=$('<form class="mail-sharer"><h3 class="title">Comparte por Correo Electrónico</h3><div class="field"><label for="field-email">Correo electrónico:</label><input type="email" id="field-email" name="to"></div><div class="field"><label for="field-message">Mensaje:</label><textarea id="field-message" name="subject"></textarea></div><div class="txt-right"><button type="submit">Enviar</button></div><div class="loader"></div></form>');mailButtons.on("click",reveal),sharerContainer.on("submit",send)***REMOVED***),define("utils/beta",["app/utils/Modal"],function(Modal){function toggleDescription(){desc.slideToggle(),header.toggleClass("open")***REMOVED***var notif=$(".beta-notification"),header=notif.find(".beta-notification__header"),close=notif.find(".close-notification"),desc=notif.find(".beta-notification__description");header.on("click",toggleDescription),close.on("click",toggleDescription),$(document).on("mouseenter",".tooltip",function(){$(".info-tool",this).fadeIn("fast")***REMOVED***).on("mouseleave",".tooltip",function(){$(".info-tool",this).fadeOut("fast")***REMOVED***);var modal=new Modal('<iframe src="//player.vimeo.com/video/98644859?portrait=0&amp;badge=0" width="700" height="410" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>');$(".get-video-regalias").on("click",function(){modal.show(),$(".modal .wrapper").css("width",700)***REMOVED***);var $tabbed=$(".main-content__consolidated-tabbed"),$getTab=$(".main-content__type-filters__link");$getTab.click(function(){var href=($(this),$(this).attr("href"));return"#/fiscalizacion"==href?$tabbed.fadeIn():$tabbed.fadeOut(),!1***REMOVED***)***REMOVED***),define("projects",["app/utils/Modal","app/utils/ContactForm","app/utils/MailSharer","utils/beta"],function(Modal){function collapseInfoBoxes(){$("#dataslide").find(".data:visible").slideUp("slow"),$(".goals .controls .date").html($('#dataslide li[data-slide="'+infoSlide.getCurrentSlide()+'"]').attr("data-year")),$(".bardata").find(".ico-plus").removeClass("on")***REMOVED***function getMaxHeight(elems){var max=0;elems.each(function(){$(this).height()>max&&(max=$(this).height())***REMOVED***),dataSlideMax=max***REMOVED***function animateFills(){$(".fill").each(function(){$(this).animate({width:Math.min(parseInt($(this).attr("data-fill"),10),100)+"%"***REMOVED***,1200,"linear")***REMOVED***)***REMOVED***function updateSpotlight(target,targetTxt){$(".spotlight").animate({height:500***REMOVED***,300,function(){$(".spotlight-image").html('<img src="'+target+'"><p class="copy">'+targetTxt+"</p>"),$(".spotlight .photo-left, .spotlight .photo-right").animate({opacity:1***REMOVED***,600)***REMOVED***)***REMOVED***function getItemFromSlide(match){return $('#photos-slide .photo[data-slide="'+match+'"]')[0]***REMOVED***function resizeNumberSize(){for(var contenedor=$(".map-container .project-value"),numberCont=contenedor.find("span"),numberItem=contenedor.find("i");numberCont.css("width")<numberItem.css("width");)numberItem.css("font-size",parseInt(numberItem.css("font-size"),10)-1)***REMOVED***function normalizeRelated(){var max=0;$("#related li").each(function(index,item){max=Math.max($(item).height(),max)***REMOVED***).css("height",max)***REMOVED***function openWindow(url){var leftPosition,topPosition,width=400,height=300,windowFeatures="status=no,height="+height+",width="+width+",resizable=yes,left="+leftPosition+",top="+topPosition+",screenX="+leftPosition+",screenY="+topPosition+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no";leftPosition=window.screen.width/2-(width/2+10),topPosition=window.screen.height/2-(height/2+50),window.open(url,"sharer",windowFeatures)***REMOVED***function checkCORS(url){var def=$.Deferred(),createCORSRequest=function(method,url){var xhr=new XMLHttpRequest;return"withCredentials"in xhr?xhr.open(method,url,!0):"undefined"!=typeof XDomainRequest?(xhr=new XDomainRequest,xhr.open(method,url)):xhr=null,xhr***REMOVED***,method="GET",xhr=createCORSRequest(method,url);return xhr.onload=function(){def.resolve()***REMOVED***,xhr.onerror=function(){def.reject()***REMOVED***,xhr.send(),def***REMOVED***var dataSlideMax;getMaxHeight($("#dataslide .element")),animateFills();var infoSlide=$("#dataslide").bxSlider({adaptiveHeight:!0,nextText:">",prevText:"<",pager:!1,nextSelector:".goals .right",prevSelector:".goals .left",onSlideNext:function(){collapseInfoBoxes()***REMOVED***,onSlidePrev:function(){collapseInfoBoxes()***REMOVED***,onSlideAfter:function(){***REMOVED******REMOVED***),financingSlide=$("#dataslide-finance").bxSlider({adaptiveHeight:!0,nextText:">",prevText:"<",pager:!1,nextSelector:".financing .right",prevSelector:".financing .left",onSlideNext:function(){$("#dataslide-finance").parents(".bx-wrapper").prev().find(".date").html($('#dataslide-finance li[data-slide="'+financingSlide.getCurrentSlide()+'"]').attr("data-year"))***REMOVED***,onSlidePrev:function(){$("#dataslide-finance").parents(".bx-wrapper").prev().find(".date").html($('#dataslide-finance li[data-slide="'+financingSlide.getCurrentSlide()+'"]').attr("data-year"))***REMOVED***,onSlideAfter:function(){***REMOVED******REMOVED***),photoslider=$("#photos-slide").bxSlider({minSlides:1,maxSlides:6,moveSlides:1,slideWidth:140,nextText:"",prevText:"",pager:!1,slideMargin:15,nextSelector:".photo-right",prevSelector:".photo-left",onSliderLoad:function(){$("#photos .bx-viewport").css("height",220)***REMOVED******REMOVED***);$(".spotlight .photo-right a").on("click",function(){var newItem,target,targetTxt;return photoslider.goToNextSlide(),newItem=getItemFromSlide(photoslider.getCurrentSlide()),targetTxt=$(newItem).attr("data-text"),target=$(newItem).attr("data-big"),updateSpotlight(target,targetTxt),!1***REMOVED***),$(".spotlight .photo-left a").on("click",function(){var newItem,target,targetTxt;return photoslider.goToPrevSlide(),newItem=getItemFromSlide(photoslider.getCurrentSlide()),targetTxt=$(newItem).attr("data-text"),target=$(newItem).attr("data-big"),updateSpotlight(target,targetTxt),!1***REMOVED***),$("#photos li .photo").on("click",function(e){var target=$(this).attr("data-big"),targetTxt=$(this).attr("data-text");e.preventDefault(),updateSpotlight(target,targetTxt),photoslider.goToSlide(parseInt($(this).attr("data-slide"),10))***REMOVED***),$(".bardata a").on("click",function(e){if(e.preventDefault(),"none"===$(this).parent().find(".data").css("display")){var parentHeight=$(this).parents(".element").height(),containerHeight=$(this).parents(".element").find(".data").height()+34;$(this).parent().find(".data").slideDown("normal",function(){$(this).parents(".bx-viewport").animate({height:$(this).parents(".element").height()+34***REMOVED***)***REMOVED***).before(function(){$(this).parents(".bx-viewport").animate({height:parentHeight+containerHeight***REMOVED***),$(this).parent().find(".ico-plus").toggleClass("on")***REMOVED***)***REMOVED***else $(this).parent().find(".data").slideUp("normal",function(){$(this).parents(".bx-viewport").animate({height:$(this).parents(".element").height()+34***REMOVED***)***REMOVED***).before(function(){$(".dataslide").animate({height:dataSlideMax***REMOVED***)***REMOVED***),$(this).parent().find(".ico-plus").toggleClass("on");return!1***REMOVED***),$(".social-share .fb").on("click",function(){return openWindow("http://www.facebook.com/sharer.php?u="+encodeURIComponent(window.location.href)+"&t="+encodeURIComponent(document.title)),!1
***REMOVED***),$(".social-share .tweet").on("click",function(){return openWindow("https://twitter.com/intent/tweet?url="+encodeURIComponent(window.location.href)+"&text="+encodeURIComponent(document.title)),!1***REMOVED***),$(".social-share .print").on("click",function(){return print(),!1***REMOVED***),$(document).on("click",".project-accordion__title",function(){$(this).toggleClass("open").next().slideToggle()***REMOVED***),$(".view-visible-auditories").on("click",function(){var url=this.getAttribute("href");return checkCORS(url).done(function(){var $content=$('<h2><button class="close">X</button> Auditoría Visible '+$(".project-approvers .text").first().text().replace("OCAD ","")+'</h2><iframe src="/content/js/lib/pdf/web/viewer.html?file='+url+'">'),modal=new Modal($content);modal.addClass("pdf-viewer").show(),$content.find(".close").on("click",function(){modal.hide()***REMOVED***)***REMOVED***).fail(function(){window.open(url)***REMOVED***),!1***REMOVED***),resizeNumberSize(),normalizeRelated()***REMOVED***);
//# sourceMappingURL=projects.js.map