define(["./MapState"],function(n){function t(){this.root=$("#projects-list-view"),this.projects=ko.observableArray([]);n.on("projects-list-loaded",this.projectsListLoaded.bind(this));this.root.find(".pagination").on("click","a",this.loadPage);this.root.find(".back").on("click",this.toMapMode);this.pages=ko.observableArray([]),this.actual=0***REMOVED***t.prototype.pageNumberTempl=doT.compile('<a href="#" class="{{? it.active***REMOVED******REMOVED***active{{?***REMOVED******REMOVED***" data-page="{{=it.page***REMOVED******REMOVED***">{{=it.page***REMOVED******REMOVED***<\/a>'),t.prototype.projectsListLoaded=function(n){this.projects(n.objects),this.pages([]),this.drawPages(+n.pageNumber,+n.totalPages),$("html, body").animate({scrollTop:$("#controls").offset().top***REMOVED***,300)***REMOVED***,t.prototype.loadPage=function(){return n.setPage(this.getAttribute("data-page")),!1***REMOVED***,t.prototype.toMapMode=function(){return n.setListMode(!1),!1***REMOVED***,t.prototype.drawPages=function(n,t){var r="",i,u=5;if(this.actual=n,n>1&&(r+='<a class="prev" href="#" data-page="'+(n-1)+'">&lt;<\/a>'),t<15)for(i=1;i<=t;i++)r+=this.pageNumberTempl({page:i,active:i==n***REMOVED***);else{for(i=1;i<u;i++)r+=this.pageNumberTempl({page:i,active:i==n***REMOVED***);if(n>u+1&&n<t-u)r+="...",r+=this.pageNumberTempl({page:n-1,active:i==n***REMOVED***),r+=this.pageNumberTempl({page:n,active:!0***REMOVED***),r+=this.pageNumberTempl({page:n+1,active:i==n***REMOVED***),r+="...";else if(n<t-u){for(i=u;i<=u+2;i++)r+=this.pageNumberTempl({page:i,active:i==n***REMOVED***);r+="..."***REMOVED***else for(r+="...",i=t-7;i<=t-u;i++)r+=this.pageNumberTempl({page:i,active:i==n***REMOVED***);for(i=t-u+2;i<=t;i++)r+=this.pageNumberTempl({page:i,active:i==n***REMOVED***)***REMOVED***n<t&&(r+='<a class="next" href="#" data-page="'+(n+1)+'">&gt;<\/a>'),this.root.find(".pagination").html(r)***REMOVED***;var i=new t;ko.applyBindings(i,i.root[0])***REMOVED***);
//@ sourceMappingURL=ListView.min.js.map