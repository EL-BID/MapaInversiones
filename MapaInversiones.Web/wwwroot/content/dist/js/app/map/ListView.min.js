define(["./MapState"],function(n){function t(){this.root=$("#projects-list-view"),this.projects=ko.observableArray([]);n.on("projects-list-loaded",this.projectsListLoaded.bind(this));this.root.find(".pagination").on("click","a",this.loadPage);this.root.find(".back").on("click",this.toMapMode);this.pages=ko.observableArray([]),this.actual=0}t.prototype.pageNumberTempl=doT.compile('<a href="#" class="{{? it.active}}active{{?}}" data-page="{{=it.page}}">{{=it.page}}<\/a>'),t.prototype.projectsListLoaded=function(n){this.projects(n.objects),this.pages([]),this.drawPages(+n.pageNumber,+n.totalPages),$("html, body").animate({scrollTop:$("#controls").offset().top},300)},t.prototype.loadPage=function(){return n.setPage(this.getAttribute("data-page")),!1},t.prototype.toMapMode=function(){return n.setListMode(!1),!1},t.prototype.drawPages=function(n,t){var r="",i,u=5;if(this.actual=n,n>1&&(r+='<a class="prev" href="#" data-page="'+(n-1)+'">&lt;<\/a>'),t<15)for(i=1;i<=t;i++)r+=this.pageNumberTempl({page:i,active:i==n});else{for(i=1;i<u;i++)r+=this.pageNumberTempl({page:i,active:i==n});if(n>u+1&&n<t-u)r+="...",r+=this.pageNumberTempl({page:n-1,active:i==n}),r+=this.pageNumberTempl({page:n,active:!0}),r+=this.pageNumberTempl({page:n+1,active:i==n}),r+="...";else if(n<t-u){for(i=u;i<=u+2;i++)r+=this.pageNumberTempl({page:i,active:i==n});r+="..."}else for(r+="...",i=t-7;i<=t-u;i++)r+=this.pageNumberTempl({page:i,active:i==n});for(i=t-u+2;i<=t;i++)r+=this.pageNumberTempl({page:i,active:i==n})}n<t&&(r+='<a class="next" href="#" data-page="'+(n+1)+'">&gt;<\/a>'),this.root.find(".pagination").html(r)};var i=new t;ko.applyBindings(i,i.root[0])});
//@ sourceMappingURL=ListView.min.js.map