{"version":3,"file":"ContactForm.js","sources":["../network/urlsMap.js","ContactForm.js"],"names":[],"mappings":"AACA,OAAA,uBAOA,KAAA,OAAA,SAAA,SAAA,KAAA,OAAA,SAAA,KAEA,gBAAA,iCAEA,YAAA,+BACA,QAAA,yBACA,eAAA,4BAEA,eAAA,mCACA,mBAAA,kCAEA,aAAA,0BAMA,mBAAA,wCAEA,gBAAA,oCACA,sBAAA,4CAGA,UAAA,0CACA,gBAAA,2CACA,UAAA,oCACA,mBAAA,4CACA,YAAA,sDACA,gBAAA,qDACA,eAAA,mDACA,YAAA,0CAKA,oBAAA,4CACA,eAAA,6CACA,iBAAA,wCACA,uBAAA,8CAEA,kBAAA,2CACA,aAAA,0CAMA,uBAAA,mCAEA,oBAAA,kCACA,yBAAA,kDACA,0BAAA,kDAKA,QAAA,oBAGA,YAAA,2BAKA,MAAA,mCCvEA,OAAA,yBAAA,sBAAA,SAAA,SAOA,QAAA,eAAA,KACA,GACA,cAAA,QADA,OAAA,EAAA,MAAA,KAAA,kBAKA,OAFA,KAAA,iBAEA,qBAAA,IAAA,OAAA,iBAEA,WAEA,QAAA,qBAAA,QACA,SACA,IAAA,mBAGA,GACA,qBAIA,aAAA,qBAAA,UAQA,EAAA,MACA,IAAA,QAAA,QACA,KAAA,EAAA,MAAA,cAEA,KAAA,eACA,KAAA,gBAEA,IAXA,EAcA,QAAA,sBAAA,QAIA,IAHA,GACA,OADA,EAAA,OAAA,OACA,OAAA,EAEA,KACA,MAAA,OAAA,GAEA,MAAA,gBAQA,qBAAA,QAPA,MAAA,SAAA,cAAA,SAAA,MAAA,KACA,kBAAA,MAAA,0BACA,MAAA,SAAA,cACA,kBAAA,MAAA,6BAEA,OAAA,EAMA,OAAA,OAGA,QAAA,sBAAA,QAIA,IAHA,GACA,OADA,EAAA,OAAA,OACA,OAAA,EAEA,KACA,MAAA,OAAA,GAEA,SAAA,MAAA,MAAA,MAAA,MAAA,MAAA,aAGA,MAAA,MAAA,OAIA,qBAAA,QAHA,kBAAA,MAAA,6BACA,OAAA,IAJA,kBAAA,MAAA,0BACA,OAAA,EASA,OAAA,OAGA,QAAA,mBAAA,MAAA,SACA,MAAA,EAAA,OAAA,SAAA,QACA,IAAA,MAAA,MAAA,MAEA,MAAA,SAAA,kBACA,KAAA,EAAA,SAAA,QAAA,iBACA,MAAA,MAAA,OAEA,KAAA,KAAA,SAGA,QAAA,sBAAA,OACA,EAAA,OACA,YAAA,SACA,KAAA,iBACA,SAGA,QAAA,iBACA,GAAA,SAAA,EAAA,SAAA,QAAA,iBACA,SAAA,KAAA,wCAEA,EAAA,oBAAA,QAAA,OAAA,SAGA,QAAA,iBACA,GAAA,SAAA,EAAA,SAAA,QAAA,6BACA,SAAA,KAAA,gCAEA,EAAA,oBAAA,QAAA,OAAA,SApHA,GAAA,WAAA,SAAA,cAAA,SACA,mBAAA,iBAAA,WAEA,SAAA,OAAA,UAAA,SAAA,KAAA,OAAA,aAAA,QAAA,eAAA,EACA,YAAA,GAmHA,GAAA,oBAAA,GAAA,SAAA","sourcesContent":["/*global define*/\ndefine('app/network/urlsMap',{\n\t//-----------------------\n\t// PROJECTS\n\t//-----------------------\n\t// FILTERS ALL\n\t// filtersProjects: '/api/filtros',\n\n\troot: window.location.protocol+'//'+window.location.host,\n\n\tfiltersProjects: '/api/FiltrosTotales/GetFiltros',\n\t// POLYGONS\n\tdepartments: '/api/poligonos/departamento/',\n\tregions: '/api/poligonos/region/',\n\tmunicipalities: '/api/poligonos/municipio/',\n\t// SEARCH PROYECTS\n\tsearchProjects: '/api/serviciosproyectos/busqueda',\n\tsearchProjectsList: '/api/serviciosproyectos/listado',\n\t// CONSOLIDATED\n\tconsolidated: '/api/datosconsolidados/',\n\n\t//-----------------------\n\t// RESOURCES\n\t//-----------------------\n\t// INFOGRAPHS AKA INFOBOXES\n\tinfoboxesResources: '/api/Recursos/GetInfograficosRecursos',\n\t// SEARCH RESOURCES\n\tsearchResources: '/api/Recursos/GetPushPinsRecursos',\n\tconsolidatedResources: '/api/Recursos/GetDataGraficasConsolidados',\n\t//searchResourcesList: '/api/Recursos/GetListaRecursos',\n\t// resourcesList: '/api/Recursos/GetListaRecursos',\n\tgetBudget: '/api/Recursos/GetInformacionPresupuesto',\n\tgetDistribution: '/api/Recursos/GetInformacionDistribucion',\n\tgetOutlay: '/api/Recursos/GetInformacionGiros',\n\tgetAprovedProyects: '/api/Proyectos/GetOtrosProyectosAprobados',\n\tgetExecuted: '/api/Recursos/GetInformacionValorEjecutadoProyectos',\n\tgetValueAproved: '/api/Recursos/GetInformacionValorAprobadoProyectos',\n\tgetPerformance: '/api/Recursos/GetInformacionRendimientosDirectas',\n\tgetRegalias: '/api/Recursos/GetInformacionLiquidacion',\n\n\t//-----------------------\n\t// PRODUCTION\n\t//-----------------------\n\tinfoboxesProduction: '/api/produccion/GetInfograficosProduccion',\n\tgetFieldOrMine: '/api/produccion/GetCampoOMinasPorGeografia',\n\tsearchProduction: '/api/produccion/GetPushPinsProduccion',\n\tconsolidatedProduction: '/api/produccion/GetDataGraficasConsolidados',\n\n\tgetProductionInfo: '/api/produccion/GetInformacionProduccion',\n\tgetFieldInfo: '/api/produccion/GetProduccionCampoOMina',\n\n\t//-----------------------\n\t// FISCALIZACION\n\t//-----------------------\n\t//infoboxesFiscalizacion: '/api/fiscalizacion/GetInfograficosFiscalizacion',\n\tinfoboxesFiscalizacion: '/api/fiscalizacion/GetInfoboxes/',\n\t//searchFiscalizacion: '/api/fiscalizacion/busqueda',\n\tsearchFiscalizacion: '/api/Fiscalizacion/GetPushPins/',\n\tactividadesFiscalizacion: '/api/Fiscalizacion/GetActividadesFiscalizacion/',\n\tconsolidatedFiscalizacion: '/api/fiscalizacion/GetDataGraficasFiscalizacion',\n\n\t//-----------------------\n\t// CONTACT\n\t//-----------------------\n\tcontact: '/api/Mail/setMail',\n\t// Format\n\t// /api/Correo/EnviarCorreo/?to=v-carlommicrosoft.com&subject=Busqueda&body=Realiz%C3%A9\n\tsendByEmail: '/api/Correo/EnviarCorreo',\n\n\t//-----------------------\n\t// TEXTS\n\t//-----------------------\n\ttexts: '/api/Textos/GetTextoParametrico'\n})\n;\n","/*global define*/\ndefine('app/utils/ContactForm',['../network/urlsMap'], function(urlsMap){\n\tvar chckinput = document.createElement('input'),\n\t\tsupportsValidation = 'checkValidity' in chckinput,\n\t\t// sorry for this.. but only safari fails waird\n\t\tisSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0,\n\t\temailRegexp = /@/\n\n\tfunction checkValidity( evt ) {\n\t\tvar inputs = $(this).find('input, textarea'),\n\t\t\tinputsPassed, isValid\n\t\t\n\t\tevt.preventDefault()\n\n\t\tif( supportsValidation && !evt.target.checkValidity() ){\n\t\t\t// evt.preventDefault()\n\t\t\tif( isSafari ){\n\t\t\t\t// safari doesn't show warnings\n\t\t\t\tisValid = validateInputsSafari( inputs )\n\t\t\t\tif( !isValid ){\n\t\t\t\t\tevt.preventDefault()\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false\n\t\t}else if( !supportsValidation ){\n\t\t\t//IE and some mobile browsers\n\t\t\t//have to do some styling\n\t\t\t//check each input\n\t\t\tinputsPassed = validateInputsOldWay( inputs )\n\n\t\t\tif( !inputsPassed ){\n\t\t\t\t//Show form warning (optional)\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t\t\n\t\t$.ajax({\n\t\t\turl: urlsMap.contact,\n\t\t\tdata: $(this).serialize()\n\t\t})\n\t\t.done( notifySuccess )\n\t\t.fail( notifyFailure )\n\t\t\n\t\treturn false\n\t}\n\n\tfunction validateInputsSafari( inputs ){\n\t\tvar i = inputs.length,\n\t\t\tinput, valid = true\n\n\t\tfor(; i--;){\n\t\t\tinput = inputs[i]\n\t\t\t\n\t\t\tif( !input.checkValidity() ){\n\t\t\t\tif( input.validity.typeMismatch && input.type == 'email' ){\n\t\t\t\t\tapplyErrorStyleTo( input, 'No es un correo válido' )\n\t\t\t\t}else if( input.validity.valueMissing ){\n\t\t\t\t\tapplyErrorStyleTo( input, 'Este campo es obligatorio' )\n\t\t\t\t}\n\t\t\t\tvalid = false\n\t\t\t}else{\n\t\t\t\tremoveErrorStyleFrom( input )\n\t\t\t}\n\t\t}\n\n\t\treturn valid\n\t}\n\n\tfunction validateInputsOldWay( inputs ){\n\t\tvar i = inputs.length,\n\t\t\tinput, valid = true\n\n\t\tfor(; i--;){\n\t\t\tinput = inputs[i]\n\t\t\t\n\t\t\tif( input.type == 'email' && !input.value.match( emailRegexp ) ){\n\t\t\t\tapplyErrorStyleTo( input, 'No es un correo válido' )\n\t\t\t\tvalid = false\n\t\t\t}else if( !input.value.length ){\n\t\t\t\tapplyErrorStyleTo( input, 'Este campo es obligatorio' )\n\t\t\t\tvalid = false\n\t\t\t}else{\n\t\t\t\tremoveErrorStyleFrom( input )\n\t\t\t}\n\t\t}\n\n\t\treturn valid\n\t}\n\n\tfunction applyErrorStyleTo( input, message ){\n\t\tinput = $(input).addClass( 'error' )\n\t\tvar next = input.next()\n\n\t\tif( !next.hasClass('errorMessage') ){\n\t\t\tnext = $('<div>', {'class': 'errorMessage'})\n\t\t\tinput.after( next )\n\t\t}\n\t\tnext.html( message )\n\t}\n\n\tfunction removeErrorStyleFrom( input ){\n\t\t$(input)\n\t\t\t.removeClass('error')\n\t\t\t.next('.errorMessage')\n\t\t\t.remove()\n\t}\n\n\tfunction notifySuccess(){\n\t\tvar message = $('<div>', {'class': 'statusMessage'})\n\t\tmessage.html('Su mensaje ha sido enviado con éxito')\n\n\t\t$('.js-contact-form').empty().append( message )\n\t}\n\n\tfunction notifyFailure(){\n\t\tvar message = $('<div>', {'class': 'statusMessage statusError'})\n\t\tmessage.html('No se pudo enviar el mensaje')\n\n\t\t$('.js-contact-form').empty().append( message )\n\t}\n\t\n\t$('.js-contact-form').on('submit', checkValidity)\n});\n"]}