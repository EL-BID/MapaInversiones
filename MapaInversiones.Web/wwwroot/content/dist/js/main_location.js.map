{"version":3,"file":"main.js","sources":["lib/mvc/Observable.js","app/storage/Storage.js","app/utils/Modal.js","lib/jquery/mockjax.js","app/network/Services.js","app/controller/appStates.js","app/controller/AppState.js","app/utils/territories.js","app/map/Infobox.js","app/map/Polygon.js","app/map/Pushpin.js","app/map/ListView.js","app/map/Map.js","app/utils/allColors.js","app/grapher/Grapher.js","app/infographic/Infographic.js","app/filters/Option.js","app/filters/Filter.js","app/filters/FiltersGroup.js","app/utils/Utils.js","app/filters/FiltersManager.js","app/utils/MailSharer.js","utils/beta.js"],"names":[],"mappings":"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","sourcesContent":["/*global define*/\n/**\n * Simple Observable Patter\n */\ndefine('lib/mvc/Observable',[],function(){\n\t\n\tvar Observable = function(){\n\t\tthis._events = {}\n\t}\n\n\t/**\n\t * Add\n\t * @param  {String}   evt      Event name\n\t * @param  {Function} callback Callback function\n\t */\n\tObservable.prototype.on = function(evt, callback){\n\t\tif(!this._events[evt])\n\t\t\tthis._events[evt] = []\n\t\tthis._events[evt].push(callback)\n\t}\n\n\t/**\n\t * Removes an observer (callback) from\n\t * the specified event list\n\t * @param  {String}   evt      event name\n\t * @param  {Function} callback\n\t */\n\tObservable.prototype.off = function(evt, callback){\n\t\tvar index\n\t\tif(this._events[evt] &&\n\t\t\t~(index = this._events[evt].indexOf(callback)))\n\t\t\tthis._events[evt].splice(index, 1)\n\t}\n\n\t/**\n\t * Fires the event. Callable with any numer of arguments,\n\t * but first the event name\n\t * @param  {String} evt the event name\n\t */\n\tObservable.prototype.fireEvent = function(evt){\n\t\tif(!this._events[evt])\n\t\t\treturn\n\t\tfor(var i=0; i<this._events[evt].length; i++)\n\t\t\tthis._events[evt][i].apply(null, [].slice.call(arguments, 1))\n\t}\n\n\treturn Observable\n});\n","/*global localStorage, define*/\ndefine('app/storage/Storage',[],function(){\n\t'use strict';\n\tvar _keywordsMap = {\n\t\t\tstatus: 's',\n\t\t\tlastUpdated: 'l',\n\t\t\ttype: 't',\n\t\t\tgeojson: 'g',\n\t\t\tfeatures: 'f',\n\t\t\tproperties: 'p',\n\t\t\tLAT: 'LA',\n\t\t\tLON: 'LO',\n\t\t\tname: 'n',\n\t\t\tid: 'i',\n\t\t\tgeometry: 'ge',\n\t\t\tcoordinates: 'c'\n\t\t}\n\n\t/**\n\t * Transform the JSON object to have the less possible quantity of [] and {}\n\t * for storage\n\t *\n\t * @param  {Object} object\traw object\n\t * @return {Object}\t\t\toptimized version\n\t */\n\tfunction toLightFormat(object, parent){\n\t\tvar light = {},\n\t\t\tkey, lcord = [], lcords = [],\n\t\t\ti, j, k,\n\t\t\tkeysArray = [],\n\t\t\tstoreKey = '_dnp_'\n\n\t\tfor(key in object){\n\t\t\tif(object[key].constructor == Object){\n\t\t\t\tlight[_keywordsMap[key]] = toLightFormat(object[key], object)\n\t\t\t}\n\t\t\t//this is only for coordinates\n\t\t\telse if(key == 'coordinates'){\n\t\t\t\tif(object.type == 'Polygon'){\n\t\t\t\t\tfor(i=0, k=0; i < object[key][0].length; i++, k+=2){\n\t\t\t\t\t\tlcords[k] = object[key][0][i][0]\n\t\t\t\t\t\tlcords[k+1] = object[key][0][i][1]\n\t\t\t\t\t}\n\t\t\t\t\tlight[_keywordsMap[key]] = lcords\n\t\t\t\t}else{\n\t\t\t\t\tfor(i=0; i < object[key].length; i++){\n\t\t\t\t\t\tlcords = []\n\t\t\t\t\t\tfor(j=0, k=0; j < object[key][i][0].length; j++, k+=2){\n\t\t\t\t\t\t\tlcords[k] = object[key][i][0][j][0]\n\t\t\t\t\t\t\tlcords[k+1] = object[key][i][0][j][1]\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlcord[i] = lcords\n\t\t\t\t\t}\n\t\t\t\t\tlight[_keywordsMap[key]] = lcord\n\t\t\t\t}\n\t\t\t}\n\t\t\t//if features (array)\n\t\t\telse if(key == 'features'){\n\n\t\t\t\tif(parent.type == 'municipio'){\n\t\t\t\t\tstoreKey+='ml'\n\t\t\t\t}else if(parent.type == 'departamento'){\n\t\t\t\t\tstoreKey+='dl'\n\t\t\t\t}else{\n\t\t\t\t\tstoreKey+='rl'\n\t\t\t\t}\n\n\t\t\t\tvar lastUpdated = +localStorage.getItem(storeKey+'_up')\n\n\t\t\t\tif(parent.lastUpdated > lastUpdated){\n\t\t\t\t\t//here we create an array of ids to link directly the elements\n\t\t\t\t\t//that will be stored in localStorage\n\t\t\t\t\t// light[_keywordsMap[key]] = [] // not necessary any moar\n\t\t\t\t\tfor(i=0; i<object[key].length; i++){\n\t\t\t\t\t\tkeysArray[i] = object[key][i].properties.id\n\t\t\t\t\t\tvar poly = toLightFormat(object[key][i], object)\n\t\t\t\t\t\t_storeLightObject(poly)\n\t\t\t\t\t}\n\n\t\t\t\t\tvar lsList = localStorage.getObject(storeKey)\n\n\t\t\t\t\tif(!lsList){\n\t\t\t\t\t\tlocalStorage.setObject(storeKey, keysArray)\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tfor(i=0; i<keysArray.length; i++){\n\t\t\t\t\t\t\tif(lsList.indexOf(keysArray[i]) == -1)\n\t\t\t\t\t\t\t\tlsList.push(keysArray[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlocalStorage.setObject(storeKey, lsList)\n\t\t\t\t\t}\n\n\t\t\t\t\t//If there where data, is updated the modified\n\t\t\t\t\tlocalStorage.setItem(storeKey + '_up', parent.lastUpdated)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tlight[_keywordsMap[key]] = object[key]\n\t\t\t}\n\t\t}\n\n\t\treturn light\n\t}\n\n\n\tfunction _storeLightObject(object){\n\t\tvar rootKey = '_dnp_'\n\n\t\tif(object.p.t == 'departamento'){\n\t\t\trootKey += 'd_'+object.p.i\n\t\t}else if (object.p.t == 'municipio'){\n\t\t\trootKey += 'm_'+object.p.i\n\t\t}else{\n\t\t\trootKey += 'r_'+object.p.i\n\t\t}\n\t\tlocalStorage.setObject(rootKey, object)\n\t}\n\n\tfunction getDataList(type){\n\t\tvar lKey, iKey, array = [],\n\t\t\tarrayIds\n\n\t\tif(type == 'departments'){\n\t\t\tlKey = '_dnp_dl'\n\t\t\tiKey = '_dnp_d_'\n\t\t}\n\t\telse if(type == 'municipalities'){\n\t\t\tlKey = '_dnp_ml'\n\t\t\tiKey = '_dnp_m_'\n\t\t}\n\t\telse{\n\t\t\tlKey = '_dnp_rl'\n\t\t\tiKey = '_dnp_r_'\n\t\t}\n\n\t\tarrayIds = localStorage.getObject(lKey) || []\n\n\t\tfor(var i=0; i<arrayIds.length; i++){\n\t\t\tarray[i] = localStorage.getObject(iKey + arrayIds[i])\n\t\t}\n\n\t\treturn {\n\t\t\tfeatures: array,\n\t\t\tlastUpdated: localStorage.getItem(lKey+'_up')\n\t\t}\n\t}\n\n\treturn{\n\t\tstoreDataList: toLightFormat,\n\t\tgetDataList: getDataList\n\t}\n});\n","/*global define*/\ndefine('app/utils/Modal',[],function(){\n\tvar errorTemplate = doT.compile('<div class=\"error\"><h1>Error</h1><p>{{=it.message}}</p>'+\n\t\t\t'<div class=\"txt-right\"><a class=\"button close\">Cerrar</a></div></div>'),\n\t\tinfoTemplate = doT.compile('<div class=\"info\"><h1>Informacin</h1><p>{{=it.message}}</p>'+\n\t\t\t'<div class=\"txt-right\"><a class=\"button close\">Cerrar</a></div></div>')\n\t\n\tfunction Modal(content){\n\t\tthis.modal = $('<div>', {'class': 'modal'})[0]\n\t\tthis.back = $('<div>', {'class': 'back'})[0]\n\t\tthis.container = $('<div>', {'class': 'container'})[0]\n\t\tthis.wrapper = $('<div>', {'class': 'wrapper'})[0]\n\t\tthis.content = $('<div>', {'class': 'content'})[0]\n\n\t\tif(typeof content == 'string')\n\t\t\tthis.content.innerHTML = content\n\t\t//Zepto object or Element\n\t\telse if(typeof content == 'object'){\n\t\t\t$(this.content).append(content)\n\t\t}\n\n\t\tthis.wrapper.appendChild(this.content)\n\t\tthis.back.appendChild(this.wrapper)\n\t\tthis.modal.appendChild(this.back)\n\n\t\t//Events\n\t\t$(this.wrapper).on('click', function(e){\n\t\t\tif (e.stopPropagation) e.stopPropagation()\n\t\t\telse e.cancelBubble = true\n\t\t})\n\t\t$(this.back).on('click', this.hide.bind(this))\n\t\t$(this.wrapper).on('click', '.close', this.hide.bind(this))\n\t}\n\tModal.prototype.addClass = function( className ){\n\t\t$(this.modal).addClass( className )\n\t\treturn this\n\t}\n\tModal.prototype.show = function(){\n\t\t$('html').css('overflow', 'hidden')\n\t\tdocument.body.appendChild(this.modal)\n\t\tthis.modal.style.display = 'block'\n\t}\n\tModal.prototype.hide = function(){\n\t\t$('html').css('overflow', 'visible')\n\t\tthis.modal.style.display = 'none'\n\t\ttry{\n\t\t\tdocument.body.removeChild(this.modal)\n\t\t}catch(e){}\n\t}\n\tModal.prototype.getElement = function(){\n\t\treturn this.modal\n\t}\n\tModal.info = function( message ){\n\t\treturn new Modal(infoTemplate({message: message}))\n\t}\n\tModal.error = function( message ){\n\t\treturn new Modal(errorTemplate({message: message}))\n\t}\n\n\treturn Modal\n});\n","define('lib/jquery/mockjax',[],function(){\n\n\t/*!\n\t * MockJax - jQuery Plugin to Mock Ajax requests\n\t *\n\t * Version:  1.5.1\n\t * Released:\n\t * Home:   http://github.com/appendto/jquery-mockjax\n\t * Author:   Jonathan Sharp (http://jdsharp.com)\n\t * License:  MIT,GPL\n\t *\n\t * Copyright (c) 2011 appendTo LLC.\n\t * Dual licensed under the MIT or GPL licenses.\n\t * http://appendto.com/open-source-licenses\n\t */\n\t(function($) {\n\t\tvar _ajax = $.ajax,\n\t\t\tmockHandlers = [],\n\t\t\tCALLBACK_REGEX = /=\\?(&|$)/, \n\t\t\tjsc = (new Date()).getTime();\n\n\t\t\n\t\t// Parse the given XML string. \n\t\tfunction parseXML(xml) {\n\t\t\tif ( window['DOMParser'] == undefined && window.ActiveXObject ) {\n\t\t\t\tDOMParser = function() { };\n\t\t\t\tDOMParser.prototype.parseFromString = function( xmlString ) {\n\t\t\t\t\tvar doc = new ActiveXObject('Microsoft.XMLDOM');\n\t\t\t\t\tdoc.async = 'false';\n\t\t\t\t\tdoc.loadXML( xmlString );\n\t\t\t\t\treturn doc;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tvar xmlDoc \t= ( new DOMParser() ).parseFromString( xml, 'text/xml' );\n\t\t\t\tif ( $.isXMLDoc( xmlDoc ) ) {\n\t\t\t\t\tvar err = $('parsererror', xmlDoc);\n\t\t\t\t\tif ( err.length == 1 ) {\n\t\t\t\t\t\tthrow('Error: ' + $(xmlDoc).text() );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthrow('Unable to parse XML');\n\t\t\t\t}\n\t\t\t} catch( e ) {\n\t\t\t\tvar msg = ( e.name == undefined ? e : e.name + ': ' + e.message );\n\t\t\t\t$(document).trigger('xmlParseError', [ msg ]);\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn xmlDoc;\n\t\t}\n\n\t\t// Trigger a jQuery event\n\t\tfunction trigger(s, type, args) {\n\t\t\t(s.context ? $(s.context) : $.event).trigger(type, args);\n\t\t}\n\n\t\t// Check if the data field on the mock handler and the request match. This \n\t\t// can be used to restrict a mock handler to being used only when a certain\n\t\t// set of data is passed to it.\n\t\tfunction isMockDataEqual( mock, live ) {\n\t\t\tvar identical = false;\n\t\t\t// Test for situations where the data is a querystring (not an object)\n\t\t\tif (typeof live === 'string') {\n\t\t\t\t// Querystring may be a regex\n\t\t\t\treturn $.isFunction( mock.test ) ? mock.test(live) : mock == live;\n\t\t\t}\n\t\t\t$.each(mock, function(k, v) {\n\t\t\t\tif ( live[k] === undefined ) {\n\t\t\t\t\tidentical = false;\n\t\t\t\t\treturn identical;\n\t\t\t\t} else {\n\t\t\t\t\tidentical = true;\n\t\t\t\t\tif ( typeof live[k] == 'object' ) {\n\t\t\t\t\t\treturn isMockDataEqual(mock[k], live[k]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( $.isFunction( mock[k].test ) ) {\n\t\t\t\t\t\t\tidentical = mock[k].test(live[k]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tidentical = ( mock[k] == live[k] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn identical;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn identical;\n\t\t}\n\n\t\t// Check the given handler should mock the given request\n\t\tfunction getMockForRequest( handler, requestSettings ) {\n\t\t\t// If the mock was registered with a function, let the function decide if we\n\t\t\t// want to mock this request\n\t\t\tif ( $.isFunction(handler) ) {\n\t\t\t\treturn handler( requestSettings );\n\t\t\t}\n\n\t\t\t// Inspect the URL of the request and check if the mock handler's url\n\t\t\t// matches the url for this ajax request\n\t\t\tif ( $.isFunction(handler.url.test) ) {\n\t\t\t\t// The user provided a regex for the url, test it\n\t\t\t\tif ( !handler.url.test( requestSettings.url ) ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Look for a simple wildcard '*' or a direct URL match\n\t\t\t\tvar star = handler.url.indexOf('*');\n\t\t\t\tif (handler.url !== requestSettings.url && star === -1 || \n\t\t\t\t\t\t!new RegExp(handler.url.replace(/[-[\\]{}()+?.,\\\\^$|#\\s]/g, \"\\\\$&\").replace('*', '.+')).test(requestSettings.url)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Inspect the data submitted in the request (either POST body or GET query string)\n\t\t\tif ( handler.data && requestSettings.data ) {\n\t\t\t\tif ( !isMockDataEqual(handler.data, requestSettings.data) ) {\n\t\t\t\t\t// They're not identical, do not mock this request\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Inspect the request type\n\t\t\tif ( handler && handler.type && \n\t\t\t\t\t handler.type.toLowerCase() != requestSettings.type.toLowerCase() ) {\n\t\t\t\t// The request type doesn't match (GET vs. POST)\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn handler;\n\t\t}\n\n\t\t// If logging is enabled, log the mock to the console\n\t\tfunction logMock( mockHandler, requestSettings ) {\n\t\t\tif ( window.console && console.log ) {\n\t\t\t\tvar message = 'MOCK ' + requestSettings.type.toUpperCase() + ': ' + requestSettings.url;\n\t\t\t\tvar request = $.extend({}, requestSettings);\n\t\t\t\t\n\t\t\t\tif (typeof console.log === 'function') {\n\t\t\t\t\tconsole.log(message, request);\n\t\t\t\t} else {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconsole.log( message + ' ' + JSON.stringify(request) );\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.log(message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Process the xhr objects send operation\n\t\tfunction _xhrSend(mockHandler, requestSettings, origSettings) {\n\n\t\t\t// This is a substitute for < 1.4 which lacks $.proxy\n\t\t\tvar process = (function(that) {\n\t\t\t\treturn function() {\n\t\t\t\t\treturn (function() {\n\t\t\t\t\t\t// The request has returned\n\t\t\t\t\t\tthis.status \t\t= mockHandler.status;\n\t\t\t\t\t\tthis.statusText\t\t= mockHandler.statusText;\n\t\t\t\t\t\tthis.readyState \t= 4;\n\n\t\t\t\t\t\t// We have an executable function, call it to give\n\t\t\t\t\t\t// the mock handler a chance to update it's data\n\t\t\t\t\t\tif ( $.isFunction(mockHandler.response) ) {\n\t\t\t\t\t\t\tmockHandler.response(origSettings);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Copy over our mock to our xhr object before passing control back to\n\t\t\t\t\t\t// jQuery's onreadystatechange callback\n\t\t\t\t\t\tif ( requestSettings.dataType == 'json' && ( typeof mockHandler.responseText == 'object' ) ) {\n\t\t\t\t\t\t\tthis.responseText = JSON.stringify(mockHandler.responseText);\n\t\t\t\t\t\t} else if ( requestSettings.dataType == 'xml' ) {\n\t\t\t\t\t\t\tif ( typeof mockHandler.responseXML == 'string' ) {\n\t\t\t\t\t\t\t\tthis.responseXML = parseXML(mockHandler.responseXML);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.responseXML = mockHandler.responseXML;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.responseText = mockHandler.responseText;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif( typeof mockHandler.status == 'number' || typeof mockHandler.status == 'string' ) {\n\t\t\t\t\t\t\tthis.status = mockHandler.status;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif( typeof mockHandler.statusText === \"string\") {\n\t\t\t\t\t\t\tthis.statusText = mockHandler.statusText;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// jQuery < 1.4 doesn't have onreadystate change for xhr\n\t\t\t\t\t\tif ( $.isFunction(this.onreadystatechange) ) {\n\t\t\t\t\t\t\tif( mockHandler.isTimeout) {\n\t\t\t\t\t\t\t\tthis.status = -1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.onreadystatechange( mockHandler.isTimeout ? 'timeout' : undefined );\n\t\t\t\t\t\t} else if ( mockHandler.isTimeout ) {\n\t\t\t\t\t\t\t// Fix for 1.3.2 timeout to keep success from firing.\n\t\t\t\t\t\t\tthis.status = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}).apply(that);\n\t\t\t\t};\n\t\t\t})(this);\n\n\t\t\tif ( mockHandler.proxy ) {\n\t\t\t\t// We're proxying this request and loading in an external file instead\n\t\t\t\t_ajax({\n\t\t\t\t\tglobal: false,\n\t\t\t\t\turl: mockHandler.proxy,\n\t\t\t\t\ttype: mockHandler.proxyType,\n\t\t\t\t\tdata: mockHandler.data,\n\t\t\t\t\tdataType: requestSettings.dataType === \"script\" ? \"text/plain\" : requestSettings.dataType,\n\t\t\t\t\tcomplete: function(xhr, txt) {\n\t\t\t\t\t\tmockHandler.responseXML = xhr.responseXML;\n\t\t\t\t\t\tmockHandler.responseText = xhr.responseText;\n\t\t\t\t\t\tmockHandler.status = xhr.status;\n\t\t\t\t\t\tmockHandler.statusText = xhr.statusText;\n\t\t\t\t\t\tthis.responseTimer = setTimeout(process, mockHandler.responseTime || 0);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// type == 'POST' || 'GET' || 'DELETE'\n\t\t\t\tif ( requestSettings.async === false ) {\n\t\t\t\t\t// TODO: Blocking delay\n\t\t\t\t\tprocess();\n\t\t\t\t} else {\n\t\t\t\t\tthis.responseTimer = setTimeout(process, mockHandler.responseTime || 50);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Construct a mocked XHR Object\n\t\tfunction xhr(mockHandler, requestSettings, origSettings, origHandler) {\n\t\t\t// Extend with our default mockjax settings\n\t\t\tmockHandler = $.extend(true, {}, $.mockjaxSettings, mockHandler);\n\n\t\t\tif (typeof mockHandler.headers === 'undefined') {\n\t\t\t\tmockHandler.headers = {};\n\t\t\t}\n\t\t\tif ( mockHandler.contentType ) {\n\t\t\t\tmockHandler.headers['content-type'] = mockHandler.contentType;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tstatus: mockHandler.status,\n\t\t\t\tstatusText: mockHandler.statusText,\n\t\t\t\treadyState: 1,\n\t\t\t\topen: function() { },\n\t\t\t\tsend: function() {\n\t\t\t\t\torigHandler.fired = true;\n\t\t\t\t\t_xhrSend.call(this, mockHandler, requestSettings, origSettings);\n\t\t\t\t},\n\t\t\t\tabort: function() {\n\t\t\t\t\tclearTimeout(this.responseTimer);\n\t\t\t\t},\n\t\t\t\tsetRequestHeader: function(header, value) {\n\t\t\t\t\tmockHandler.headers[header] = value;\n\t\t\t\t},\n\t\t\t\tgetResponseHeader: function(header) {\n\t\t\t\t\t// 'Last-modified', 'Etag', 'content-type' are all checked by jQuery\n\t\t\t\t\tif ( mockHandler.headers && mockHandler.headers[header] ) {\n\t\t\t\t\t\t// Return arbitrary headers\n\t\t\t\t\t\treturn mockHandler.headers[header];\n\t\t\t\t\t} else if ( header.toLowerCase() == 'last-modified' ) {\n\t\t\t\t\t\treturn mockHandler.lastModified || (new Date()).toString();\n\t\t\t\t\t} else if ( header.toLowerCase() == 'etag' ) {\n\t\t\t\t\t\treturn mockHandler.etag || '';\n\t\t\t\t\t} else if ( header.toLowerCase() == 'content-type' ) {\n\t\t\t\t\t\treturn mockHandler.contentType || 'text/plain';\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\tvar headers = '';\n\t\t\t\t\t$.each(mockHandler.headers, function(k, v) {\n\t\t\t\t\t\theaders += k + ': ' + v + \"\\n\";\n\t\t\t\t\t});\n\t\t\t\t\treturn headers;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// Process a JSONP mock request.\n\t\tfunction processJsonpMock( requestSettings, mockHandler, origSettings ) {\n\t\t\t// Handle JSONP Parameter Callbacks, we need to replicate some of the jQuery core here\n\t\t\t// because there isn't an easy hook for the cross domain script tag of jsonp\n\n\t\t\tprocessJsonpUrl( requestSettings );\n\n\t\t\trequestSettings.dataType = \"json\";\n\t\t\tif(requestSettings.data && CALLBACK_REGEX.test(requestSettings.data) || CALLBACK_REGEX.test(requestSettings.url)) {\n\t\t\t\tcreateJsonpCallback(requestSettings, mockHandler);\n\n\t\t\t\t// We need to make sure\n\t\t\t\t// that a JSONP style response is executed properly\n\n\t\t\t\tvar rurl = /^(\\w+:)?\\/\\/([^\\/?#]+)/,\n\t\t\t\t\tparts = rurl.exec( requestSettings.url ),\n\t\t\t\t\tremote = parts && (parts[1] && parts[1] !== location.protocol || parts[2] !== location.host);\n\n\t\t\t\trequestSettings.dataType = \"script\";\n\t\t\t\tif(requestSettings.type.toUpperCase() === \"GET\" && remote ) {\n\t\t\t\t\tvar newMockReturn = processJsonpRequest( requestSettings, mockHandler, origSettings );\n\n\t\t\t\t\t// Check if we are supposed to return a Deferred back to the mock call, or just \n\t\t\t\t\t// signal success\n\t\t\t\t\tif(newMockReturn) {\n\t\t\t\t\t\treturn newMockReturn;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\t// Append the required callback parameter to the end of the request URL, for a JSONP request\n\t\tfunction processJsonpUrl( requestSettings ) {\n\t\t\tif ( requestSettings.type.toUpperCase() === \"GET\" ) {\n\t\t\t\tif ( !CALLBACK_REGEX.test( requestSettings.url ) ) {\n\t\t\t\t\trequestSettings.url += (/\\?/.test( requestSettings.url ) ? \"&\" : \"?\") + \n\t\t\t\t\t\t(requestSettings.jsonp || \"callback\") + \"=?\";\n\t\t\t\t}\n\t\t\t} else if ( !requestSettings.data || !CALLBACK_REGEX.test(requestSettings.data) ) {\n\t\t\t\trequestSettings.data = (requestSettings.data ? requestSettings.data + \"&\" : \"\") + (requestSettings.jsonp || \"callback\") + \"=?\";\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Process a JSONP request by evaluating the mocked response text\n\t\tfunction processJsonpRequest( requestSettings, mockHandler, origSettings ) {\n\t\t\t// Synthesize the mock request for adding a script tag\n\t\t\tvar callbackContext = origSettings && origSettings.context || requestSettings,\n\t\t\t\tnewMock = null;\n\n\n\t\t\t// If the response handler on the moock is a function, call it\n\t\t\tif ( mockHandler.response && $.isFunction(mockHandler.response) ) {\n\t\t\t\tmockHandler.response(origSettings);\n\t\t\t} else {\n\n\t\t\t\t// Evaluate the responseText javascript in a global context\n\t\t\t\tif( typeof mockHandler.responseText === 'object' ) {\n\t\t\t\t\t$.globalEval( '(' + JSON.stringify( mockHandler.responseText ) + ')');\n\t\t\t\t} else {\n\t\t\t\t\t$.globalEval( '(' + mockHandler.responseText + ')');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Successful response\n\t\t\tjsonpSuccess( requestSettings, mockHandler );\n\t\t\tjsonpComplete( requestSettings, mockHandler );\n\n\t\t\t// If we are running under jQuery 1.5+, return a deferred object\n\t\t\tif($.Deferred){\n\t\t\t\tnewMock = new $.Deferred();\n\t\t\t\tif(typeof mockHandler.responseText == \"object\"){\n\t\t\t\t\tnewMock.resolveWith( callbackContext, [mockHandler.responseText] );\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tnewMock.resolveWith( callbackContext, [$.parseJSON( mockHandler.responseText )] );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn newMock;\n\t\t}\n\n\n\t\t// Create the required JSONP callback function for the request\n\t\tfunction createJsonpCallback( requestSettings, mockHandler ) {\n\t\t\tjsonp = requestSettings.jsonpCallback || (\"jsonp\" + jsc++);\n\n\t\t\t// Replace the =? sequence both in the query string and the data\n\t\t\tif ( requestSettings.data ) {\n\t\t\t\trequestSettings.data = (requestSettings.data + \"\").replace(CALLBACK_REGEX, \"=\" + jsonp + \"$1\");\n\t\t\t}\n\n\t\t\trequestSettings.url = requestSettings.url.replace(CALLBACK_REGEX, \"=\" + jsonp + \"$1\");\n\n\n\t\t\t// Handle JSONP-style loading\n\t\t\twindow[ jsonp ] = window[ jsonp ] || function( tmp ) {\n\t\t\t\tdata = tmp;\n\t\t\t\tjsonpSuccess( requestSettings, mockHandler );\n\t\t\t\tjsonpComplete( requestSettings, mockHandler );\n\t\t\t\t// Garbage collect\n\t\t\t\twindow[ jsonp ] = undefined;\n\n\t\t\t\ttry {\n\t\t\t\t\tdelete window[ jsonp ];\n\t\t\t\t} catch(e) {}\n\n\t\t\t\tif ( head ) {\n\t\t\t\t\thead.removeChild( script );\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// The JSONP request was successful\n\t\tfunction jsonpSuccess(requestSettings, mockHandler) {\n\t\t\t// If a local callback was specified, fire it and pass it the data\n\t\t\tif ( requestSettings.success ) {\n\t\t\t\trequestSettings.success.call( callbackContext, ( mockHandler.response ? mockHandler.response.toString() : mockHandler.responseText || ''), status, {} );\n\t\t\t}\n\n\t\t\t// Fire the global callback\n\t\t\tif ( requestSettings.global ) {\n\t\t\t\ttrigger(requestSettings, \"ajaxSuccess\", [{}, requestSettings] );\n\t\t\t}\n\t\t}\n\n\t\t// The JSONP request was completed\n\t\tfunction jsonpComplete(requestSettings, mockHandler) {\n\t\t\t// Process result\n\t\t\tif ( requestSettings.complete ) {\n\t\t\t\trequestSettings.complete.call( callbackContext, {} , status );\n\t\t\t}\n\n\t\t\t// The request was completed\n\t\t\tif ( requestSettings.global ) {\n\t\t\t\ttrigger( \"ajaxComplete\", [{}, requestSettings] );\n\t\t\t}\n\n\t\t\t// Handle the global AJAX counter\n\t\t\tif ( requestSettings.global && ! --$.active ) {\n\t\t\t\t$.event.trigger( \"ajaxStop\" );\n\t\t\t}\n\t\t}\n\n\n\t\t// The core $.ajax replacement.  \n\t\tfunction handleAjax( url, origSettings ) {\n\t\t\tvar mockRequest, requestSettings, mockHandler;\n\n\t\t\t// If url is an object, simulate pre-1.5 signature\n\t\t\tif ( typeof url === \"object\" ) {\n\t\t\t\torigSettings = url;\n\t\t\t\turl = undefined;\n\t\t\t} else {\n\t\t\t\t// work around to support 1.5 signature\n\t\t\t\torigSettings.url = url;\n\t\t\t}\n\t\t\t\n\t\t\t// Extend the original settings for the request\n\t\t\trequestSettings = $.extend(true, {}, $.ajaxSettings, origSettings);\n\n\t\t\t// Iterate over our mock handlers (in registration order) until we find\n\t\t\t// one that is willing to intercept the request\n\t\t\tfor(var k = 0; k < mockHandlers.length; k++) {\n\t\t\t\tif ( !mockHandlers[k] ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tmockHandler = getMockForRequest( mockHandlers[k], requestSettings );\n\t\t\t\tif(!mockHandler) {\n\t\t\t\t\t// No valid mock found for this request\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Handle console logging\n\t\t\t\tlogMock( mockHandler, requestSettings );\n\n\n\t\t\t\tif ( requestSettings.dataType === \"jsonp\" ) {\n\t\t\t\t\tif ((mockRequest = processJsonpMock( requestSettings, mockHandler, origSettings ))) {\n\t\t\t\t\t\t// This mock will handle the JSONP request\n\t\t\t\t\t\treturn mockRequest;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\t// Removed to fix #54 - keep the mocking data object intact\n\t\t\t\t//mockHandler.data = requestSettings.data;\n\n\t\t\t\tmockHandler.cache = requestSettings.cache;\n\t\t\t\tmockHandler.timeout = requestSettings.timeout;\n\t\t\t\tmockHandler.global = requestSettings.global;\n\n\t\t  copyUrlParameters(mockHandler, origSettings);\n\n\t\t\t\t(function(mockHandler, requestSettings, origSettings, origHandler) {\n\t\t\t\t\tmockRequest = _ajax.call($, $.extend(true, {}, origSettings, {\n\t\t\t\t\t\t// Mock the XHR object\n\t\t\t\t\t\txhr: function() { return xhr( mockHandler, requestSettings, origSettings, origHandler ) }\n\t\t\t\t\t}));\n\t\t\t\t})(mockHandler, requestSettings, origSettings, mockHandlers[k]);\n\n\t\t\t\treturn mockRequest;\n\t\t\t}\n\n\t\t\t// We don't have a mock request, trigger a normal request\n\t\t\treturn _ajax.apply($, [origSettings]);\n\t\t}\n\n\t\t/**\n\t\t* Copies URL parameter values if they were captured by a regular expression\n\t\t* @param {Object} mockHandler\n\t\t* @param {Object} origSettings\n\t\t*/\n\t\tfunction copyUrlParameters(mockHandler, origSettings) {\n\t\t\t//parameters aren't captured if the URL isn't a RegExp\n\t\t\tif (!mockHandler.url instanceof RegExp) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//if no URL params were defined on the handler, don't attempt a capture\n\t\t\tif (!mockHandler.hasOwnProperty('urlParams')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar captures = mockHandler.url.exec(origSettings.url);\n\t\t\t//the whole RegExp match is always the first value in the capture results\n\t\t\tif (captures.length === 1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcaptures.shift();\n\t\t\t//use handler params as keys and capture resuts as values\n\t\t\tvar i = 0,\n\t\t\tcapturesLength = captures.length,\n\t\t\tparamsLength = mockHandler.urlParams.length,\n\t\t\t//in case the number of params specified is less than actual captures\n\t\t\tmaxIterations = Math.min(capturesLength, paramsLength),\n\t\t\tparamValues = {};\n\t\t\tfor (i; i < maxIterations; i++) {\n\t\t\t\tvar key = mockHandler.urlParams[i];\n\t\t\t\tparamValues[key] = captures[i];\n\t\t\t}\n\t\t\torigSettings.urlParams = paramValues;\n\t\t}\n\n\n\t\t// Public\n\n\t\t$.extend({\n\t\t\tajax: handleAjax\n\t\t});\n\n\t\t$.mockjaxSettings = {\n\t\t\t//url:        null,\n\t\t\t//type:       'GET',\n\t\t\tlog:          function( msg ) {\n\t\t\t\tif (window['console'] && window.console.log) {\n\t\t\t\t\tvar log = Function.prototype.bind.call(console.log, console);\n\t\t\t\t\tlog.apply(console, arguments);\n\t\t\t\t}\n\t\t\t},\n\t\t\tstatus:       200,\n\t\t\tstatusText:   \"OK\",\n\t\t\tresponseTime: 500,\n\t\t\tisTimeout:    false,\n\t\t\tcontentType:  'text/plain',\n\t\t\tresponse:     '',\n\t\t\tresponseText: '',\n\t\t\tresponseXML:  '',\n\t\t\tproxy:        '',\n\t\t\tproxyType:    'GET',\n\n\t\t\tlastModified: null,\n\t\t\tetag:         '',\n\t\t\theaders: {\n\t\t\t\tetag: 'IJF@H#@923uf8023hFO@I#H#',\n\t\t\t\t'content-type' : 'text/plain'\n\t\t\t}\n\t\t};\n\n\t\t$.mockjax = function(settings) {\n\t\t\tvar i = mockHandlers.length;\n\t\t\tmockHandlers[i] = settings;\n\t\t\treturn i;\n\t\t};\n\t\t$.mockjaxClear = function(i) {\n\t\t\tif ( arguments.length == 1 ) {\n\t\t\t\tmockHandlers[i] = null;\n\t\t\t} else {\n\t\t\t\tmockHandlers = [];\n\t\t\t}\n\t\t};\n\t\t$.mockjax.handler = function(i) {\n\t\t  if ( arguments.length == 1 ) {\n\t\t\t\treturn mockHandlers[i];\n\t\t\t}\n\t\t};\n\t})(window.jQuery);\n});\n","/*global define, require, doT*/\n/**\n * Services Module\n * Abastracts the API and facilitates the connectivity\n * and multi async communications (using promises)\n * The API is defined at: http://goo.gl/Vr8A1\n */\ndefine('app/network/Services',['./urlsMap',\n\t\t'../storage/Storage', \n\t\t'app/utils/Modal',\n\t\t'lib/jquery/mockjax'\n\t],\n\tfunction(\n\t\turls,\n\t\tStorage,\n\t\tModal\n\t){\n\tvar DEBUG_MODE = !!$(document.body).attr('data-debug'),\n\t\t_factoryCacheObj = {},\n\t\tready = !DEBUG_MODE,\n\t\tqueuedDebugQueries = [],\n\t\tappVersion = {},\n\t\t// global ajax promise for projects\n\t\tprojectsSearching,\n\t\tisIE = /*@cc_on!@*/false || testCSS('msTransform'),\n\t\troot = DEBUG_MODE ? '' : window.location.protocol+'//'+window.location.host\n\t\t// root = 'http://172.16.78.69:29579'\n\t\n\twindow.appVersion = {Name: 'Mapa Regalias', Version: '0.3.2'};\n\n\t//console.info(window.appVersion)\n\n\tif(DEBUG_MODE){\n\n\t\t//For testing purposes ;)\n\t\t//Filtros de bsqueda\n\t\trequire(['app/network/debugQueries'], function(){\n\t\t\tready = true\n\t\t\tif(queuedDebugQueries.length){\n\t\t\t\tfor(var i=0; i< queuedDebugQueries.length; i++){\n\t\t\t\t\tvar promise = _get(queuedDebugQueries[i].url, queuedDebugQueries[i].data, queuedDebugQueries[i].callback, queuedDebugQueries[i].errorCb)\n\t\t\t\t\tif(queuedDebugQueries[i].cb)\n\t\t\t\t\t\tpromise.done(queuedDebugQueries[i].cb)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\n\tfunction testCSS(prop) {\n\t\treturn prop in document.documentElement.style;\n\t}\n\n\n\t/**\n\t * Proxy function for easy comms\n\t * @param  {String}\t\turl\n\t * @param  {Object}\t\tdata\n\t * @param  {Function}\tcallback\n\t * @param  {Function}\terrorCb\n\t * @return {jQuery.ajax}\n\t */\n\tfunction _get(url, data, callback, errorCb){\n\t\terrorCb = errorCb || defaultErrorCb\n\t\t\n\t\t// if( typeof data == 'string' && !DEBUG_MODE) data = encodeURIComponent( data )\n\t\t//console.log('Ready---->', ready)\n\t\t\n\t\t//\n\t\tif(ready){\n\t\t\t//console.log('URL Request---> ', root+url)\n\n\t\t\tvar request = $.ajax({\n\t\t\t\t\turl: root + url,\n\t\t\t\t\tdata: data,\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tcache: _factoryCache(\n\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t//jQuery deffer success and error filters\n\t\t\trequest.pipe(\n\t\t\t\t\tfunction(response, status){\n\t\t\t\t\t\tvar modal\n\t\t\t\t\t\t// console.log( response, status )\n\t\t\t\t\t\tif(!response.status && status != 'abort'){\n\t\t\t\t\t\t\tmodal = Modal.error(response.message)\n\t\t\t\t\t\t\tmodal.show()\n\t\t\t\t\t\t\tif('console' in window){\n\t\t\t\t\t\t\t\t//window.console.log(response.message)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else if(status != 'abort' && ('console' in window)){\n\t\t\t\t\t\t\t//window.console.log('Harmless Warning: Request Aborted')\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(response.status && response.message){\n\t\t\t\t\t\t\t\tmodal = Modal.info(response.message)\n\t\t\t\t\t\t\t\tmodal.show()\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn response.status\n\t\t\t\t\t},\n\t\t\t\t\tfunction(response, status){\n\t\t\t\t\t\tvar modal\n\t\t\t\t\t\tif(!response.status && status != 'abort'){\n\t\t\t\t\t\t\tif('console' in window){\n\t\t\t\t\t\t\t\t//window.console.log(response.message)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else if(status != 'abort' && ('console' in window)){\n\t\t\t\t\t\t\t//window.console.log('Harmless Warning: Request Aborted')\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(response.message && status != 'abort'){\n\t\t\t\t\t\t\tvar modal = Modal.error(response.message)\n\t\t\t\t\t\t\tmodal.show()\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn !response.status\n\t\t\t\t\t}\n\t\t\t\t)\n\n\t\t\trequest.fail(errorCb)\n\t\t\t\t.error(errorCb)\n\n\t\t\tif(callback) request.done(callback)\n\n\t\t\treturn request\n\t\t}else{\n\t\t\tqueuedDebugQueries.push({\n\t\t\t\turl: url,\n\t\t\t\tdata: data,\n\t\t\t\tcallback: callback,\n\t\t\t\terrorCb: errorCb,\n\t\t\t\tdone: function(callback){\n\t\t\t\t\tthis.cb = this.cb || []\n\t\t\t\t\tthis.cb.push(callback)\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn queuedDebugQueries[queuedDebugQueries.length-1]\n\t\t}\n\n\t\t\n\t}\n\n\tfunction _factoryCache(url, data){\n\t\t//Warning: IE7- has no JSON Object defined\n\t\tvar key = url + '::' + JSON.stringify(data)\n\t\t\n\t\tif(_factoryCacheObj[key]){\n\t\t\treturn true\n\t\t}\n\t\t\t\n\t\t_factoryCacheObj[key] = true\n\t\treturn false\n\t}\n\n\tfunction defaultErrorCb(){\n\t\t//TODO error handling\n\t}\n\n\t$(document).on('click', '.submenu a', function(e){\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\n\t\tvar thishref = $(this).attr('href'),\n\t\t\tdataValue = $(this).attr('data-value')\n\n\t\twindow.location.href = thishref\n\n\t\t$('.map-container').attr('data-option-subtipo', 'fiscalizacion-option-subtipo-'+dataValue)\n\n\t\t$('.buttons-filter-fiscalization a[data-value=\"'+dataValue+'\"]').trigger('click')\n\n\t})\n\n\t$(document).on('click', '.buttons-filter-fiscalization a', function(e){\n\t\te.preventDefault()\n\t\tvar $this = $(this),\n\t\t\tdataValue = $this.attr('data-value'),\n\t\t\t$searchCampo = $('.filter-group[data-parameter=campoProyectoFiscalizacion] .filter-list input[type=\"text\"]'),\n\t\t\t$buttonCampo = $('.filter-group[data-parameter=campoProyectoFiscalizacion] .filter-list .filter button'),\n\t\t\t$optionSelected = $('.filter-group[data-parameter=campoProyectoFiscalizacion] .filter-list .options .option.selected'),\n\t\t\tdataTextFilter = $this.attr('data-text-filter');\n\n\t\t$('.buttons-filter-fiscalization a').removeClass('active')\n\t\t$this.addClass('active')\n\n\t\t\n\t\t$('.filter-group[data-parameter=campoProyectoFiscalizacion] .txt').text(dataTextFilter)\n\n\n\t\tif($searchCampo.val() != \"\"){\n\t\t\t//$searchCampo.val('')\n\t\t\t$optionSelected.trigger('click')\n\t\t}\n\n\t\t$('.filter-group[data-parameter=tipoRecursoNaturalFiscalizacion] .option[data-value=\"'+dataValue+'\"]').trigger('click')\n\n\t\t\n\t})\n\n\t/*$(document).on('click', '.submenu li a', function(e){\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\t\t\n\t\t$('#header .menu-item-fiscalizacion').trigger('click')\n\t\t$('.filter-group[data-parameter=\"tipoRecursoNaturalFiscalizacion\"] .option[data-value=\"-1\"]').trigger('click')\n\t\t$('#header .menu-item-fiscalizacion').trigger('click')\n\n\t})*/\n\n\n\n\t//////////////////////////////////////////////////////////////////\n\t// POLYGONS SERVICES\n\t//////////////////////////////////////////////////////////////////\n\t/**\n\t * Le history:\n\t * La idea es mantener el cache de los polgonos del localstorage,\n\t * entonces la jugada es simplemente:\n\t *\t1. sacar\n\t *\t\t1.1 si no hay, pedir al servidor\n\t *\t\t\t1.1.1 guardar respuesta en localstorage\n\t *\t\t1.2 si hay, pedir al servidor con la fecha\n\t *\t\t\t1.2.1 si viene vaco, responder con LS\n\t *\t\t\t1.2.2 si no viene vaco, guardar respuesta en LS y responder\n\t */\n\n\t/**\n\t * Makes the request and handle the\n\t * @param  {String}   type        whether is departments,regions,municipalities\n\t * @param  {Function} callback\n\t * @param  {Number}   lastUpdated the last date of modification\n\t */\n\tfunction polygonsRequester(type, callback, polygonsData){\n\t\tvar data = polygonsData && polygonsData.lastUpdated ?\n\t\t\t{lastUpdated: polygonsData.lastUpdated} : {}\n\n\t\t//console.log(urls[type])\n\t\t_get(urls[type], data, function(responseJSON){\n\t\t\tif( responseJSON.geojson &&\n\t\t\t\tresponseJSON.geojson.features /*&&\n\t\t\t\tresponseJSON.geojson.features.length*/ ){\n\t\t\t\ttry{\n\t\t\t\t\tif(!isIE){\n\t\t\t\t\t\tStorage.storeDataList(responseJSON)\n\t\t\t\t\t\tcallback(Storage.getDataList(type))\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcallback(responseJSON.geojson)\n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tif('console' in window){\n\t\t\t\t\t\t//window.console.log('Harmless Warning: Quota Exceded!')\n\t\t\t\t\t\t//window.console.log('Harmless Warning: Quota exceded storing: ' + responseJSON )\n\t\t\t\t\t}\n\t\t\t\t\tif('localStorage' in window)\n\t\t\t\t\t\twindow.localStorage.clear()\n\t\t\t\t\tcallback(responseJSON.geojson)\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tcallback(polygonsData)\n\t\t\t}\n\t\t})\n\t\t\t\t// callback(polygonsData)\n\t}\n\n\t/**\n\t * Interface for common actions to handling the data request\n\t *\n\t * @param  {String}   type     flag for data type\n\t * @param  {Function} callback\n\t */\n\tfunction loadInterface(type, callback){\n\t\tvar polygonsData = Storage.getDataList(type)\n\t\tif(!polygonsData.features.length){\n\t\t\tpolygonsRequester(type, callback)\n\t\t}else{\n\t\t\tpolygonsRequester(type, callback, polygonsData)\n\t\t}\n\t}\n\n\t/**\n\t * Loads the departments polygons data\n\t *\n\t * @param  {Function} callback [description]\n\t */\n\tfunction loadDepartments(callback){\n\t\tloadInterface('departments', callback)\n\t}\n\n\t/**\n\t * Loads the regions polygons data\n\t *\n\t * @param  {Function} callback [description]\n\t */\n\tfunction loadRegions(callback){\n\t\tloadInterface('regions', callback)\n\t}\n\n\t/**\n\t * Loads the municipalities polygons data\n\t *\n\t * @param  {Function} callback [description]\n\t */\n\tfunction loadMunicipalities(callback){\n\t\tloadInterface('municipalities', callback)\n\t}\n\n\tfunction loadProjectFilters(){\n\t\treturn _get(urls.filtersProjects)\n\t}\n\n\tfunction search( type, query, options ){\n\t\tvar json\n\t\toptions = options || {}\n\t\t//console.warn(type, query, options)\n\t\tif( type === 'Proyectos' ){\n\t\t\tif( options.isList ){\n\t\t\t\treturn _get(urls['searchProjectsList'], query );\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn _get(urls['searchProjects'], query );\n\t\t\t}\n\t\t}else if( type === 'Recursos' ){\n\t\t\tif( options.pushpins ){\n\t\t\t\treturn _get(urls['infoboxesResources'], query );\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn _get(urls['searchResources'], query );\n\t\t\t}\n\t\t}else if( type === 'Produccion' ){\n\t\t\tif( options.pushpins ){\n\t\t\t\treturn _get(urls['infoboxesProduction'], query );\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn _get(urls['searchProduction'], query );\n\t\t\t}\n\t\t}else if( type === 'Fiscalizacion' ){\n\t\t\tif( options.pushpins ){\n\t\t\t\treturn _get(urls['infoboxesFiscalizacion'], query );\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn _get(urls['searchFiscalizacion'], query );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction searchText( key ){\n\t\treturn _get(urls.texts, {id: key})\n\t}\n\n\tfunction getConsolidated(paramsString){\n\t\treturn _get(urls.consolidated, paramsString)\n\t}\n\n\tfunction getBudgetList(params){\n\t\treturn _get(urls.getBudget, params)\n\t}\n\tfunction getDistributionList(params){\n\t\treturn _get(urls.getDistribution, params)\n\t}\n\tfunction getOutlayList(params){\n\t\treturn _get(urls.getOutlay, params)\n\t}\n\tfunction getAprovedList(params){\n\t\treturn _get(urls.getAprovedProyects, params)\n\t}\n\tfunction getExecutedList(params){\n\t\treturn _get(urls.getExecuted, params)\n\t}\n\tfunction getRegaliasList(params){\n\t\treturn _get(urls.getRegalias, params)\n\t}\n\tfunction getValueAproved(params){\n\t\treturn _get(urls.getValueAproved, params)\n\t}\n\tfunction getPerformance(params){\n\t\treturn _get(urls.getPerformance, params)\n\t}\n\n\tfunction getConsolidatedResources(paramsString){\n\t\treturn _get(urls.consolidatedResources, paramsString)\n\t}\n\n\tfunction getConsolidatedProduction(paramsString){\n\t\treturn _get(urls.consolidatedProduction, paramsString)\n\t}\n\n\tfunction getConsolidatedFiscalizacion(paramsString){\n\t\treturn _get(urls.consolidatedFiscalizacion, paramsString)\n\t}\n\n\tfunction getProductionInfo(paramsString){\n\t\treturn _get(urls.getProductionInfo, paramsString)\n\t}\n\tfunction getFieldInfo(url, paramsString){\n\t\treturn _get(url, paramsString)\n\t}\n\n\tfunction getProjectList(url){\n\t\tvar split = url.split('?')\n\t\treturn _get(split[0], split[1])\n\t}\n\n\tfunction sendByEmail( params ){\n\t\treturn _get(urls.sendByEmail, params)\n\t}\n\n\n\treturn {\n\t\tpolygons: {\n\t\t\tgetDepartments: loadDepartments,\n\t\t\tgetRegions: loadRegions,\n\t\t\tgetMunicipalities: loadMunicipalities\n\t\t},\n\t\t\n\t\tfilters: {\n\t\t\tforProjects: loadProjectFilters\n\t\t},\n\n\t\tsearch: search,\n\n\t\tresources: {\n\t\t\tpresupuesto: getBudgetList,\n\t\t\tdistribuido: getDistributionList,\n\t\t\tgiros: getOutlayList,\n\t\t\taprobado: getAprovedList,\n\t\t\tejecutado: getExecutedList,\n\t\t\tregalias: getRegaliasList,\n\t\t\tvalorAprobado: getValueAproved,\n\t\t\trendimiento: getPerformance\n\t\t},\n\n\t\tproduction: {\n\t\t\tproductionInfo: getProductionInfo,\n\t\t\tfieldInfo: getFieldInfo,\n\t\t\taproved: getAprovedList\n\t\t},\n\n\t\tinfograph: {\n\t\t\tconsolidated: getConsolidated,\n\t\t\tresources: getConsolidatedResources,\n\t\t\tproduction: getConsolidatedProduction,\n\t\t\tfiscalizacion: getConsolidatedFiscalizacion\n\t\t},\n\n\t\tprojectsList: getProjectList,\n\n\t\tsendByEmail: sendByEmail,\n\n\t\ttexts: searchText\n\t}\n});\n","define('app/controller/appStates',[],function(){\n\treturn [\n\t\t'Comunes',\n\t\t'Proyectos',\n\t\t'Recursos',\n\t\t'Produccion',\n\t\t'Fiscalizacion'\n\t]\n});\n","/*global define, Class, Router, doT, Microsoft*/\n/**\n * App State\n * This Class handles all the state syncronization between\n * all the entities of the application, and the services\n * negotiation\n */\ndefine('app/controller/AppState',[\n\t'lib/mvc/Observable',\n\t'app/network/Services',\n\t// Available application states\n\t'./appStates',\n\t'app/utils/Modal'\n\t], function(\n\t\tObservable,\n\t\tServices,\n\t\tappStates,\n\t\tModal\n\t){\n\n\tvar filtersCleared = false,\n\t\tignoreHash = false,\n\t\t// , historyPush = !!(window.history && window.history.pushState),\n\t\tinfoTemplate = doT.compile('<div class=\"info\"><h1>Informacin</h1><p>{{=it.message}}</p>'+\n\t\t\t'<div class=\"txt-right\"><a class=\"button close\">Cerrar</a></div></div>'),\n\t\t// This is for the selection of a territory\n\t\t// Bing Animation is not cancelable so I had to set this\n\t\t// ugly flag\n\t\tignoreNextFilter = false,\n\t\tskipNextZoom,\n\t\tskipNextCorners,\n\t\t// Another ugly flag to ignore url overwriting when setting filter\n\t\tresentlyChangedState,\n\t\tlastRequestedQuery,\n\t\tfiltersSettedByString = false,\n\t\tignoreWeAreReseting = false,\n\t\tDEBUG_MODE = !!$(document.body).attr('data-debug')\n\n\t// UPDATE URL\n\t// PARSE URL\n\t// NOTIFY\n\n\n\t/**\n\t * Returns the state from a hash\n\t * @param  {String} hash from history\n\t * @return {Atring}      valid state\n\t */\n\tfunction getStateForHash( hash ){\n\t\tvar i = appStates.length,\n\t\t\tkey,\n\t\t\tindex\n\t\tfor(; i--;){\n\t\t\tkey = appStates[i]\n\t\t\tindex = hash.indexOf( key.toLowerCase() )\n\t\t\tif( index == 2 ){\n\t\t\t\treturn key\n\t\t\t}\n\t\t}\n\n\t\treturn ''//appStates[0]\n\t}\n\t\n\n\tfunction areNotSameCorners( corners, corners2 ){\n\t\tif( corners === null && corners2 !== null ||\n\t\t\tcorners2 === null && corners !== null ){\n\t\t\treturn true\n\t\t}\n\t\treturn !( corners[0][0] == corners2 [0][0] &&\n\t\t\t\tcorners[0][1] == corners2 [0][1] &&\n\t\t\t\tcorners[1][0] == corners2 [1][0] &&\n\t\t\t\tcorners[1][1] == corners2 [1][1] )\n\t}\n\n\n\t$('#share p').on('click', function(){\n\t\t///hideShow()\n\t\t$('#share .container-share').add($(this)).toggleClass('show')\n\t})\n\n\tvar AppState = new Class( Observable, {\n\t\t// Request params\n\t\tzoom: 6, // 1,..,n\n\t\tcorners: [[12.907166580077373,-90.494580078125],[4.336511704028766,-64.852490234375]], // [[4.667292,-74.059508], [4.667292,-74.059508]]\n\t\tcenter: [4.3344012216447965, -77.76142578125],\n\t\tdefaultCenter: [4.3344012216447965, -77.76142578125],\n\t\tfilters: null, //\"departamento=1,2&estado=1\"\n\t\tquery: '',\n\t\t// Whether the request is directed to the list mode\n\t\tisListMode: null,\n\t\t// Request flags\n\t\ttimeout: null,\n\t\tfirstTime: true,\n\t\tcachedRequest: null,\n\t\tcachedRequest2: null,\n\t\tcachedCorners: null,\n\t\tstate: '',\n\t\tdefaultState: '',\n\t\t//-----------------------------------\n\t\t// TODO ALL LOGIC\n\t\t//-----------------------------------\n\t\tlastHash: '',\n\n\t\tinitialize: function(){\n\t\t\tvar router = new Router(),\n\t\t\t\tself = this,\n\t\t\t\t// hash = window.location.hash,\n\t\t\t\tlambda = function() {}\n\n\t\t\t// router.historyList = []\n\n\n\t\t\t\n\t\t\tif(!location.hash) location.hash = '#/'\n\n\t\t\trouter.configure({\n\t\t\t\t// Detects all history changes\n\t\t\t\t// and decides what to do\n\t\t\t\ton: function on(){\n\t\t\t\t\t// console.log( 'herreee+++++++++++++++++++++++++' )\n\t\t\t\t\t// Ignores the first call\n\t\t\t\t\tif(self.firstTime){\n\t\t\t\t\t\tself.firstTime = false\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\t// If the location is different is\n\t\t\t\t\t// because it was fired by history\n\t\t\t\t\t// and needs to be interpreted into filters\n\t\t\t\t\tif( self.lastRequestedUrl !== location.hash ){\n\t\t\t\t\t\tself.parseUrl()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\n\t\t\trouter.on(/\\/(proyectos|recursos|produccion|fiscalizacion|(\\?.+)?)/, function(){\n\t\t\t\tif(location.hash.match(/\\?.+/)){\n\t\t\t\t}else{\n\t\t\t\t\tself.setListMode( false, false, false )\n\t\t\t\t\tself.ignoreWeAreReseting()\n\t\t\t\t}\n\n\t\t\t\t// self.fireEvent('redraw-all')\n\t\t\t\t// self.state = ''\n\t\t\t\t// self.fireEvent('filter-reseted')\n\t\t\t})\n\n\t\t\t//debugger;\n\n\t\t\trouter.on(/proyectos.*/, lambda)\n\t\t\trouter.on(/recursos.*/, lambda)\n\t\t\t// if( DEBUG_MODE ) \n\t\t\trouter.on(/produccion.*/, lambda)\n\t\t\trouter.on(/fiscalizacion.*/, lambda)\n\t\t\t// else router.on(/produccion.*/, function(){\n\t\t\t// \tif( history in window) history.back()\n\t\t\t// \telse window.location.hash = '/proyectos'\n\t\t\t// \tvar modal = new Modal(infoTemplate({ message:\n\t\t\t// \t\t\t'Esta funcionalidad se encuentra en construccin <br /><br />'\n\t\t\t// \t\t}))\n\t\t\t// \tmodal.show()\n\t\t\t// })\n\n\t\t\tthis.on('state-change', updateStateMode)\n\n\t\t\tfunction updateStateMode( state ){\n\t\t\t\tvar $stateName = $('#state-name'),\n\t\t\t\t\tname = state\n\t\t\t\tif( state == 'Fiscalizacion' ){\n\t\t\t\t\tname = 'Fiscalizacin'\n\t\t\t\t}else if( state == 'Produccion' ){\n\t\t\t\t\tname = 'Produccin'\n\t\t\t\t}\n\t\t\t\tif( state ){\n\t\t\t\t\t// quitar landing mode\n\t\t\t\t\t$('.map-container').removeClass('home-mode')\n\t\t\t\t\t$stateName\n\t\t\t\t\t\t.text( name )\n\t\t\t\t\t\t.next()\n\t\t\t\t\t\t.text($stateName.attr('data-tooltip-' +\n\t\t\t\t\t\t\tstate.toLowerCase()))\n\t\t\t\t\t\t.parent().show()\n\n\t\t\t\t}else{\n\t\t\t\t\t// agregar landing mode\n\t\t\t\t\t$stateName.parent().hide()\n\t\t\t\t\t$('.map-container').addClass('home-mode')\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.state = getStateForHash( location.hash )\n\t\t\tupdateStateMode( this.state )\n\n\t\t\trouter.init()\n\t\t\t// console.log('after')\n\n\t\t},\n\n\t\tignoreWeAreReseting: function(){\n\t\t\tignoreWeAreReseting = true\n\t\t\tsetTimeout(function(){\n\t\t\t\tignoreWeAreReseting = false\n\t\t\t}, 1500)\n\t\t},\n\n\t\tparseUrl: function( event ){\n\t\t\tvar params,\n\t\t\t\tparamName,\n\t\t\t\tvalue,\n\t\t\t\tzoomValue,\n\t\t\t\ttl, br,\n\t\t\t\ttlArr, brArr,\n\t\t\t\tzoomChanged,\n\t\t\t\tcornersChanged,\n\t\t\t\tnewState = getStateForHash( location.hash ),\n\t\t\t\tview = {},\n\t\t\t\tappStateView = {},\n\t\t\t\tisGroup = false,\n\t\t\t\tisList = false,\n\t\t\t\tcenter = this.center\n\n\t\t\t\n\t\t\t// Read the url for params\n\t\t\tparams = location.hash.match(/\\?.+/)\n\t\t\tthis.lastRequestedUrl = location.hash\n\n\t\t\tif( event == 'filtersLoaded' && !newState && !location.hash.match(/\\?.+/) ) return\n\n\t\t\tif( !filtersSettedByString ) this.fireEvent('filter-reseted', true, true)\n\t\t\tif( params ){\n\t\t\t\tparams = params[0].substr(1).split('&')\n\t\t\t\tparams = typeof params == 'string' ? [params] : params\n\t\t\t\t// console.log('params...'+location.hash)\n\t\t\t\tfor(var i=0, pair; i<params.length; i++){\n\t\t\t\t\tpair = params[i].split('=')\n\t\t\t\t\tparamName = pair[0]\n\t\t\t\t\tvalue = pair[1]\n\t\t\t\t\t// console.log(paramName)\n\t\t\t\t\t// console.log(value)\n\t\t\t\t\t// console.log(filtersSettedByString)\n\t\t\t\t\t// urlObj[paramName] = value\n\t\t\t\t\tif(paramName == 'zoom'){\n\t\t\t\t\t\tzoomValue = value\n\t\t\t\t\t}else if(paramName == 'center'){\n\t\t\t\t\t\tcenter = value.split(',')\n\t\t\t\t\t\ttlArr = params[i+1].split('=')[1].split(',')\n\t\t\t\t\t\tbrArr = params[i+2].split('=')[1].split(',')\n\t\t\t\t\t\ttl = new Microsoft.Maps.Location(\n\t\t\t\t\t\t\ttlArr[0],\n\t\t\t\t\t\t\ttlArr[1]),\n\t\t\t\t\t\tbr = new Microsoft.Maps.Location(\n\t\t\t\t\t\t\tbrArr[0],\n\t\t\t\t\t\t\tbrArr[1])\n\t\t\t\t\t\ti+=2\n\t\t\t\t\t}else if(paramName == 'topLeft'){\n\t\t\t\t\t\t// I suppose it will always come in this order\n\t\t\t\t\t\ttlArr = value.split(',')\n\t\t\t\t\t\tbrArr = params[i+1].split('=')[1].split(',')\n\t\t\t\t\t\ttl = new Microsoft.Maps.Location(\n\t\t\t\t\t\t\ttlArr[0],\n\t\t\t\t\t\t\ttlArr[1]),\n\t\t\t\t\t\tbr = new Microsoft.Maps.Location(\n\t\t\t\t\t\t\tbrArr[0],\n\t\t\t\t\t\t\tbrArr[1])\n\t\t\t\t\t\t//Captured the next, so go on\n\t\t\t\t\t\ti++\n\t\t\t\t\t}else if( paramName == 'listMode' ){\n\t\t\t\t\t\tisList = true\n\t\t\t\t\t}else if( paramName == 'isGroup' ){\n\t\t\t\t\t\tisGroup = true\n\t\t\t\t\t}\n\t\t\t\t\telse if( value && !filtersSettedByString ){\n\t\t\t\t\t\tthis.fireEvent('filter-activated', paramName, value.split(','))\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.setListMode( isList, isGroup, false )\n\t\t\t\tfiltersSettedByString = false\n\n\t\t\t\t// console.log(JSON.stringify(center), JSON.stringify(this.center))\n\t\t\t\t// Override filters localization and use the parameters values\n\t\t\t\tzoomChanged = ( this.zoom != zoomValue )\n\t\t\t\tcornersChanged = ( center[0] != this.center[0] || center[1] != this.center[1] ) ||\n\t\t\t\t\ttlArr && brArr && areNotSameCorners( this.corners, [ tlArr, brArr ] )\n\n\t\t\t\tif( zoomChanged ){\n\t\t\t\t\tview.zoom = appStateView.zoom = zoomValue\n\t\t\t\t}\n\t\t\t\tif( cornersChanged ){\n\t\t\t\t\tif( center !== this.center ){\n\t\t\t\t\t\tthis.center = view.center = center\n\t\t\t\t\t\tappStateView.center = center\n\t\t\t\t\t}else{\n\t\t\t\t\t\tview.leftTop = tl\n\t\t\t\t\t\tview.rightBottom = br\n\t\t\t\t\t\tappStateView.corners = [ tlArr, brArr ]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// console.log(view.zoom, appStateView.zoom, zoomChanged, this.zoom, zoomValue)\n\t\t\t\tif( zoomChanged || cornersChanged ){\n\t\t\t\t\tthis.setZoomAndCorners( appStateView, { noNotify: true } )\n\t\t\t\t\t// Group list view is in one point\n\t\t\t\t\t// console.log('--->',view.zoom, appStateView.zoom)\n\t\t\t\t\tif( br != tl ) this.fireEvent('map-changed', view, true)\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tthis.fireEvent('filter-reseted')\n\t\t\t}\n\t\t\t// console.log('parseURL ')\n\t\t\t// console.log('this.state '+this.state)\n\t\t\t// console.log('newState '+newState)\n\t\t\t// State changed?\n\t\t\tif( this.state != newState ){\n\t\t\t\tthis.state = newState\n\n\n\t\t\t\tthis.fireEvent('state-change', newState, location.hash,\n\t\t\t\t\tlocation.hash.replace(/^[^\\?]+\\?/, '') )\n\n\t\t\t}else{\n\t\t\t\tthis.fireEvent('params-change', newState, location.hash,\n\t\t\t\t\tlocation.hash.replace(/^[^\\?]+\\?/, '') )\n\t\t\t}\n\t\t\tthis.updateQueryByURL()\n\t\t},\n\n\t\tgetState: function(){\n\t\t\treturn {\n\t\t\t\tstate: this.state,\n\t\t\t\thash: this.hash,\n\t\t\t\tparams: this.params\n\t\t\t}\n\n\t\t},\n\n\t\tgetStateArray: function(){\n\t\t\treturn [\n\t\t\t\tthis.state,\n\t\t\t\tthis.hash,\n\t\t\t\tthis.params\n\t\t\t]\n\t\t},\n\n\t\tsetZoomAndCorners: function( view, options ){\n\t\t\toptions = options || {}\n\n\t\t\t// this.setListMode( false )\n\t\t\tignoreNextFilter = false\n\n\t\t\t// console.log(JSON.stringify(view))\n\t\t\t// There is no difference to the present state?\n\t\t\tif( ( view.zoom && this.zoom == view.zoom ) &&\n\t\t\t\t( view.corners && !areNotSameCorners(this.corners, view.corners) ) ){\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\n\t\t\tif( view.zoom ) this.zoom = view.zoom\n\t\t\t\n\t\t\t// console.log(this.zoom, view.zoom)\n\n\t\t\t//CORNERS\n\n\t\t\tthis.center = view.center;\n\t\t\tif( options.isGroupList ){\n\t\t\t\tthis.center[0] = view.center[0] //|| this.defaultCenter\n\t\t\t\tthis.center[1] = view.center[1] //|| this.defaultCenter\n\t\t\t\tthis.corners = view.corners || this.defaultCorners\n\t\t\t\tthis.page = 1\n\t\t\t\tthis.setListMode( true, options.isGroupList )\n\n\t\t\t}else{\n\t\t\t\tthis.center[0] = view.center[0] //|| this.defaultCenter\n\t\t\t\tthis.center[1] = view.center[1] //|| this.defaultCenter\n\t\t\t\tthis.cachedCorners = view.corners\n\t\t\t\tthis.corners = view.corners || this.defaultCorners\n\t\t\t\tthis.setListMode( this.isListMode, options.isGroupList )\n\t\t\t}\n\t\t\t// console.log(view.center[0], view.center[1],'==', this.center[0], this.center[1])\n\t\t\t// console.log('------------------------')\n\n\t\t\tif( !options.noNotify )\tthis.updateURLTimed()\n\n\t\t\tthis.activateStateProyects()\n\t\t},\n\n\t\tsetDefaultCorners: function( corners ){\n\t\t\tthis.corners = this.defaultCorners = corners\n\t\t},\n\n\t\tsetFiltersString: function( filters ){\n\t\t\t//console.log('FILTERS STRING ======> '+ ignoreNextFilter)\n\t\t\tthis.filters = filters\n\t\t\tthis.setListMode( this.isListMode )\n\n\t\t\tfiltersSettedByString = true\n\n\t\t\tif(!ignoreNextFilter){\n\t\t\t\tthis.updateURLTimed()\n\t\t\t\t//console.log(filters)\n\t\t\t}\n\t\t},\n\n\t\tignoreNextFilterSelection: function(){\n\t\t\tignoreNextFilter = true\n\t\t},\n\n\t\tactivateStateProyects: function(){\n\t\t\tif(!this.state && !ignoreWeAreReseting){\n\t\t\t\tthis.state = 'Proyectos'\n\t\t\t\tthis.fireEvent('state-change', this.state, location.hash,\n\t\t\t\t\tlocation.hash.replace(/^[^\\?]+\\?/, '') )\n\t\t\t\tthis.updateURLTimed()\n\t\t\t}\n\n\t\t},\n\n\t\tsetQuery: function( query ){\n\t\t\t//console.log('QUERY '+query)\n\t\t\tthis.query = query || ''\n\t\t\t// this.setListMode( false )\n\n\t\t\tif(!ignoreNextFilter){\n\t\t\t\tthis.updateURLTimed()\n\t\t\t}\n\t\t},\n\n\t\tsetPage: function( page ){\n\t\t\t//console.log('PAGE '+page)\n\t\t\tthis.page = page\n\t\t\tthis.updateURLTimed()\n\t\t},\n\n\t\tupdateQueryByURL: function(){\n\t\t\tvar query = location.hash.replace(/^[^\\?]+\\??/,''),\n\t\t\t\treq\n\t\t\t// console.log('>>>>>>>>>>>>>>>>>>>>>>')\n\t\t\t// If not query\n\t\t\tif( !query ){\n\t\t\t\tquery = 'zoom=6' +\n\t\t\t\t\t\t'&center=' + this.center[0] + ',' + this.center[1]\n\t\t\t\t\t\t'&topLeft=' + this.defaultCorners[0].join(',') +\n\t\t\t\t\t\t'&bottomRight=' + this.defaultCorners[1].join(',')\n\t\t\t\tthis.corners = this.defaultCorners\n\t\t\t\tthis.zoom = 6\n\t\t\t}else{\n\t\t\t\tif( lastRequestedQuery == this.state + query ) return\n\t\t\t}\n\n\t\t\tlastRequestedQuery = this.state + query\n\t\t\t// console.log('requesting with '+this.state, this.isListMode)\n\t\t\tif( !this.isListMode || !this.state ){\n\t\t\t\t// Check if there is a running ajax anc cancel it\n\t\t\t\tif( this.cachedRequest && this.cachedRequest.readystate != 4){\n\t\t\t\t\tif( this.cachedRequest.abort ) this.cachedRequest.abort()\n\t\t\t\t\t//Notify the Map to remove one loading\n\t\t\t\t\tthis.fireEvent('load-projects-aborded', query)\n\t\t\t\t}\n\t\t\t\t// Check if there is a running ajax anc cancel it\n\t\t\t\tif( this.cachedRequest2 && this.cachedRequest2.readystate != 4){\n\t\t\t\t\tif( this.cachedRequest2.abort ) this.cachedRequest2.abort()\n\t\t\t\t\t//Notify the Map to remove one loading\n\t\t\t\t\tthis.fireEvent('load-projects-aborded', query)\n\t\t\t\t}\n\n\t\t\t\tthis.cachedRequest = Services.search( this.state || 'Proyectos', query )\n\t\t\t\t\n\t\t\t\tif( this.state !== 'Recursos' &&\n\t\t\t\t\tthis.state !== 'Produccion' &&\n\t\t\t\t\tthis.state !== 'Fiscalizacion' &&\n\t\t\t\t\tthis.cachedRequest ){\n\t\t\t\t\tthis.cachedRequest.done(this.projectsLoaded.bind(this))\n\t\t\t\t}else if( this.state == 'Recursos' ){\n\t\t\t\t\tthis.cachedRequest2 = Services.search( this.state, query, {pushpins: true} )\n\t\t\t\t\t$.when(this.cachedRequest2, this.cachedRequest)\n\t\t\t\t\t\t\t.done(this.resourcesLoaded.bind(this))\n\t\t\t\t}else if( this.state == 'Produccion' ){\n\t\t\t\t\tthis.cachedRequest2 = Services.search( this.state, query, {pushpins: true} )\n\t\t\t\t\t$.when(this.cachedRequest2, this.cachedRequest)\n\t\t\t\t\t\t\t.done(this.productionLoaded.bind(this))\n\t\t\t\t}else if( this.state == 'Fiscalizacion' ){\n\t\t\t\t\tthis.cachedRequest2 = Services.search( this.state, query, {pushpins: true} )\n\t\t\t\t\t$.when(this.cachedRequest2, this.cachedRequest)\n\t\t\t\t\t\t\t.done(this.fiscalizacionLoaded.bind(this))\n\t\t\t\t}\n\n\t\t\t\tthis.fireEvent('loading-projects', query)\n\t\t\t\t//console.log('FIREEEEEEEE '+ query)\n\t\t\t\t// this.filtersChanged( query )\n\t\t\t}else{\n\t\t\t\treq = Services.search( this.state, query, {isList: true} )\n\t\t\t\tthis.fireEvent('loading-projects-list', query)\n\t\t\t\tif( req ){\n\t\t\t\t\treq.done(this.projectsListLoaded.bind(this))\n\t\t\t\t\t\t//console.log('FIREEEEEEEE '+ query)\n\t\t\t\t\t// this.filtersChanged( query )\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t},\n\n\t\tupdateURLTimed: function(){\n\t\t\t//console.log('TIMED ')\n\t\t\tclearTimeout(this.timeout)\n\t\t\tthis.timeout = setTimeout(this.updateURL.bind(this), 100)\n\t\t},\n\n\t\tupdateURL: function(){\n\t\t\tvar query = '',\n\t\t\t\tposibleHash\n\n\t\t\t//debugger;\n\n\t\t\t// console.log('=======================================')\n\t\t\tif( this.firstTime ){\n\t\t\t\tthis.firstTime = false\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif( this.query){\n\t\t\t\tquery += 'query=' + this.query\n\t\t\t}\n\t\t\tif( this.page){\n\t\t\t\tquery += '&page=' + this.page\n\t\t\t}\n\t\t\tif( this.zoom /*&& !this.isListMode && this.corners*/ ){\n\t\t\t\tquery += '&zoom=' + this.zoom\n\t\t\t}\n\t\t\t// console.log(JSON.stringify(this.center))\n\t\t\tif( this.center ){\n\t\t\t\tquery += '&center=' + this.center[0] + ',' + this.center[1]\n\t\t\t}\n\t\t\tif( this.corners /*&& (!this.isListMode || this.isListMode.isGroup)*/ ){\n\t\t\t\tquery += '&topLeft=' + this.corners[0][0] + ',' + this.corners[0][1]\n\t\t\t\tquery += '&bottomRight=' + this.corners[1][0] + ',' + this.corners[1][1]\n\t\t\t}\n\t\t\tif( this.filters ){\n\t\t\t\tquery += '&' + this.filters\n\t\t\t}\n\t\t\tif( this.isListMode ){\n\t\t\t\tquery += '&listMode=true'\n\t\t\t\tif( this.isListMode.isGroup ){\n\t\t\t\t\tquery += '&isGroup=true'\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tquery = query.replace(/(?:^&)|(?:&$)/g,'')\n\n\t\t\t//console.log(this.lastQuery)\n\t\t\t//console.log(query)\n\t\t\t// //console.log(window.location)\n\n\t\t\tposibleHash = '#/' + this.state.toLowerCase() + '/?' + query\n\n\t\t\tif( !this.state ){\n\t\t\t\tposibleHash = '#/?' + query\n\t\t\t}\n\t\t\t// console.log('======================================='+this.lastQuery)\n\t\t\t// console.log('======================================='+posibleHash)\n\t\t\tif( this.lastQuery && ( this.lastQuery === posibleHash )/* || !this.state*/ ){\n\t\t\t\treturn\n\t\t\t}\n\t\t\t// console.log('=======================================PAST')\n\t\t\tthis.lastQuery =  posibleHash\n\n\t\t\tlocation.hash = posibleHash\n\t\t},\n\n\t\tprojectsLoaded: function( data ){\n\t\t\tthis.fireEvent('projects-loaded', data)\n\t\t},\n\n\t\tresourcesLoaded: function( data, data2 ){\n\t\t\tif( data2 instanceof Array ){\n\t\t\t\tdata = data[0]\n\t\t\t\tdata2 = data2[0]\n\t\t\t\tthis.fireEvent('resources-loaded', data, data2)\n\t\t\t}else{\n\t\t\t\tthis.fireEvent('resources-loaded', data)\n\t\t\t}\n\t\t},\n\n\t\tproductionLoaded: function( data, data2 ){\n\t\t\tif( data2 instanceof Array ){\n\t\t\t\tdata = data[0]\n\t\t\t\tdata2 = data2[0]\n\t\t\t\tthis.fireEvent('production-loaded', data, data2)\n\t\t\t}else{\n\t\t\t\tthis.fireEvent('production-loaded', data)\n\t\t\t}\n\t\t},\n\n\t\tfiscalizacionLoaded: function( data, data2 ){\n\n\t\t\t//debugger;\n\n\t\t\tif( data2 instanceof Array ){\n\t\t\t\tdata = data[0]\n\t\t\t\tdata2 = data2[0]\n\t\t\t\tthis.fireEvent('fiscalization-loaded', data, data2)\n\t\t\t}else{\n\t\t\t\tthis.fireEvent('fiscalization-loaded', data)\n\t\t\t}\n\n\n\t\t},\n\n\t\tprojectsListLoaded: function( data ){\n\t\t\tthis.fireEvent('projects-list-loaded', data)\n\t\t},\n\n\t\tsetListMode: function( bool, groupException, noForce ){\n\t\t\tif( bool && $('#controls').css('left') != 0 ){\n\t\t\t\t$('#controls')\n\t\t\t\t\t.addClass('list-mode')\n\t\t\t\t\t.animate({ marginLeft: 0, left: 0 })\n\t\t\t\tthis.fireEvent('view-group-change', bool)\n\t\t\t}\n\n\t\t\tif( bool === !!this.isListMode ) return\n\n\t\t\tif( !bool ){\n\t\t\t\tthis.isListMode = null\n\t\t\t\t$('#projects-list-view').hide()\n\t\t\t\t$('#map-view').show()\n\t\t\t\t$('#controls').removeClass('list-mode')\n\t\t\t\t// this.center = this.cachedCenter || this.defaultCenter\n\t\t\t\tthis.corners = this.cachedCorners || this.defaultCorners\n\t\t\t\t// if( !this.getState().state ){\n\t\t\t\t// \tthis.fireEvent('filter-reseted')\n\t\t\t\t// \tthis.fireEvent('redraw-all')\n\t\t\t\t// } \n\t\t\t}else{\n\t\t\t\tif( groupException ){\n\t\t\t\t\tthis.isListMode = { isGroup: true }\n\t\t\t\t}else{\n\t\t\t\t\tthis.isListMode = {}\n\t\t\t\t}\n\t\t\t\t$('#map-view').hide()\n\t\t\t\t$('#projects-list-view').show()\n\t\t\t\t// $('#controls')\n\t\t\t\t// \t.addClass('list-mode')\n\t\t\t\t// \t.animate({ marginLeft: 0, left: 0 })\n\t\t\t}\n\n\n\t\t\tif( !noForce ){\n\t\t\t\tthis.updateURLTimed( groupException )\n\t\t\t}\n\t\t}\n\t})\n\n\treturn new AppState()\n});\n","/*global define*/\ndefine('app/utils/territories',[],function(){\n\tvar territories = {\n\t\tdepartamento: {},\n\t\tregion: {},\n\t\tmunicipio: {}\n\t}\n\n\treturn territories\n});\n","/*global define, doT, Microsoft, Event*/\ndefine('app/map/Infobox',['app/network/Services',\n\t\t'app/utils/territories'\n\t\t],\n\t\tfunction(Services, territoriesCache){\n\t\n\t// Tooltip templates\n\tvar ttTempl = {\n\t\t\tinfo: doT.compile($('#template-infobox-info')[0].innerHTML),\n\t\t\tproject: doT.compile($('#template-infobox-project')[0].innerHTML),\n\t\t\tgroup: doT.compile($('#template-infobox-group')[0].innerHTML),\n\t\t\tresource: doT.compile($('#template-infobox-resource')[0].innerHTML),\n\t\t\tproduction: doT.compile($('#template-infobox-production')[0].innerHTML),\n\t\t\tfiscalization: doT.compile($('#template-infobox-fiscalization')[0].innerHTML)\n\t\t}, lastMousePoint,\n\t\t// isIE8 = jQuery.browser.msie && jQuery.browser.version.match(/^8/),\n\t\tisIE9 = jQuery.browser.msie && jQuery.browser.version.match(/^9/),\n\t\tisIE10 = jQuery.browser.msie && jQuery.browser.version.match(/^10/),\n\t\tdesCache = {},\n\t\tmapElem = $('#map-div'),\n\t\tmapWidth = mapElem[0].offsetWidth,\n\t\tmapHeight = mapElem[0].offsetHeight,\n\t\tmapTop = mapElem.offset().top\n\n\t//console.log('dot fis', fiscalization)\n\n\t$(window).on('resize', function(){\n\t\tmapWidth = mapElem[0].offsetWidth\n\t\tmapTop = mapElem.offset().top\n\t})\n\n\tfunction mouseDownHandler( evt ) {\n\t\tlastMousePoint = new Microsoft.Maps.Point(evt.getX(), evt.getY());\n\t}\n\n\tfunction pluralize( type ){\n\t\tif( type.indexOf('region') != -1 ) return 'regions'\n\t\telse if( type.indexOf('depart') != -1 ) return 'departments'\n\t\telse if( type.indexOf('municip') != -1 ) return 'municipalities'\n\t\treturn type\n\t}\n\n\tfunction Infobox(type, map, entity, content){\n\t\tthis._type = type\n\t\tthis._map = map\n\t\tthis._entity = entity\n\t\tthis.name = content.name\n\n\t\t//debugger;\n\n\t\tif( !this.name ){\n\t\t\tif( territoriesCache[content.type] && territoriesCache[content.type][content.id]){\n\t\t\t\tthis.name = territoriesCache[content.type][content.id].name\n\t\t\t}\n\t\t}\n\n\t\t\n\t\tcontent.name = this.name\n\t\tthis._content = $.extend(null, content)\n\n\t\tMicrosoft.Maps.Events.addThrottledHandler(entity._polygon || entity, 'click', this.clickHandler.bind(this), 200)\n\t\t// Microsoft.Maps.Events.addThrottledHandler(entity._polygon || entity, 'touchend', this.clickHandler.bind(this), 200)\n\t\t// Microsoft.Maps.Events.addThrottledHandler(entity._polygon || entity, 'touchstart', this.clickHandler.bind(this), 200)\n\t\t// Microsoft.Maps.Events.addThrottledHandler(entity._polygon || entity, 'tap', this.clickHandler.bind(this), 200)\n\t\tMicrosoft.Maps.Events.addHandler(map, 'mousedown', mouseDownHandler);\n\t\tMicrosoft.Maps.Events.addHandler(map, 'viewchange', this.hide.bind(this))\n\n\n\t\tif( content.image ){\n\t\t\tdocument.createElement('img').src = content.image\n\t\t}\n\t}\n\n\tfunction isGoingToExceedWidth(left, width, margin){\n\t\tmargin = margin || 15\n\t\treturn (left + width + margin) > mapWidth\n\t}\n\n\tfunction isGoingToExceedHeight(top, height, margin){\n\t\tmargin = margin || -20\n\t\t// To not allow invisible parts\n\t\tif( top - height < mapTop ) return false\n\t\treturn (top + height + margin) > (mapHeight + mapTop)\n\t}\n\n\tInfobox.prototype.show = function(e){\n\t\t// TODO no agregar el infobox por defecto\n\t\t// es no agregar los infobox sino hasta\n\t\t// mostrarlos\n\t\tvar menuHeight = $('#header')[0].offsetHeight,\n\t\t\tlocation,\n\t\t\tpinLocation,\n\t\t\tdeltaYResource = 0,\n\t\t\tdeltaXResourceRight = 0,\n\t\t\tdeltaYResourceBottom = 0,\n\t\t\tdeltaXResourceLeft = 0\n\n\t\tif(this._map.visibleInfobox) this._map.visibleInfobox.hide()\n\n\t\tthis.createElement()\n\t\tthis._elem.appendTo(document.body)\n\n\t\t//debugger;\n\t\t\n\t\tif( !this._content.isResource &&\n\t\t\t!this._content.isProduction &&\n\t\t\t!this._content.isFiscalization &&\n\t\t\tthis._type !== 'project' ){\n\t\t\tthis._elem.find('.button').on('click', this.viewMoreHandler.bind(this))\n\t\t}\n\t\tthis._elem.find('.help').on('click', this.viewHelpHandler.bind(this))\n\t\tthis._elem.find('.close-help').on('click', this.hideHelpHandler.bind(this))\n\t\t\n\t\t//----------------------------------------\n\t\t// Polygons Infoboxes\n\t\t//----------------------------------------\n\n\n\n\t\tif( this._type == 'info' ||\n\t\t\t(this._type == 'resource' && !this._entity.getLocation) ||\n\t\t\t(this._type == 'production' && !this._entity.getLocation) ||\n\t\t\t(this._type == 'fiscalization' && !this._entity.getLocation) ){\n\t\t\tif(typeof e.pageX != 'number' || isNaN(e.pageX)){\n\t\t\t\te.pageX = e.originalEvent.x\n\t\t\t\te.pageY = e.originalEvent.y\n\t\t\t}\n\t\t\tif(isIE10 || isIE9){\n\t\t\t\te.pageY = e.pageY + window.pageYOffset\n\t\t\t}\n\n\t\t\t//debugger;\n\n\t\t\tthis._elem.css({\n\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t// left: pinLocation.x,\n\t\t\t\t\t// top: pinLocation.y\n\t\t\t\t\tleft: e.pageX,\n\t\t\t\t\ttop: e.pageY\n\t\t\t\t})\n\t\t\t\t.removeClass('to-the-left')\n\t\t\t\t.removeClass('to-the-top')\n\t\t\t\t.addClass('polygon-type')\n\t\t\t\n\t\t\tif( isGoingToExceedWidth( e.pageX, this._elem[0].offsetWidth ) ){\n\t\t\t\tthis._elem.css({\n\t\t\t\t\tleft: e.pageX - this._elem[0].offsetWidth\n\t\t\t\t}).addClass('to-the-left to-the-left-2')\n\t\t\t}\n\t\t\tif( isGoingToExceedHeight( e.pageY, this._elem[0].offsetHeight ) ){\n\t\t\t\t\tthis._elem.css({\n\t\t\t\t\t\ttop: e.pageY - this._elem[0].offsetHeight\n\t\t\t\t\t}).addClass('to-the-top to-the-top-2')\n\t\t\t}\n\t\t}\n\t\t//----------------------------------------\n\t\t// Pushpins of Projects, Resources and Fiscalization\n\t\t//----------------------------------------\n\t\telse if(this._type == 'project' ||\n\t\t\t(this._type == 'resource' && this._entity.getLocation) ||\n\t\t\t(this._type == 'production' && this._entity.getLocation) ||\n\t\t\t(this._type == 'fiscalization' && this._entity.getLocation)){\n\t\t\tlocation = this._entity.getLocation(),\n\t\t\tpinLocation = this._map.tryLocationToPixel(location, Microsoft.Maps.PixelReference.control)\n\n\t\t\tif( this._type == 'resource' ){\n\t\t\t\tdeltaYResource = 60\n\t\t\t\tdeltaYResourceBottom = 35\n\t\t\t\tdeltaXResourceRight = 0\n\t\t\t\tdeltaXResourceLeft = 5\n\t\t\t}\n\n\t\t\t\n\n\t\t\tthis._elem.css({\n\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\tleft: pinLocation.x + deltaXResourceLeft + this._entity.radius,\n\t\t\t\t\ttop: pinLocation.y + this._entity.radius\n\t\t\t\t})\n\t\t\t\t.removeClass('to-the-left')\n\t\t\t\t.removeClass('to-the-top')\n\n\t\t\tif( isGoingToExceedWidth( pinLocation.x + this._entity.radius, this._elem[0].offsetWidth ) ){\n\t\t\t\tthis._elem.css({\n\t\t\t\t\tleft: pinLocation.x - this._elem[0].offsetWidth - this._entity.radius\n\t\t\t\t}).addClass('to-the-left')\n\t\t\t}\n\t\t\tif( isGoingToExceedHeight( pinLocation.y, this._elem[0].offsetHeight, 40 ) ){\n\t\t\t\tthis._elem.css({\n\t\t\t\t\ttop: pinLocation.y - this._elem[0].offsetHeight\n\t\t\t\t}).addClass('to-the-top')\n\t\t\t}\n\t\t\t// if(window.outerWidth - pinLocation.x - this._elem[0].offsetWidth < 0){\n\t\t\t// }\n\t\t\t// if(window.outerHeight - pinLocation.y - this._elem[0].offsetHeight + menuHeight < 0){\n\t\t\t// }\n\t\t}\n\t\t//----------------------------------------\n\t\t// Pushpins of Groups\n\t\t//----------------------------------------\n\t\telse if(this._type == 'group'){\n\t\t\tlocation = this._entity.getLocation(),\n\t\t\tpinLocation = this._map.tryLocationToPixel(location, Microsoft.Maps.PixelReference.control)\n\n\t\t\tthis._elem.css({\n\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\tleft: pinLocation.x + this._entity.radius,\n\t\t\t\t\ttop: pinLocation.y\n\t\t\t\t})\n\t\t\t\t.removeClass('to-the-left')\n\t\t\t\t.removeClass('to-the-top')\n\t\t\t// if(window.outerWidth - pinLocation.x - this._elem[0].offsetWidth < 0){\n\t\t\tif( isGoingToExceedWidth( pinLocation.x + this._entity.radius, this._elem[0].offsetWidth ) ){\n\t\t\t\tthis._elem.css({\n\t\t\t\t\tleft: pinLocation.x - this._elem[0].offsetWidth - this._entity.radius\n\t\t\t\t}).addClass('to-the-left')\n\t\t\t}\n\t\t\t// if(window.outerHeight - pinLocation.y - this._elem[0].offsetHeight + menuHeight < 0){\n\t\t\t// \t\tthis._elem.css({\n\t\t\t// \t\t\ttop: pinLocation.y - this._elem[0].offsetHeight + this._entity.radius\n\t\t\t// \t\t}).addClass('to-the-top')\n\t\t\t// }\n\t\t}\n\t\t\n\t\t//debugger;\n\n\t\tthis._map.visibleInfobox = this\n\t\tthis.visible = true\n\n\n\t\tif(e instanceof Event){\n\t\t\tif(e.stopPropagation){\n\t\t\t\te.stopPropagation()\n\t\t\t}else{\n\t\t\t\twindow.event.cancelBubble = true\n\t\t\t}\n\t\t}\n\t}\n\n\tInfobox.prototype.hide = function(){\n\t\tif( this._elem && this.visible ){\n\t\t\tthis._elem.css({display: 'none'})\n\t\t\tthis.visible = false\n\t\t\tthis._elem.remove()\n\t\t}\n\t}\n\n\n\tInfobox.prototype.clickHandler = function( evt ){\n\t\tvar point = new Microsoft.Maps.Point(evt.getX(), evt.getY()),\n\t\t\tdist = Math.sqrt(Math.pow(point.x-lastMousePoint.x,2), Math.pow(point.y-lastMousePoint.y,2))\n\n\t\tif(dist > 5) {\n\t\t\treturn;\n\t\t}\n\t\tthis.toggle(evt)\n\n\t\tif(evt instanceof Event){\n\t\t\tif(evt.stopPropagation){\n\t\t\t\tevt.stopPropagation()\n\t\t\t}else{\n\t\t\t\twindow.event.cancelBubble = true\n\t\t\t}\n\t\t}\n\t}\n\n\tInfobox.prototype.viewMoreHandler = function( evt ){\n\t\tif( this._type == 'group' ){\n\t\t\tthis._entity.viewGroupList({\n\t\t\t\tlatitude: this._content.latitude,\n\t\t\t\tlongitude: this._content.longitude\n\t\t\t})\n\t\t\tthis.hide()\n\t\t}else{\n\t\t\tif(this._entity.panIntoView){\n\t\t\t\tevt = evt.originalEvent\n\t\t\t\tthis._entity.panIntoView()\n\t\t\t\tif (evt.preventDefault) {\n\t\t\t\t\tevt.preventDefault()\n\t\t\t\t} else {\n\t\t\t\t\tevt.returnValue = false\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this._entity.select){\n\t\t\t\tthis._entity.select()\n\t\t\t}\n\t\t}\n\t\treturn false\n\t}\n\n\tInfobox.prototype.viewHelpHandler = function(evt){\n\t\tvar helpCont = this._elem.find('.help-container'),\n\t\t\tthat = $(evt.target),\n\t\t\tword = that.attr('data-type'),\n\t\t\tname = that.attr('data-name'),\n\t\t\twCont = helpCont.find('.word'),\n\t\t\tdCont = helpCont.find('.description'),\n\t\t\tclose = helpCont.find('.close-help'),\n\t\t\tself = this,\n\t\t\tbothWidth = 450\n\n\t\tif( wCont.html() ===  name && helpCont.is(':visible') ){\n\t\t\tthis.hideHelpHandler()\n\t\t\treturn false\n\t\t}\n\n\t\tfunction updateContent(){\n\t\t\twCont.html( name )\n\t\t\tif( self._elem.offset().left + bothWidth - $(window).width() > 0 ){\n\t\t\t\thelpCont.addClass('to-the-left')\n\t\t\t}else{\n\t\t\t\thelpCont.removeClass('to-the-left')\n\t\t\t}\n\t\t\tif( desCache[ word ] ){\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tdCont.html( desCache[ word ] )\n\t\t\t\t\thelpCont\n\t\t\t\t\t\t.css({\n\t\t\t\t\t\t\t// width: 'auto',\n\t\t\t\t\t\t\theight: 'auto'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.find('.inner').css({\n\t\t\t\t\t\t\tposition: 'static'\n\t\t\t\t\t\t})\n\t\t\t\t\thelpCont\n\t\t\t\t\t\t.css({\n\t\t\t\t\t\t\twidth: helpCont.width(),\n\t\t\t\t\t\t\theight: helpCont.height()\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.find('.inner').css({\n\t\t\t\t\t\t\tposition: 'absolute'\n\t\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tdCont.html( 'cargando...' )\n\t\t\t\tServices.texts( word ).done(function( data ){\n\t\t\t\t\tdesCache[ word ] = data.TextoParametrico\n\t\t\t\t\tdCont.html( data.TextoParametrico )\n\t\t\t\t\thelpCont\n\t\t\t\t\t\t.css({\n\t\t\t\t\t\t\t// width: 'auto',\n\t\t\t\t\t\t\theight: 'auto'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.find('.inner').css({\n\t\t\t\t\t\t\tposition: 'static'\n\t\t\t\t\t\t})\n\t\t\t\t\thelpCont\n\t\t\t\t\t\t.css({\n\t\t\t\t\t\t\twidth: helpCont.width(),\n\t\t\t\t\t\t\theight: helpCont.height()\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.find('.inner').css({\n\t\t\t\t\t\t\tposition: 'absolute'\n\t\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\t\t\thelpCont.css({\n\t\t\t\t\twidth: helpCont.width(),\n\t\t\t\t\theight: helpCont.height()\n\t\t\t\t})\n\t\t\t\t.find('.inner').css({\n\t\t\t\t\tposition: 'absolute'\n\t\t\t\t})\n\t\t\thelpCont.animate({width: 'show'})\n\t\t\tclose.delay(600).fadeIn()\n\t\t}\n\t\tif( helpCont.is(':visible') ){\n\t\t\tthis.hideHelpHandler( updateContent )\n\t\t}else{\n\t\t\tupdateContent()\n\t\t}\n\n\t\treturn false\n\t}\n\n\tInfobox.prototype.hideHelpHandler = function( callback ){\n\t\tvar helpCont = this._elem.find('.help-container'),\n\t\t\tclose = helpCont.find('.close-help'),\n\t\t\tpromise\n\t\t\n\t\tclose.fadeOut(200)\n\t\tpromise = helpCont.animate({width: 'hide'}).promise()\n\t\tif( typeof callback == 'function' ){\n\t\t\tpromise.then( callback )\n\t\t}\n\t}\n\n\tInfobox.prototype.toggle = function(e){\n\t\tif(this.visible) this.hide(e)\n\t\telse this.show(e)\n\t}\n\n\tInfobox.prototype.updateContent = function(content, type){\n\t\tthis._type = type || this._type\n\t\tcontent.name = this.name\n\t\tthis._content = $.extend(null, content)\n\t\tif( this._elem ) this.hide()\n\t}\n\n\tInfobox.prototype.createElement = function(){\n\t\tvar //type = \"fiscalization\",\n\t\t\ttype = this._type,\n\t\t\tcontent = this._content,\n\t\t\thtmlContent = ttTempl[type] ?\n\t\t\t\tttTempl[type](content) :\n\t\t\t\tcontent,\n\t\t\ttempElem = document.createElement('div')\n\n\t\t\n\t\t//console.log('this--------------------->', htmlContent, this._type)\n\n\n\t\ttempElem.innerHTML = htmlContent\n\t\tthis._elem = tempElem.children[0]\n\t\tthis._elem.style.display = 'none'\n\t\tthis._elem = $(this._elem)\n\t}\n\n\n\treturn Infobox\n\n});\n","/*global Microsoft, define, Class*/\ndefine('app/map/Polygon',['lib/mvc/Observable', './Infobox'], function(Observable, Infobox){\n\t\n\t/**\n\t * Polygon Class\n\t *\n\t * @param  {Microsoft.Maps.Map}\tmap parent map\n\t * @param  {Object}\t \t\t\tconfig\n\t * @param  {Boolean} \t\t\tisLight is a light representaion of coords\n\t * @param  {String}  \t\t\tid\n\t * @param  {String}  \t\t\ttype    of polygon: municipalities, dep...\n\t */\n\tvar Polygon = new Class( Observable, {\n\t\t\n\t\tinitialize: function( map, config, isLight, id, type ){\n\t\t\tvar // default colors\n\t\t\t\tdefaultFillColor = rgbaToMSColor('rgba('+Polygon.baseRGB+',0.55)'),\n\t\t\t\tdefaultStrokeColor = rgbaToMSColor('rgba('+Polygon.strokeRGB+',1)'),\n\t\t\t\t// color loading\n\t\t\t\tstrokeThickness = config.strokeThickness || 1,\n\t\t\t\tlocations = [],\n\t\t\t\t// Bing Polygon Options\n\t\t\t\toptions\n\n\t\t\tthis._highlightColor = rgbaToMSColor('rgba('+Polygon.baseRGB+',0)')\n\t\t\tthis._fillColor = config.fillColor ?\n\t\t\t\t\trgbaToMSColor(config.fillColor) :\n\t\t\t\t\tdefaultFillColor,\n\t\t\tthis._strokeColor = config.strokeColor ?\n\t\t\t\t\trgbaToMSColor(config.strokeColor) :\n\t\t\t\t\tdefaultStrokeColor\n\n\n\t\t\toptions = {\n\t\t\t\tfillColor: this._fillColor,\n\t\t\t\tstrokeColor: this._strokeColor,\n\t\t\t\tstrokeThickness: strokeThickness\n\t\t\t}\n\n\n\t\t\tif( type != 'municipalities' ){\n\t\t\t\t//debugger;\n\t\t\t\tlocations = this.generatePolygon( config.coords, isLight )\n\t\t\t}else{\n\t\t\t\tthis.coords = config.coords\n\t\t\t\tthis.isLight = isLight\n\t\t\t}\n\n\n\t\t\tthis._polygon = new Microsoft.Maps.Polygon(\n\t\t\t\t\tlocations,\n\t\t\t\t\toptions\n\t\t\t\t)\n\n\t\t\tthis._polygon.Polygon = this\n\n\t\t\tMicrosoft.Maps.Events.addHandler(this._polygon, 'mouseover', this.highlightPolygon.bind(this))\n\t\t\tMicrosoft.Maps.Events.addHandler(this._polygon, 'mouseout', this.restorePolygon.bind(this))\n\t\t\t// Microsoft.Maps.Events.addHandler(this._polygon, 'dblclick', this.panIntoView.bind(this))\n\n\t\t\tthis.config = config\n\t\t\tthis.id = id\n\t\t\tthis.type = type\n\t\t\tthis._map = map\n\n\t\t\t//debugger;\n\t\t\tthis.createInfobox()\n\t\t},\n\n\t\tgeneratePolygon: function(coords, isLight){\n\t\t\tvar joinedCoordinates,\n\t\t\t\tsetLocations = ( typeof coords == 'undefined' )\n\t\t\t\n\t\t\tif( this.generated ) return;\n\n\t\t\tcoords = coords || this.coords\n\t\t\tisLight = isLight || this.isLight\n\n\t\t\tjoinedCoordinates = joinCoordinates(coords, isLight)\n\t\t\t\t\n\t\t\t// Extreme left top coordinate\n\t\t\tthis._leftTopPoint = joinedCoordinates.leftTopPoint\n\t\t\t// Extreme right bottom coordinate\n\t\t\tthis._rightBottomPoint = joinedCoordinates.rightBottomPoint\n\t\t\t\n\t\t\t// Fix to place the polygon always away from the filters box\n\t\t\t// (x0,y0)(x1,y1) -> (x0,y0-(y1-y0)/2)(x1,y1)\n\t\t\tthis._leftTopPoint = [\n\t\t\t\tthis._leftTopPoint[0]/* - (this._rightBottomPoint[0] - this._leftTopPoint[0]) / 2*/,\n\t\t\t\tthis._leftTopPoint[1]/* - (this._rightBottomPoint[1] - this._leftTopPoint[1]) / 2*/\n\t\t\t]\n\n\t\t\tthis._center = new Microsoft.Maps.Location(\n\t\t\t\t( this._leftTopPoint[0] + this._rightBottomPoint[0] ) / 2,\n\t\t\t\t( this._leftTopPoint[1] + this._rightBottomPoint[1] ) / 2)\n\t\t\t\n\t\t\t// Garbage collection\n\t\t\tthis.coords = void(0);\n\t\t\tthis.isLight = void(0);\n\t\t\tthis.generated = true\n\n\t\t\tif( setLocations ){\n\t\t\t\tthis._polygon.setLocations( joinedCoordinates.locations )\n\t\t\t}else{\n\t\t\t\treturn joinedCoordinates.locations\n\t\t\t}\n\t\t},\n\n\t\thighlightPolygon: function(){\n\t\t\tthis._polygon.setOptions({\n\t\t\t\tfillColor: this._highlightColor,\n\t\t\t\tstrokeThickness: 2\n\t\t\t\t// zIndex: 1\n\t\t\t\t// strokeColor: new Microsoft.Maps.Color(255,255,255,255)\n\t\t\t})\n\t\t},\n\n\t\trestorePolygon: function(){\n\t\t\tthis._polygon.setOptions({\n\t\t\t\tfillColor: this._fillColor,\n\t\t\t\tstrokeThickness: 1\n\t\t\t\t// zIndex: 1\n\t\t\t\t// strokeColor: this._strokeColor\n\t\t\t})\n\t\t},\n\n\t\tgetCoordinates: function(){\n\t\t\t// Fix to place the polygon always away from the filters box\n\t\t\t// (x0,y0)(x1,y1) -> (x0,y0-(y1-y0)/2)(x1,y1)\n\t\t\tif( !this.generated ) this.generatePolygon( this.coords, this.isLight )\n\t\t\t\t\n\t\t\treturn [\n\t\t\t\tnew Microsoft.Maps.Location(\n\t\t\t\t\tthis._leftTopPoint[0],\n\t\t\t\t\tthis._leftTopPoint[1] - (this._rightBottomPoint[1] - this._leftTopPoint[1]) / 2\n\t\t\t\t),\n\t\t\t\tnew Microsoft.Maps.Location(this._rightBottomPoint[0],this._rightBottomPoint[1])\n\t\t\t\t]\n\t\t},\n\n\t\tsetCoordinates: function(leftTopPoint, rightBottomPoint){\n\t\t\tthis._leftTopPoint = leftTopPoint\n\t\t\tthis._rightBottomPoint = rightBottomPoint\n\t\t},\n\n\t\thide: function(){\n\t\t\tthis._polygon.setOptions({\n\t\t\t\tvisible: false\n\t\t\t})\n\t\t\tthis._infobox.hide()\n\t\t},\n\n\t\tshow: function(){\n\t\t\tthis._polygon.setOptions({\n\t\t\t\tvisible: true\n\t\t\t})\n\t\t},\n\n\t\tgetPolygon: function(){\n\t\t\tthis.generatePolygon()\n\t\t\treturn this._polygon\n\t\t},\n\n\t\tgetInfobox: function(){\n\t\t\treturn this._infobox\n\t\t},\n\n\t\tcreateInfobox: function(){\n\n\t\t\tthis._infobox = new Infobox('info', this._map, this, this.config.content)\n\t\t\tthis._polygon.setOptions({\n\t\t\t\tinfobox: this._infobox\n\t\t\t})\n\t\t\treturn this._infobox\n\t\t},\n\n\t\tupdateInfobox: function( obj, type ){\n\t\t\t//console.error(type)\n\t\t\t//debugger;\n\t\t\t//updateInfobox\n\t\t\tthis._infobox.updateContent( obj, type )\n\t\t\treturn this._infobox\n\t\t},\n\n\t\tpanIntoView: function(){\n\t\t\tthis._map.MapView.zoomToTerritory(this)\n\t\t},\n\n\t\tupdateColor: function( color ){\n\t\t\tthis._fillColor = this._strokeColor = rgbaToMSColor(color)\n\t\t\tthis._polygon.setOptions({\n\t\t\t\tfillColor: this._fillColor/*,\n\t\t\t\tstrokeColor: this._strokeColor*/\n\t\t\t})\n\t\t},\n\n\t\tselect: function(){\n\t\t\tthis.fireEvent('selected', this.id, this.type)\n\t\t}\n\t})\n\n\tPolygon.baseRGB = '200, 187, 137'\n\tPolygon.strokeRGB = '180, 160, 125'\n\n\n\t//::: Utilities :::\n\t\n\t/**\n\t * Joins a group of coordinates in Bing Maps\n\t * format\n\t *\n\t * @param  {Array}\tcoords\t\tin JSON format\n\t * @param  {Array}\t[leftTopPoint]\n\t * @param  {Array}\t[rightBottomPoint]\n\t * @return {Object}\n\t *         {Array}\tlocations\tcoords in Microsoft.Maps.Location format\n\t *         {Array}\tleftTopPoint\n\t *         {Arrya}\trightBottomPoint\n\t */\n\tfunction joinCoordinates(coords, isLight){\n\t\tvar i, j,\n\t\t\tlocations = [],\n\t\t\tleftTopPoint, rightBottomPoint,\n\t\t\tmax\n\n\t\tif(!isLight){\n\t\t\tleftTopPoint = [coords[0][0][1], coords[0][0][0]]\n\t\t\trightBottomPoint = leftTopPoint\n\t\t\tmax = Math.min(coords[0].length) // testing to limit polygons size\n\t\t\tfor(i=0; i < max ; i++){\n\t\t\t\tlocations[i] = new Microsoft.Maps.Location(coords[0][i][1], coords[0][i][0])\n\t\t\t\tleftTopPoint = [Math.min(leftTopPoint[0], coords[0][i][1]), Math.min(leftTopPoint[1], coords[0][i][0])]\n\t\t\t\trightBottomPoint = [Math.max(rightBottomPoint[0], coords[0][i][1]), Math.max(rightBottomPoint[1], coords[0][i][0])]\n\t\t\t}\n\t\t}else{\n\t\t\tleftTopPoint = [coords[1], coords[0]]\n\t\t\trightBottomPoint = leftTopPoint\n\t\t\tmax = Math.min(coords.length) // testing to limit polygons size\n\n\t\t\tfor(i=0, j=0; i < max; i+=2, j++){\n\t\t\t\tlocations[j] = new Microsoft.Maps.Location(coords[i+1], coords[i])\n\t\t\t\tleftTopPoint = [Math.min(leftTopPoint[0], coords[i+1]), Math.min(leftTopPoint[1], coords[i])]\n\t\t\t\trightBottomPoint = [Math.max(rightBottomPoint[0], coords[i+1]), Math.max(rightBottomPoint[1], coords[i])]\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tlocations: locations,\n\t\t\tleftTopPoint: leftTopPoint,\n\t\t\trightBottomPoint: rightBottomPoint\n\t\t}\n\t}\n\n\t/**\n\t * Turns an rgba color string into a MS Color\n\t *\n\t * @param  {String} color\t\t\trgba color\n\t * @return {Microsoft.Maps.Color}   Microsoft Bing Maps Color\n\t */\n\tfunction rgbaToMSColor(color){\n\t\tvar colorArray = color.match(/\\d+(?:\\.\\d+)?/g)\n\t\treturn new Microsoft.Maps.Color( ~~(colorArray[3] * 255), colorArray[0], colorArray[1], colorArray[2] )\n\t}\n\n\treturn Polygon\n});\n","/*global define, Microsoft, Raphael*/\ndefine('app/map/Pushpin',['./Infobox'/*, 'app/utils/allColors'*/], function( Infobox ){\n\t\n\tvar colorsAssignation = {},\n\t\tindexAssignation = 0,\n\t\tisIE8 = jQuery.browser.msie && jQuery.browser.version.match(/^8/)\n\t\t// isIE10 = jQuery.browser.msie && jQuery.browser.version.match(/^10/),\n\t\t// isSafari = jQuery.browser.safari\n\t\t, resourcesColors = {\n\t\t\tmunicipio: '#F8921C',\n\t\t\tdepartamento: '#29ADEE',\n\t\t\tregion: '#EC008E'\n\t\t}\n\n\tfunction panIntoView(){\n\t\tvar coords =  this.getLocation()\n\t\tif( this._map ) this._map.setView({center: coords, zoom: 20})\n\t}\n\n\tfunction testCSS(prop) {\n\t\treturn prop in document.documentElement.style;\n\t}\n\n\tfunction Pushpin( properties, bingMap, MapView ){\n\t\tvar rootElem = document.createElement('div'),\n\t\t\tpaper,\n\t\t\twidth,\n\t\t\tx, y,\n\t\t\thtmlContent, radius,\n\t\t\tnumber = properties.count || 1,\n\t\t\tpushpin,\n\t\t\ttextPosY,\n\t\t\tcolor\n\n\t\trootElem.className = 'pushpin-container'\n\t\trootElem.setAttribute('latLon', properties.latitude +','+ properties.longitude)\n\n\t\t// if( isIE10 || isSafari ){\n\t\t// \trootElem.style.background = 'rgba(0,0,0,0)'\n\t\t// }\n\n\t\tif(number > 100) radius = 24\n\t\telse if(number > 10) radius = 18\n\t\telse radius = 14\n\n\t\tx = radius + 1\n\t\ty = radius + 1\n\n\t\ttextPosY = number < 100 ? Math.round(radius * 0.68) : Math.round(radius * 0.62)\n\n\t\t// Firefox and IE8 draw the text upper\n\t\tif( navigator.userAgent.match(/firefox/ig) ){\n\t\t\ttextPosY = Math.round(textPosY * 2)\n\t\t}\n\t\tif( isIE8 ){\n\t\t\ttextPosY = Math.round(textPosY * 1.6)\n\t\t}\n\n\t\twidth = radius * 2\n\t\trootElem.style.width = width+2 + 'px'\n\t\trootElem.style.height = width+2 + 'px'\n\t\t// rootElem.style.marginLeft = -radius + 'px'\n\t\t// rootElem.style.marginTop = -radius + 'px'\n\n\t\tpaper = Raphael(rootElem, width+2, width+2)\n\n\t\tif( properties.isResource ){\n\t\t\tcolor = resourcesColors[ properties.type ]\n\n\t\t\tpaper.circle(x, y, Math.round(radius * 1) ).attr({\n\t\t\t\tfill: color,\n\t\t\t\tstroke: color\n\t\t\t})\n\t\t\tpaper.circle(x, y, Math.round(radius * 0.75)).attr({\n\t\t\t\tfill: color,\n\t\t\t\tstroke: '#fff',\n\t\t\t\t'stroke-width': 2\n\t\t\t})\n\t\t}else if( properties.isProduction || properties.isFiscalization ){\n\t\t\tcolor = (properties.Tipo == \"NoCoM\") ? '#E2E22F': '#29ADEC'\n\t\t\tpaper.circle(x, y, Math.round(radius * 1) ).attr({\n\t\t\t\tfill: color,\n\t\t\t\tstroke: color\n\t\t\t})\n\t\t\tpaper.circle(x, y, Math.round(radius * 0.75)).attr({\n\t\t\t\tfill: color,\n\t\t\t\tstroke: '#fff',\n\t\t\t\t'stroke-width': 2\n\t\t\t})\n\t\t}else{\n\t\t\tpaper.circle(x, y, Math.round(radius * 1) ).attr({\n\t\t\t\tfill: '#3ab54a',\n\t\t\t\tstroke: '#3ab54a'\n\t\t\t})\n\t\t\tpaper.circle(x, y, radius * 0.75).attr({\n\t\t\t\tfill: '#3ab54a',\n\t\t\t\tstroke: '#fff',\n\t\t\t\t'stroke-width': 2\n\t\t\t})\n\t\t\tpaper.text(x, textPosY, number).attr({\n\t\t\t\tstroke: '#3ab54a',\n\t\t\t\t'stroke-width': 0,\n\t\t\t\tfill: '#fff',\n\t\t\t\t'text-anchor': 'middle',\n\t\t\t\t'font-size': '15px'\n\t\t\t})\n\t\t}\n\n\t\thtmlContent = rootElem.outerHTML\n\n\t\tpushpin = new Microsoft.Maps.Pushpin( properties, {\n\t\t\thtmlContent: htmlContent,\n\t\t\tzIndex: 99,\n\t\t\tanchor: new Microsoft.Maps.Point(x, y)\n\t\t})\n\n\t\tpushpin.map = bingMap\n\n\t\tif( properties.isResource ){\n\t\t\tpushpin._infobox = new Infobox('resource', bingMap, pushpin, properties)\n\t\t}else if( properties.isProduction ){\n\t\t\tpushpin._infobox = new Infobox('production', bingMap, pushpin, properties)\n\t\t}else if( properties.isFiscalization ){\n\t\t\tpushpin._infobox = new Infobox('fiscalization', bingMap, pushpin, properties)\n\t\t}else if(properties.type == 'project'){\n\t\t\tpushpin._infobox = new Infobox(properties.type, bingMap, pushpin, properties)\n\t\t}else{\n\t\t\t// If group in same place\n\t\t\t// Back misspelling \n\t\t\tif( properties.UsanMismaGeorefenciacion ){\n\t\t\t\tpushpin._infobox = new Infobox(properties.type, bingMap, pushpin, properties)\n\t\t\t}else{\n\t\t\t\t//or simply a group to zoom\n\t\t\t\tMicrosoft.Maps.Events.addHandler(pushpin, 'click', function(){\n\t\t\t\t\tbingMap.setView({\n\t\t\t\t\t\tzoom: bingMap.getZoom()+2,\n\t\t\t\t\t\tcenter: pushpin.getLocation()\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tif( properties.url ){\n\t\t\tpushpin.panIntoView = panIntoView\n\t\t}\n\n\t\tpushpin.radius = radius\n\n\t\tpushpin.viewGroupList = function( dataGroup ){\n\t\t\tMapView.viewGroupList( dataGroup )\n\t\t}\n\n\t\treturn pushpin\n\t}\n\n\treturn Pushpin\n});\n","/*global define, ko, doT*/\ndefine('app/map/ListView',['app/controller/AppState'], function( AppState ){\n\t\n\tfunction ListView(){\n\t\tthis.root = $('#projects-list-view')\n\t\tthis.projects = ko.observableArray([])\n\t\n\t\tAppState.on('projects-list-loaded', this.projectsListLoaded.bind(this))\n\t\tAppState.on('loading-projects-list', this.onLoading.bind(this))\n\t\tthis.root.find('.pagination').on('click', 'a', this.loadPage.bind(this))\n\t\tthis.root.find('.back').on('click', this.toMapMode)\n\t\tthis.pages = ko.observableArray([])\n\t\tthis.actual = 0\n\t\tthis.loading = ko.observable(true)\n\t}\n\n\n\tListView.prototype.onLoading = function(){\n\t\tthis.loading(true)\n\t\tthis.projects( [] )\n\t\tthis.root.find('.pagination').html('')\n\t\t$('html, body').animate({ scrollTop: 0 }, 200)\n\t}\n\n\tListView.prototype.pageNumberTempl = doT.compile('<a href=\"#\" class=\"{{? it.active}}active{{?}}\" data-page=\"{{=it.page}}\">{{=it.page}}</a>')\n\n\tListView.prototype.projectsListLoaded = function( data ){\n\t\tdata.objects = data.objects || []\n\n\t\t$.each(data.objects, function(e, k){\n\t\t\tvar items = [\"Regional\", \"Departamental\", \"Municipal\"],\n\t\t\t\titem = items[Math.floor(Math.random()*items.length)];\n\t\t\tk.finalization = item;\n\t\t})\n\n\t\t\n\t\tthis.projects( data.objects )\n\t\t//data.page_number\n\t\t//data.total_pages\n\t\tthis.pages([])\n\t\tthis.drawPages(+ data['pageNumber'], + data['totalPages'])\n\t\t$('html, body').animate({\n\t\t\tscrollTop: $('#controls').offset().top\n\t\t}, 300);\n\t\tthis.loading(false)\n\t}\n\n\tListView.prototype.loadPage = function(e){\n\t\tthis.loading(true)\n\t\tAppState.setPage( e.target.getAttribute('data-page') )\n\t\treturn false\n\t}\n\n\tListView.prototype.toMapMode = function(){\n\t\tAppState.setListMode( false )\n\t\treturn false\n\t}\n\n\tListView.prototype.drawPages = function( actual, total ){\n\t\tvar pagesHTML = '',\n\t\t\ti,\n\t\t\tSOMA1 = 15,\n\t\t\tSOMA2 = 5\n\n\t\tthis.actual = actual\n\n\t\tif( actual > 1 ){\n\t\t\tpagesHTML += '<a class=\"prev\" href=\"#\" data-page=\"' +\n\t\t\t\t(actual-1) + '\">&lt;</a>'\n\t\t}\n\t\tif( total < SOMA1 ){\n\t\t\tfor( i = 1; i<=total; i++ ){\n\t\t\t\tpagesHTML += this.pageNumberTempl({page: i, active: i==actual})\n\t\t\t}\n\t\t}else{\n\t\t\tfor( i = 1; i < SOMA2; i++ ){\n\t\t\t\tpagesHTML += this.pageNumberTempl({page: i, active: i==actual})\n\t\t\t}\n\t\t\tif( actual > SOMA2 + 1 && actual < total - SOMA2 ){\n\t\t\t\tpagesHTML += '...'\n\t\t\t\tpagesHTML += this.pageNumberTempl({page: actual - 1, active: i==actual})\n\t\t\t\tpagesHTML += this.pageNumberTempl({page: actual, active: true})\n\t\t\t\tpagesHTML += this.pageNumberTempl({page: actual + 1, active: i==actual})\n\t\t\t\tpagesHTML += '...'\n\t\t\t}else{\n\t\t\t\tif( actual < total - SOMA2 ){\n\t\t\t\t\tfor( i = SOMA2; i<=SOMA2 + 2; i++ ){\n\t\t\t\t\t\tpagesHTML += this.pageNumberTempl({page: i, active: i==actual})\n\t\t\t\t\t}\n\t\t\t\t\tpagesHTML += '...'\n\t\t\t\t}else{\n\t\t\t\t\tpagesHTML += '...'\n\t\t\t\t\tfor( i = total-7; i<=total-SOMA2+1; i++ ){\n\t\t\t\t\t\tpagesHTML += this.pageNumberTempl({page: i, active: i==actual})\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor( i = total - SOMA2 + 2; i<=total; i++ ){\n\t\t\t\tpagesHTML += this.pageNumberTempl({page: i, active: i==actual})\n\t\t\t}\n\t\t}\n\n\t\tif( actual < total ){\n\t\t\tpagesHTML += '<a class=\"next\" href=\"#\" data-page=\"' +\n\t\t\t\t(actual+1) + '\">&gt;</a>'\n\t\t}\n\n\t\tthis.root.find('.pagination').html(pagesHTML)\n\t}\n\n\tvar lv = new ListView()\n\tko.applyBindings(lv, lv.root[0])\n});\n","/*global Microsoft, $, define, ko*/\ndefine('app/map/Map',['lib/mvc/Observable',\n\t\t'./Polygon',\n\t\t'./Pushpin',\n\t\t'app/network/Services',\n\t\t'app/controller/AppState',\n\t\t'./ListView'\n\t],\n\tfunction(\n\t\tObservable,\n\t\tPolygon,\n\t\tPushpin,\n\t\tServices,\n\t\tAppState\n\t){\n\t'use strict';\n\n\tfunction Map(){\n\t\tvar map, // Bing Map\n\t\t\tpolygons = {\n\t\t\t\tregions: null,\n\t\t\t\tdepartments: null,\n\t\t\t\tmunicipalities: null\n\t\t\t},\n\t\t\tpolygonsMap = {},\n\t\t\tpolygonsInfoData = {\n\t\t\t\tdepartments: JSON.parse(document.body.getAttribute('data-deparmentProjectData')),\n\t\t\t\tregions: JSON.parse(document.body.getAttribute('data-regionProjectData'))\n\t\t\t},\n\t\t\tinfoboxes = {\n\t\t\t\tregions: null,\n\t\t\t\tdepartments: null,\n\t\t\t\tmunicipalities: null\n\t\t\t},\n\t\t\t// Center of Colombia\n\t\t\tcenter = new Microsoft.Maps.Location(4.3344012216447965, -77.76142578125),\n\t\t\t// zoom to show plygons\n\t\t\t// departments and regions zoom\n\t\t\tdefaultZoom = 6,\n\t\t\t// Maps view mode\n\t\t\tviewMode,\n\t\t\t// Actual map zoom\n\t\t\tactualZoom = 5,\n\t\t\t// Actual map center\n\t\t\tactualCenter,\n\t\t\t// Rendered Mode flag\n\t\t\trenderedMode,\n\t\t\t// Pushpins\n\t\t\tpushpins = [],\n\t\t\t// PushpinsWrapper\n\t\t\tpushpinsContainer,\n\t\t\t// ko this\n\t\t\tself = this,\n\t\t\t// Never redraw polygons until end of zooming\n\t\t\ttimeoutPolygonsRedraw,\n\t\t\t// loading spinner\n\t\t\tloader = $('<div>', {'class': 'loader'}).appendTo($('#map-div')[0]),\n\t\t\tloaderQueries = [],\n\t\t\tfirstTime = true,\n\t\t\t// Flag to know when we are pending of loading a response\n\t\t\t// callResourcesInProgress = false,\n\t\t\t// Async Flag for Drawing Pending States When no Polygons Where Available\n\t\t\tpendingStateChange = {}\n\n\t\tdocument.body.removeAttribute('data-deparmentProjectData')\n\t\tdocument.body.removeAttribute('data-regionProjectData')\n\n\t\t// Fix for Chrome\n\t\tscrollTo(0,0);\n\t\twindow.onload = function() {\n\t\t\tscrollTo(0,0);\n\t\t}\n\n\n\t\t// Actual vizualization mode [Region,Department,Municipality]\n\t\tself.actualVisualization = ko.observable('Department')\n\t\tviewMode = self.actualVisualization()\n\n\t\t//::: Bing Maps Notifications :::\n\t\t\n\t\tself.showSpinner = function( cancel ){\n\t\t\tif( cancel !== false ){\n\t\t\t\tloaderQueries.push(1)\n\t\t\t}\n\t\t\tif( cancel === false && loaderQueries.length < 2){\n\t\t\t\tloader.fadeOut()\n\t\t\t\tloaderQueries = []\n\t\t\t}else if( cancel === false ){\n\t\t\t\tloaderQueries.pop()\n\t\t\t}else{\n\t\t\t\tloader.fadeIn()\n\t\t\t}\n\t\t}\n\n\t\tself.hideSpinner = function( ){\n\t\t\tif(loaderQueries.length < 2){\n\t\t\t\tloader.fadeOut()\n\t\t\t\t\t// .spin(false)\n\t\t\t\tloaderQueries = []\n\t\t\t}else{\n\t\t\t\tloaderQueries.pop()\n\t\t\t}\n\t\t}\n\n\t\tself.getCorners = function(){\n\t\t\tvar nw, se,\n\t\t\t\tbounds = map.getBounds()\n\n\t\t\t\tnw = bounds.getNorthwest()\n\t\t\t\tse = bounds.getSoutheast()\n\n\t\t\treturn [\n\t\t\t\t\t[nw.latitude, nw.longitude],\n\t\t\t\t\t[se.latitude, se.longitude]\n\t\t\t\t]\n\t\t}\n\n\t\tself.zoomToColombia = function(){\n\t\t\t// console.log('ZOOMING TO COLOMBIA')\n\t\t\t// console.log('setview'+defaultZoom)\n\t\t\tmap.setView({\n\t\t\t\tcenter: center,\n\t\t\t\tzoom: defaultZoom,\n\t\t\t\tanimate: false\n\t\t\t})\n\n\t\t\tvar targetBounds = map.getTargetBounds()\n\t\t\t\n\t\t\tAppState.setZoomAndCorners({\n\t\t\t\tzoom: map.getTargetZoom(),\n\t\t\t\tcorners: [\n\t\t\t\t\t[targetBounds.getNorth(),targetBounds.getWest()],\n\t\t\t\t\t[targetBounds.getSouth(),targetBounds.getEast()]\n\t\t\t\t],\n\t\t\t\tcenter: [targetBounds.center.latitude,targetBounds.center.longitude]\n\t\t\t})\n\t\t}\n\n\t\tAppState.on('projects-loaded', stateChange.bind(self))\n\t\tAppState.on('projects-loaded', self.hideSpinner.bind(self))\n\t\tAppState.on('resources-loaded', stateChangeRes.bind(self))\n\t\tAppState.on('production-loaded', stateChangeProd.bind(self))\n\t\tAppState.on('fiscalization-loaded', stateChangeFisc.bind(self))\n\t\tAppState.on('loading-projects', self.showSpinner.bind(self))\n\t\tAppState.on('load-projects-aborded', self.hideSpinner.bind(self))\n\t\tAppState.on('map-changed', panTo )\n\t\tAppState.on('redraw-all', redrawPolygons )\n\t\tAppState.on('state-change', function( state ){\n\t\t\t//debugger;\n\t\t\t$('.map-container')\n\t\t\t\t.removeClass('proyectos-mode')\n\t\t\t\t.removeClass('recursos-mode')\n\t\t\t\t.removeClass('produccion-mode')\n\t\t\t\t.removeClass('fiscalizacion-mode')\n\t\t\t\t.addClass( state.toLowerCase() + '-mode' )\n\t\t} )\n\t\t// AppState.on('state-change', self.zoomToColombia.bind(self))\n\t\t\n\t\t$('#filter-results button').click( changeToListMode )\n\n\t\t/**\n\t\t * Callback for when the Themes Module is loaded\n\t\t */\n\t\tfunction themesModuleLoaded(){\n\t\t\tvar targetBounds\n\n\t\t\tscrollTo(0,0);\n\n\t\t\tmap = new Microsoft.Maps.Map(\n\t\t\t\tdocument.getElementById('map-div'),\n\t\t\t\t{\n\t\t\t\t\tcredentials: 'Apwt9Qe5hfw-HjZ-yMqofEVWtwyAdIfAvFg6B-pmoa_7zI08a0EAx5vwjT5miN0M',\n\t\t\t\t\tzoom: defaultZoom,\n\t\t\t\t\tshowMapTypeSelector: false,\n\t\t\t\t\tcenter: center,\n\t\t\t\t\tenableSearchLogo: false,\n\t\t\t\t\tenableClickableLogo: false,\n\t\t\t\t\tmapTypeId : Microsoft.Maps.MapTypeId.road,\n\t\t\t\t\tuseInertia: false\n\t\t\t\t\t// mapTypeId : Microsoft.Maps.MapTypeId.auto\n\t\t\t\t\t// mapTypeId : Microsoft.Maps.MapTypeId.birdseye\n\t\t\t\t\t// mapTypeId : Microsoft.Maps.MapTypeId.aerial\n\t\t\t\t\t// mapTypeId : Microsoft.Maps.MapTypeId.collinsBart\n\t\t\t\t\t// mapTypeId : Microsoft.Maps.MapTypeId.mercator\n\t\t\t\t})\n\n\t\t\tscrollTo(0,0);\n\t\t\t\n\t\t\tmap.MapView = self\n\t\t\t//Map initialization\n\t\t\t//Blocks mousewheel events\n\t\t\tMicrosoft.Maps.Events.addHandler(map, 'mousewheel', function(e) {\n\t\t\t\te.handled = true;\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\t// Microsoft.Maps.Events.addHandler(map, 'mousemove', function(e) {\n\t\t\t// \tvar point = new Microsoft.Maps.Point(e.getX(), e.getY());\n\t\t\t// \tvar loc = map.tryPixelToLocation(point);\n\t\t\t// \tif('console' in window && 'log' in window.console) //console.log(loc)\n\t\t\t// });\n\t\t\tMicrosoft.Maps.Events.addHandler(map, 'click', function(){\n\t\t\t\tself.fireEvent('click', map)\n\t\t\t})\n\t\t\tMicrosoft.Maps.Events.addThrottledHandler(map, 'viewchangeend', checkZoomChange, 600)\n\t\t\t// Microsoft.Maps.Events.addHandler(map, 'viewchangeend', function(){\n\t\t\t// \tconsole.log('view changes without throttled')\n\t\t\t// }, 600)\n\t\t\t// Microsoft.Maps.Events.addThrottledHandler(map, 'viewchangeend', function(){\n\t\t\t// \tconsole.log('view changes with throttled')\n\t\t\t// }, 600)\n\t\t\tMicrosoft.Maps.Events.addThrottledHandler(map, 'targetviewchanged', function(){\n\t\t\t\tredrawPolygons()\n\t\t\t}, 600)\n\t\t\t// Microsoft.Maps.Events.addHandler(map, 'targetviewchanged', function(){\n\t\t\t// \tconsole.log('targetview changes without throttled')\n\t\t\t// }, 600)\n\t\t\t// Microsoft.Maps.Events.addThrottledHandler(map, 'targetviewchanged', function(){\n\t\t\t// \tconsole.log('targetview changes with throttled')\n\t\t\t// }, 600)\n\n\t\t\t\n\t\t\t//Deffer loading of all the plygons\n\t\t\tServices.polygons.getDepartments(getRedrawHandler('departments'))\n\t\t\tself.showSpinner()\n\t\t\tServices.polygons.getRegions(getRedrawHandler('regions'))\n\t\t\tself.showSpinner()\n\t\t\tServices.polygons.getMunicipalities(getRedrawHandler('municipalities'))\n\n\t\t\t// checkZoomChange()\n\n\t\t\tself.ready = true\n\t\t\t// self.fireEvent('ready', self)\n\t\t\t\n\t\t\ttargetBounds = map.getTargetBounds()\n\t\t\t\n\t\t\tAppState.setDefaultCorners([\n\t\t\t\t[targetBounds.getNorth(),targetBounds.getWest()],\n\t\t\t\t[targetBounds.getSouth(),targetBounds.getEast()]\n\t\t\t])\n\t\t\t\n\t\t\tpushpinsContainer = new Microsoft.Maps.EntityCollection()\n\t\t\tscrollTo(0,0);\n\t\t\t\n\t\t}\n\n\t\t/**\n\t\t * Callback for when the GeoJSON Polygons of the\n\t\t * departments are loaded.\n\t\t * With the data, draws the polygon for every\n\t\t * department.\n\t\t *\n\t\t * @param  {GeoJSON} data list of polygons\n\t\t */\n\t\tfunction parseGeoJSON(data, polygonsType, isLight){\n\t\t\tvar territory, coords,\n\t\t\t\tpolygon, i, j,\n\t\t\t\t// Accessing strings\n\t\t\t\tgeometry = isLight ? 'ge' : 'geometry',\n\t\t\t\tcoordinates = isLight ? 'c' : 'coordinates',\n\t\t\t\ttype = isLight ? 't' : 'type',\n\t\t\t\tproperties = isLight ? 'p' : 'properties',\n\t\t\t\tid = isLight ? 'i' : 'id',\n\t\t\t\tname = isLight ? 'n' : 'name',\n\t\t\t\t// max = 0, min = 0,\n\t\t\t\tisRegion = polygonsType == 'regions',\n\t\t\t\tpolygonsFromMulti\n\n\t\t\tpolygonsMap[polygonsType] = polygonsMap[polygonsType] || {}\n\t\t\tpolygons[polygonsType] = new Microsoft.Maps.EntityCollection()\n\t\t\tinfoboxes[polygonsType] = new Microsoft.Maps.EntityCollection()\n\n\t\t\tpolygons[polygonsType].setOptions({\n\t\t\t\tzIndex: 1\n\t\t\t})\n\t\t\tinfoboxes[polygonsType].setOptions({\n\t\t\t\tzIndex: 2\n\t\t\t})\n\t\t\tpushpinsContainer.setOptions({\n\t\t\t\tzIndex: 9\n\t\t\t})\n\t\t\t\n\t\t\tfor(i = 0; i < data.features.length; i++){\n\t\t\t\tterritory = data.features[i]\n\t\t\t\tcoords = territory[geometry][coordinates]\n\n\t\t\t\tif( territory[geometry][type] == 'MultiPolygon'){\n\t\t\t\t\tpolygonsFromMulti = []\n\t\t\t\t\tfor(j=0; j < coords.length; j++){\n\t\t\t\t\t\tpolygon = createPolygon(\n\t\t\t\t\t\t\tcoords[j],\n\t\t\t\t\t\t\tterritory[properties],\n\t\t\t\t\t\t\tisLight,\n\t\t\t\t\t\t\tterritory[properties][id],\n\t\t\t\t\t\t\tpolygonsType\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\n\t\t\t\t\t\tif( polygon._leftTopPoint ){\n\t\t\t\t\t\t\tpolygonsFromMulti[j] = polygon\n\n\t\t\t\t\t\t\tif( j === 0 ){\n\t\t\t\t\t\t\t\tpolygonsFromMulti.leftTopPoint = polygon._leftTopPoint\n\t\t\t\t\t\t\t\tpolygonsFromMulti.rightBottomPoint = polygon._rightBottomPoint\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tpolygonsFromMulti.leftTopPoint = [\n\t\t\t\t\t\t\t\t\t\tMath.min(polygonsFromMulti.leftTopPoint[0], polygon._leftTopPoint[0]),\n\t\t\t\t\t\t\t\t\t\tMath.min(polygonsFromMulti.leftTopPoint[1], polygon._leftTopPoint[1])\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\tpolygonsFromMulti.rightBottomPoint = [\n\t\t\t\t\t\t\t\t\t\tMath.max(polygonsFromMulti.rightBottomPoint[0], polygon._rightBottomPoint[0]),\n\t\t\t\t\t\t\t\t\t\tMath.max(polygonsFromMulti.rightBottomPoint[1], polygon._rightBottomPoint[1])\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif( isRegion ){ // Regions colors... \n\t\t\t\t\t\t\tpolygon.updateColor('rgba(' + Polygon.baseRGB + ',' +\n\t\t\t\t\t\t\t\tcalculateOpacity( i / data.features.length ) + ')')\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//TODO Update Polygons and Infoboxes\n\t\t\t\t\t\tpolygonsMap[polygonsType][territory[properties][id]] =\n\t\t\t\t\t\t\tpolygonsMap[polygonsType][territory[properties][id]] || []\n\t\t\t\t\t\tpolygonsMap[polygonsType][territory[properties][id]].push( polygon )\n\t\t\t\t\t\t// Municipalities polygons are avoer 1100, so they are not\n\t\t\t\t\t\t// asigned to the departments EntityCollection until the\n\t\t\t\t\t\t// very end\n\t\t\t\t\t\tif( polygonsType !== 'municipalities' ){\n\t\t\t\t\t\t\tpolygons[polygonsType].push(polygon.getPolygon())\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinfoboxes[polygonsType].push(polygon.getInfobox())\n\t\t\t\t\t}\n\t\t\t\t\tfor(j=0; j < polygonsFromMulti.length; j++){\n\t\t\t\t\t\tpolygonsFromMulti[j].setCoordinates(polygonsFromMulti.leftTopPoint, polygonsFromMulti.rightBottomPoint)\n\t\t\t\t\t}\n\t\t\t\t\t// reassign limits\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tpolygon = createPolygon(\n\t\t\t\t\t\tcoords,\n\t\t\t\t\t\tterritory[properties],\n\t\t\t\t\t\tisLight,\n\t\t\t\t\t\tterritory[properties][id],\n\t\t\t\t\t\tpolygonsType\n\t\t\t\t\t)\n\t\t\t\t\tif( isRegion ){ // Regions colors... \n\t\t\t\t\t\tpolygon.updateColor('rgba(' + Polygon.baseRGB + ',' +\n\t\t\t\t\t\t\t( i/data.features.length ) + ')')\n\t\t\t\t\t}\n\t\t\t\t\t//TODO Update Polygons and Infoboxes\n\t\t\t\t\tpolygonsMap[polygonsType][territory[properties][id]] = polygon\n\t\t\t\t\t// Municipalities polygons are avoer 1100, so they are not\n\t\t\t\t\t// asigned to the departments EntityCollection until the\n\t\t\t\t\t// very end\n\t\t\t\t\tif( polygonsType !== 'municipalities' ){\n\t\t\t\t\t\tpolygons[polygonsType].push(polygon.getPolygon())\n\t\t\t\t\t}\n\t\t\t\t\tinfoboxes[polygonsType].push(polygon.getInfobox())\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tself.fireEvent('polygons-initialized', polygonsType)\n\n\t\t\t// Async Manage of Lazzy Polygons Loading\n\t\t\tif( pendingStateChange[polygonsType] ){\n\t\t\t\tpendingStateChange[polygonsType]()\n\t\t\t}\n\t\t}\n\n\n\t\t//::: Normal Funtions :::\n\t\t/**\n\t\t * Adds a polygon and attach the listening to events\n\t\t */\n\t\tfunction createPolygon(coords, content, isLight, id, type){\n\t\t\tvar dataGroup = generateInfoDataAndColor(content),\n\t\t\t\tpolygon = new Polygon(map, {\n\t\t\t\t\tcoords: coords,\n\t\t\t\t\tcontent: dataGroup.data\n\t\t\t\t}, isLight, id, type)\n\n\t\t\tMicrosoft.Maps.Events.addHandler(polygon.getPolygon(), 'click', function(polygon){\n\t\t\t\tself.fireEvent('click-on-polygon', polygon)\n\t\t\t})\n\n\t\t\tpolygon.on( 'selected', function( polygonId, type ){\n\t\t\t\tself.fireEvent( 'polygon-selected', polygonId, type )\n\t\t\t})\n\n\t\t\treturn polygon\n\t\t}\n\n\t\t/**\n\t\t * Generates all teh polygon Infobox data\n\t\t * and color with opacity\n\t\t * @param  {Object} content object data con generate from\n\t\t * @return {Object}         Object with data and color\n\t\t */\n\t\tfunction generateInfoDataAndColor(content, sourceArrayData){\n\t\t\tvar item, i,// max = 0, min,\n\t\t\t\tdata = {\n\t\t\t\t\tname: content.name || content.n,\n\t\t\t\t\tprojectNumber: 0,\n\t\t\t\t\tapprovedMoney: 0,\n\t\t\t\t\tid: content.id || content.i\n\t\t\t\t},\n\t\t\t\t// deltaColor = parseInt(Math.random()*255,10),\n\t\t\t\tcolor\n\n\t\t\tif((content.type || content.t) == 'departamento'){\n\t\t\t\tsourceArrayData = sourceArrayData || polygonsInfoData.departments\n\t\t\t\t// console.log(content.type, item.id, item, data)\n\t\t\t\t// max  = min = sourceArrayData[0].approvedMoney\n\t\t\t\tfor(i=0; i<sourceArrayData.length; i++){\n\t\t\t\t\titem = sourceArrayData[i]\n\t\t\t\t\tif(item.id === (('id' in content) ? content.id : content.i)){\n\t\t\t\t\t\tdata.approvedMoney = item.approvedMoney\n\t\t\t\t\t\tdata.projectNumber = item.projectNumber\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if((content.type || content.t) == 'region'){\n\t\t\t\tsourceArrayData = sourceArrayData || polygonsInfoData.regions\n\n\t\t\t\tfor(i=0; i<sourceArrayData.length; i++){\n\t\t\t\t\titem = sourceArrayData[i]\n\t\t\t\t\tif(item.id === (('id' in content) ? content.id : content.i)){\n\t\t\t\t\t\tdata.approvedMoney = item.approvedMoney\n\t\t\t\t\t\tdata.projectNumber = item.projectNumber\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(sourceArrayData){\n\t\t\t\tif(sourceArrayData[0]) for(i=sourceArrayData.length; i--;){\n\t\t\t\t\titem = sourceArrayData[i]\n\t\t\t\t\tif(item.id === (('id' in content) ? content.id : content.i)){\n\t\t\t\t\t\tdata.approvedMoney = item.approvedMoney\n\t\t\t\t\t\tdata.projectNumber = item.projectNumber\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdata: data,\n\t\t\t\tcolor: color\n\t\t\t}\n\t\t}\n\n\n\t\t/**\n\t\t * Center the map into the corners\n\t\t *\n\t\t * @param  {Object}\t\tview options as Bing Maps\n\t\t *                      may receives\n\t\t */\n\t\tfunction panTo( view ){\n\t\t\tvar targetBounds\n\n\t\t\tif( self.ready ){\n\t\t\t\tif( view.center ){\n\t\t\t\t\tview.center = new Microsoft.Maps.Location(view.center[0], view.center[1])\n\t\t\t\t}else{\n\t\t\t\t\tview.bounds = Microsoft.Maps.LocationRect.fromCorners(view.leftTop, view.rightBottom)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// console.log(JSON.stringify(view))\n\t\t\t\t\n\t\t\t\tif( view.zoom ){\n\t\t\t\t\tview.zoom = +view.zoom || 6\n\t\t\t\t}\n\n\t\t\t\tmap.setView(view)\n\t\t\t\t\n\t\t\t\ttargetBounds = map.getTargetBounds()\n\t\t\t\t\n\t\t\t\t// console.log('setview', map.getTargetZoom())\n\t\t\t\tAppState.setZoomAndCorners({\n\t\t\t\t\tzoom: map.getTargetZoom(),\n\t\t\t\t\tcorners: [\n\t\t\t\t\t\t[targetBounds.getNorth(),targetBounds.getWest()],\n\t\t\t\t\t\t[targetBounds.getSouth(),targetBounds.getEast()]\n\t\t\t\t\t],\n\t\t\t\t\tcenter: [targetBounds.center.latitude,targetBounds.center.longitude]\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\t// console.log('gonna... setview',map.getTargetZoom())\n\t\t\t\tself.on('ready', function(){\n\t\t\t\t\tpanTo( view )\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Function listenning to the map changes\n\t\t * and checking zoom changes to redraw actions\n\t\t */\n\t\tfunction checkZoomChange(){\n\t\t\tvar center = map.getCenter(),\n\t\t\t\tcenterStr = center.latitude +' '+ center.longitude,\n\t\t\t\tcorners = self.getCorners(),\n\t\t\t\tzoom = map.getZoom()\n\n\t\t\t// console.log('ZOOOOOOOOOOOOOOOOOOM000000')\n\t\t\t// Bing calls viewChange on start\n\n\t\t\tif(\t( zoom % 1 === 0 &&\n\t\t\t\tactualZoom != zoom ) ||\n\t\t\t\tactualCenter !== centerStr\n\t\t\t\t){\n\t\t\t\tactualZoom = zoom\n\t\t\t\tactualCenter = centerStr\n\t\t\t\t// console.log('ZOOOOOOOOOOOOOOOOOOM')\n\t\t\t\t// console.log('checkZoomChange')\n\t\t\t\tAppState.setZoomAndCorners( {\n\t\t\t\t\tzoom: zoom,\n\t\t\t\t\tcorners: corners,\n\t\t\t\t\tcenter: [center.latitude,center.longitude]\n\t\t\t\t} )\n\t\t\t\tredrawPolygons()\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Returns a dynamic function loader for the\n\t\t * specific polygon type\n\t\t * @param  {String} polygonsType key from array in the polygons object\n\t\t *                               to populate\n\t\t * @return {Function}              callback function generated\n\t\t */\n\t\tfunction getRedrawHandler(polygonsType){\n\t\t\treturn function(geoJSON){\n\t\t\t\t//TODO extend the array data\n\t\t\t\tparseGeoJSON(geoJSON, polygonsType, !geoJSON.type)\n\t\t\t\tredrawPolygons()\n\t\t\t\t\n\t\t\t\t// if( !polygonsType.match('municip') )\n\t\t\t\tself.showSpinner(false)\n\t\t\t}\n\t\t}\n\n\t\tfunction normalizeResourceObject( obj ){\n\t\t\tvar nObj,\n\t\t\t\ti, key,\n\t\t\t\trObj,\n\t\t\t\tiRec\n\n\t\t\t\n\n\t\t\tnObj = {}\n\t\t\tnObj.id = obj.IdEntidad\n\t\t\tnObj.type = obj.TipoEntidad\n\t\t\tnObj.name = obj.NombreEntidad || obj.name\n\t\t\tnObj.typeRes = obj.TipoInfografico || obj.tipo\n\t\t\tnObj.url = obj.Url\n\t\t\t//nObj.TotalFiscalizaciones = obj.TotalFiscalizaciones\n\t\t\tnObj.Tipo = obj.TipoInfografico\n\n\t\t\tif( obj.latitud ){\n\t\t\t\tnObj.latitude = obj.latitud\n\t\t\t\tnObj.longitude = obj.longitud\n\t\t\t}\n\t\t\tif( obj.Latitud ){\n\t\t\t\tnObj.latitude = obj.Latitud\n\t\t\t\tnObj.longitude = obj.Longitud\n\t\t\t}\n\t\t\tif( obj.infograficosRecursos ){\n\t\t\t\tnObj.infoRecursos = obj.infograficosRecursos\n\t\t\t\tnObj.isResource = true\n\t\t\t}\n\t\t\tif( obj.DetalleAo ){\n\t\t\t\tnObj.detailYear = obj.DetalleAo\n\t\t\t\tnObj.isProduction = true\n\t\t\t}\n\n\t\t\tif(obj.TipoFis){\n\t\t\t\tif(obj.TipoFis == \"-1\"){nObj.TipoFisName = 'Todos'}\n\t\t\t\tif(obj.TipoFis == \"M\"){nObj.TipoFisName = 'Mineral'}\n\t\t\t\tif(obj.TipoFis == \"H\"){nObj.TipoFisName = 'Hidrocarburo'}\n\t\t\t}else{\n\t\t\t\tnObj.TipoFisName = 'false'\n\t\t\t}\n\n\t\t\tif( obj.Tipo == \"F\" ){\n\n\t\t\t\t//console.log('objobjobjobj------------->', obj)\n\n\t\t\t\t//nObj.Fiscalizaciones = obj.Fiscalizaciones\n\t\t\t\t//nObj.FiscalizacionesPorPeriodo = obj.FiscalizacionesPorPeriodo\n\t\t\t\t//nObj.TotalFiscalizaciones = obj.TotalFiscalizaciones\n\t\t\t\t//nObj.Periodos = obj.Periodos[0]\n\t\t\t\t//nObj.type = \"fiscalization\"\n\t\t\t\t//nObj.Tipo = obj.TipoInfografico\n\t\t\t\t\n\t\t\t\tnObj.TipoFis = obj.TipoFis\n\t\t\t\tnObj.Total = obj.Total\n\t\t\t\tnObj.Url = obj.Url\n\t\t\t\tnObj.detalles = obj.detalles\n\t\t\t\tnObj.isFiscalization = true\n\t\t\t}\n\t\t\tif( obj.TipoInfografico == \"NoCoM\"){\n\n\t\t\t\t\n\t\t\t\t//nObj.Fiscalizaciones = obj.TotalFiscalizaciones\n\t\t\t\t//nObj.FiscalizacionesPorPeriodo = obj.InfoboxPin.DetallesPorAo\n\t\t\t\t//nObj.TotalFiscalizaciones = obj.TotalFiscalizaciones\n\t\t\t\t//nObj.Periodos = obj.InfoboxPin.Periodo\n\t\t\t\t//nObj.type = \"fiscalization\"\n\t\t\t\t//nObj.Tipo = obj.Tipo\n\t\t\t\tnObj.Tipo = \"NoCoM\"\n\t\t\t\tnObj.TipoFis = obj.TipoFis\n\t\t\t\tnObj.Total = obj.Total\n\t\t\t\tnObj.Url = obj.Url\n\t\t\t\tnObj.detalles = obj.detalles\n\t\t\t\tnObj.isFiscalization = true\n\t\t\t}\n\n\t\t\t//debugger;\n\n\t\t\t//console.log('--->nObj', nObj, '--->obj', obj )\n\t\t\treturn nObj\n\t\t}\n\n\n\t\tfunction stateChangeRes( data, data2 ){\n\t\t\t// if( callResourcesInProgress ){\n\t\t\tself.hideSpinner()\n\t\t\t// }\n\t\t\t$.extend(data, data2)\n\t\t\tstateChange( data )\n\t\t\t// callResourcesInProgress = !callResourcesInProgress\n\t\t}\n\n\n\t\tfunction stateChangeProd( data, data2 ){\n\t\t\t// if( callResourcesInProgress ){\n\t\t\tself.hideSpinner()\n\t\t\t// }\n\t\t\tdata.Detalles = data.Detalles || []\n\t\t\tdata2.Detalles = data2.Detalles || []\n\t\t\tdata.Detalles = data.Detalles.concat( data2.Detalles )\n\t\t\tstateChange( data )\n\t\t\t// callResourcesInProgress = !callResourcesInProgress\n\t\t}\n\n\n\t\tfunction stateChangeFisc( data, data2 ){\n\t\t\t// if( callResourcesInProgress ){\n\t\t\tself.hideSpinner()\n\t\t\t// }\n\t\t\tdata.Detalles = data.Detalles || data.Pines || []\n\t\t\tdata2.Detalles = data2.Detalles || data2.Pines || []\n\t\t\tdata.detalleFiscalizacion = data.Detalles.concat( data2.Detalles )\n\t\t\tstateChange( data )\n\t\t\t// callResourcesInProgress = !callResourcesInProgress\n\t\t}\n\n\t\t/**\n\t\t * Recieves the notification when the map data model\n\t\t * changes, this could bring visualizacion changes,\n\t\t * and pin data changes\n\t\t * @param  {Object} data JSON reponse from the server\n\t\t */\n\t\tfunction stateChange( data ){\n\t\t\tvar obj,\n\t\t\t\tnoPolygonFlag = true,\n\t\t\t\ttype = 'info'\n\n\t\t\t\t//debugger;\n\t\t\t\t\n\t\t\tfunction _applyToPolygon(polygon, array, type){\n\t\t\t\tif( !polygon ) return\n\t\t\t\t\n\t\t\t\tvar id = polygon.id,\n\t\t\t\t\tobj = array[ id ]\n\n\t\t\t\t// if( obj.isResource ){\n\t\t\t\t// \ttype = 'resource'\n\t\t\t\t// }else if( obj.isProduction ){\n\t\t\t\t// \ttype = 'production'\n\t\t\t\t// }else{\n\t\t\t\t// \ttype = 'info'\n\t\t\t\t// }\n\t\t\t\t\n\n\t\t\t\t//debugger;\n\t\t\t\t\n\t\t\t\tif( obj ){\n\t\t\t\t\t// If the object is from resources\n\t\t\t\t\t// I transform it\n\t\t\t\t\tif( obj.IdEntidad ){\n\t\t\t\t\t\tobj = normalizeResourceObject( obj )\n\t\t\t\t\t}\n\t\t\t\t\tif(polygon instanceof Polygon){\n\t\t\t\t\t\tpolygon.updateInfobox(obj, type)\n\t\t\t\t\t}else{\n\t\t\t\t\t\tfor(j=polygon.length; j--;){\n\t\t\t\t\t\t\tpolygon[j].updateInfobox(obj, type)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(polygon instanceof Polygon){\n\t\t\t\t\t\tpolygon.updateInfobox(objEmpty, type)\n\t\t\t\t\t}else{\n\t\t\t\t\t\tfor(j=polygon.length; j--;){\n\t\t\t\t\t\t\tpolygon[j].updateInfobox(objEmpty, type)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// NEW VERSION\n\t\t\t// 1. Read all the objects and calculate the max, mins and group\n\t\t\t\n\t\t\tvar arrayMunicipalities = { length: 0 },\n\t\t\t\tarrayDepartments = { length: 0 },\n\t\t\t\tarrayRegions = { length: 0 },\n\t\t\t\tid,\n\t\t\t\tpolygon,\n\t\t\t\tj, i,\n\t\t\t\t// Empty stuff\n\t\t\t\t// colorEmpty = 'rgba(' + Polygon.baseRGB + ',' + calculateOpacity(0) + ')',\n\t\t\t\tobjEmpty = {\n\t\t\t\t\t\tprojectNumber: 0,\n\t\t\t\t\t\tapprovedMoney: 0\n\t\t\t\t\t},\n\t\t\t\tterritoryKey,\n\t\t\t\t// cache hasOwnProperty\n\t\t\t\thasProperty = Object.prototype.hasOwnProperty,\n\t\t\t\ttype\n\n\t\t\t// data.objects = ( data && data.objects ) || [];\n\t\t\t\n\t\t\t// New strategy: load the polygon list, then\n\t\t\t// the redrawPolygons draw the pins if there\n\t\t\t// are pushpins to draw.\n\t\t\t\n\t\t\tpushpins = []\n\n\t\t\t//Projects\n\t\t\tif( data.objects ){\n\t\t\t\ttype = 'info'\n\t\t\t\tfor(i = data.objects.length; i--;){\n\t\t\t\t\tobj = data.objects[i]\n\t\t\t\t\tif(obj.type == 'municipio'){\n\t\t\t\t\t\tarrayMunicipalities[obj.id] = obj\n\t\t\t\t\t\tarrayMunicipalities.length += 1\n\t\t\t\t\t}\n\t\t\t\t\telse if(obj.type == 'departamento'){\n\t\t\t\t\t\tarrayDepartments[obj.id] = obj\n\t\t\t\t\t\tarrayDepartments.length += 1\n\t\t\t\t\t}\n\t\t\t\t\telse if(obj.type == 'region'){\n\t\t\t\t\t\tarrayRegions[obj.id] = obj\n\t\t\t\t\t\tarrayRegions.length += 1\n\t\t\t\t\t}else{\n\t\t\t\t\t\t// Stored for future draw\n\t\t\t\t\t\tpushpins.push(new Pushpin(obj, map, self))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Clear infoboxes in polygons\n\n\n\t\t\t// Resources\n\t\t\tif( data.detalleRecursos ){\n\t\t\t\ttype = 'resource'\n\t\t\t\tfor(i = data.detalleRecursos.length; i--;){\n\t\t\t\t\tobj = data.detalleRecursos[i]\n\t\t\t\t\tif(obj.TipoEntidad == 'municipio'){\n\t\t\t\t\t\tarrayMunicipalities[obj.IdEntidad] = obj\n\t\t\t\t\t\tarrayMunicipalities.length += 1\n\t\t\t\t\t}\n\t\t\t\t\telse if(obj.TipoEntidad == 'departamento'){\n\t\t\t\t\t\tarrayDepartments[obj.IdEntidad] = obj\n\t\t\t\t\t\tarrayDepartments.length += 1\n\t\t\t\t\t}\n\t\t\t\t\telse if(obj.TipoEntidad == 'region'){\n\t\t\t\t\t\tarrayRegions[obj.IdEntidad] = obj\n\t\t\t\t\t\tarrayRegions.length += 1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( !data.detalleRecursos.length ){\n\t\t\t\t\t// Clean all infoboxes\n\t\t\t\t\t// Regions\n\t\t\t\t\tfor( territoryKey in polygonsMap.regions ) {\n\t\t\t\t\t\tif( hasProperty.call( polygonsMap.regions, territoryKey ) ){\n\t\t\t\t\t\t\tpolygon = polygonsMap.regions[ territoryKey ]\n\t\t\t\t\t\t\t_applyToPolygon(polygon, [], type)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Departments\n\t\t\t\t\tfor( territoryKey in polygonsMap.departments ) {\n\t\t\t\t\t\tif( hasProperty.call( polygonsMap.departments, territoryKey ) ){\n\t\t\t\t\t\t\tpolygon = polygonsMap.departments[ territoryKey ]\n\t\t\t\t\t\t\t_applyToPolygon(polygon, [], type)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Municipalities\n\t\t\t\t\tfor( territoryKey in polygonsMap.municipalities ) {\n\t\t\t\t\t\tif( hasProperty.call( polygonsMap.municipalities, territoryKey ) ){\n\t\t\t\t\t\t\tpolygon = polygonsMap.municipalities[ territoryKey ]\n\t\t\t\t\t\t\t_applyToPolygon(polygon, [], type)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tviewMode = self.actualVisualization()\n\t\t\t\tnoPolygonFlag = false\n\t\t\t}\n\n\t\t\t// Resources Pushpins\n\t\t\tif( data.pushPinsRecursos ){\n\t\t\t\tfor(i = data.pushPinsRecursos.length; i--;){\n\t\t\t\t\tobj = data.pushPinsRecursos[i]\n\t\t\t\t\tobj = normalizeResourceObject( obj )\n\t\t\t\t\t// Stored for future draw\n\t\t\t\t\tpushpins.push(new Pushpin(obj, map, self))\n\t\t\t\t}\n\t\t\t\t// noPolygonFlag = false\n\t\t\t\t// viewMode = self.actualVisualization()\n\t\t\t}\n\n\t\t\t// Production\n\t\t\tif( data.Detalles ){\n\t\t\t\ttype = 'production'\n\t\t\t\t// debugger;\n\t\t\t\tfor(i = data.Detalles.length; i--;){\n\t\t\t\t\tobj = data.Detalles[i]\n\t\t\t\t\tif( obj.TipoInfografico == 'G' ){\n\t\t\t\t\t\tif(obj.TipoEntidad == 'municipio'){\n\t\t\t\t\t\t\tarrayMunicipalities[obj.IdEntidad] = obj\n\t\t\t\t\t\t\tarrayMunicipalities.length += 1\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(obj.TipoEntidad == 'departamento'){\n\t\t\t\t\t\t\tarrayDepartments[obj.IdEntidad] = obj\n\t\t\t\t\t\t\tarrayDepartments.length += 1\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(obj.TipoEntidad == 'region'){\n\t\t\t\t\t\t\tarrayRegions[obj.IdEntidad] = obj\n\t\t\t\t\t\t\tarrayRegions.length += 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tobj = data.Detalles[i]\n\t\t\t\t\t\tobj = normalizeResourceObject( obj )\n\t\t\t\t\t\t// Stored for future draw\n\t\t\t\t\t\tpushpins.push(new Pushpin(obj, map, self))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( !data.Detalles.length ){\n\t\t\t\t\t// Clean all infoboxes\n\t\t\t\t\t// Regions\n\t\t\t\t\tfor( territoryKey in polygonsMap.regions ) {\n\t\t\t\t\t\tif( hasProperty.call( polygonsMap.regions, territoryKey ) ){\n\t\t\t\t\t\t\tpolygon = polygonsMap.regions[ territoryKey ]\n\t\t\t\t\t\t\t_applyToPolygon(polygon, [], type)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Departments\n\t\t\t\t\tfor( territoryKey in polygonsMap.departments ) {\n\t\t\t\t\t\tif( hasProperty.call( polygonsMap.departments, territoryKey ) ){\n\t\t\t\t\t\t\tpolygon = polygonsMap.departments[ territoryKey ]\n\t\t\t\t\t\t\t_applyToPolygon(polygon, [], type)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Municipalities\n\t\t\t\t\tfor( territoryKey in polygonsMap.municipalities ) {\n\t\t\t\t\t\tif( hasProperty.call( polygonsMap.municipalities, territoryKey ) ){\n\t\t\t\t\t\t\tpolygon = polygonsMap.municipalities[ territoryKey ]\n\t\t\t\t\t\t\t_applyToPolygon(polygon, [], type)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tviewMode = self.actualVisualization()\n\t\t\t\tnoPolygonFlag = false\n\t\t\t}\n\t\t\t\n\t\t\t// Fiscalizacion Pushpins\n\t\t\tif( data.detalleFiscalizacion ){\n\t\t\t\ttype = 'fiscalization'\n\t\t\t\t//debugger;\n\t\t\t\tfor(i = data.detalleFiscalizacion.length; i--;){\n\t\t\t\t\tobj = data.detalleFiscalizacion[i]\n\n\t\t\t\t\tif( obj.TipoInfografico == 'G' ){\n\t\t\t\t\t\tif(obj.TipoEntidad == 'municipio'){\n\t\t\t\t\t\t\tarrayMunicipalities[obj.IdEntidad] = obj\n\t\t\t\t\t\t\tarrayMunicipalities.length += 1\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(obj.TipoEntidad == 'departamento'){\n\t\t\t\t\t\t\tarrayDepartments[obj.IdEntidad] = obj\n\t\t\t\t\t\t\tarrayDepartments.length += 1\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(obj.TipoEntidad == 'region'){\n\t\t\t\t\t\t\tarrayRegions[obj.IdEntidad] = obj\n\t\t\t\t\t\t\tarrayRegions.length += 1\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tobj = data.detalleFiscalizacion[i]\n\t\t\t\t\t\tobj = normalizeResourceObject( obj )\n\t\t\t\t\t\t// Stored for future draw\n\t\t\t\t\t\tpushpins.push(new Pushpin(obj, map, self))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif( !data.detalleFiscalizacion.length ){\n\t\t\t\t\t// Clean all infoboxes\n\t\t\t\t\t// Regions\n\t\t\t\t\tfor( territoryKey in polygonsMap.regions ) {\n\t\t\t\t\t\tif( hasProperty.call( polygonsMap.regions, territoryKey ) ){\n\t\t\t\t\t\t\tpolygon = polygonsMap.regions[ territoryKey ]\n\t\t\t\t\t\t\t_applyToPolygon(polygon, [], type)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Departments\n\t\t\t\t\tfor( territoryKey in polygonsMap.departments ) {\n\t\t\t\t\t\tif( hasProperty.call( polygonsMap.departments, territoryKey ) ){\n\t\t\t\t\t\t\tpolygon = polygonsMap.departments[ territoryKey ]\n\t\t\t\t\t\t\t_applyToPolygon(polygon, [], type)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Municipalities\n\t\t\t\t\tfor( territoryKey in polygonsMap.municipalities ) {\n\t\t\t\t\t\tif( hasProperty.call( polygonsMap.municipalities, territoryKey ) ){\n\t\t\t\t\t\t\tpolygon = polygonsMap.municipalities[ territoryKey ]\n\t\t\t\t\t\t\t_applyToPolygon(polygon, [], type)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tviewMode = self.actualVisualization()\n\t\t\t\tnoPolygonFlag = false\n\t\t\t}\n\n\t\t\t// Manage Async Loading of Polygons\n\t\t\tif( arrayDepartments.length || arrayRegions.length ){\n\t\t\t\t// Departments\n\t\t\t\tif( polygonsMap.departments && arrayDepartments.length ){\n\t\t\t\t\tfor( territoryKey in polygonsMap.departments ) {\n\t\t\t\t\t\tif( hasProperty.call( polygonsMap.departments, territoryKey ) ){\n\t\t\t\t\t\t\tpolygon = polygonsMap.departments[ territoryKey ]\n\t\t\t\t\t\t\tif( polygon instanceof Polygon ){\n\t\t\t\t\t\t\t\t_applyToPolygon(polygon, arrayDepartments, type)\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tfor(j=0; j<polygon.length; j++){\n\t\t\t\t\t\t\t\t\t_applyToPolygon(polygon[j], arrayDepartments, type)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else if( arrayDepartments.length ){\n\t\t\t\t\t// If no polygons... manage flag to call this funcion again!!!\n\t\t\t\t\tpendingStateChange = { departments: function(){\n\t\t\t\t\t\t\tstateChange( data )\n\t\t\t\t\t\t} }\n\t\t\t\t}\n\t\t\t\t// Regions\n\t\t\t\tif( polygonsMap.regions && arrayRegions.length ){\n\t\t\t\t\tfor( territoryKey in polygonsMap.regions ) {\n\t\t\t\t\t\tif( hasProperty.call( polygonsMap.regions, territoryKey ) ){\n\t\t\t\t\t\t\tpolygon = polygonsMap.regions[ territoryKey ]\n\t\t\t\t\t\t\tid = polygon.id\n\t\t\t\t\t\t\tobj = arrayRegions[ id ]\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif( polygon instanceof Polygon ){\n\t\t\t\t\t\t\t\t_applyToPolygon(polygon, arrayRegions, type)\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tfor(j=0; j<polygon.length; j++){\n\t\t\t\t\t\t\t\t\t_applyToPolygon(polygon[j], arrayRegions, type)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else if( arrayRegions.length ){\n\t\t\t\t\t// If no polygons... manage flag to call this funcion again!!!\n\t\t\t\t\tpendingStateChange = { regions: function(){\n\t\t\t\t\t\t\tstateChange( data )\n\t\t\t\t\t\t} }\n\t\t\t\t}\n\t\t\t\tviewMode = self.actualVisualization()\n\t\t\t\tnoPolygonFlag = false\n\t\t\t}\n\n\t\t\t// Municipalities\n\t\t\tif( arrayMunicipalities.length && polygons.municipalities ){\n\t\t\t\t// Tricky now I have to paint only the municipalities that are\n\t\t\t\t// passed in the response\n\t\t\t\tpolygons.municipalities.clear()\n\t\t\t\tif( polygonsMap.municipalities && arrayMunicipalities.length ){\n\t\t\t\t\tfor( territoryKey in arrayMunicipalities ){\n\t\t\t\t\t\tif( hasProperty.call( arrayMunicipalities, territoryKey ) ){\n\t\t\t\t\t\t\tpolygon = polygonsMap.municipalities[ territoryKey ]\n\t\t\t\t\t\t\tif( polygon instanceof Polygon ){\n\t\t\t\t\t\t\t\tpolygon.generatePolygon()\n\t\t\t\t\t\t\t\tpolygons.municipalities.push(polygon.getPolygon())\n\t\t\t\t\t\t\t\t_applyToPolygon(polygon, arrayMunicipalities, type)\n\t\t\t\t\t\t\t}else if( polygon instanceof Array ){ // length is own property :/\n\t\t\t\t\t\t\t\tfor(j=0; j<polygon.length; j++){\n\t\t\t\t\t\t\t\t\tpolygon[j].generatePolygon()\n\t\t\t\t\t\t\t\t\tpolygons.municipalities.push(polygon[j].getPolygon())\n\t\t\t\t\t\t\t\t\t_applyToPolygon(polygon[j], arrayMunicipalities, type)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tviewMode = 'Municipality'\n\t\t\t\tnoPolygonFlag = false\n\n\t\t\t}else if( arrayMunicipalities.length ){\n\t\t\t\t// If no polygons... manage flag to call this funcion again!!!\n\t\t\t\tpendingStateChange = { municipalities: function(){\n\t\t\t\t\t\tstateChange( data )\n\t\t\t\t\t} }\n\t\t\t}\n\n\t\t\t$('#filter-results .value').html(data.totalProjectsNumber)\n\n\t\t\tif(noPolygonFlag) viewMode = ''\n\t\t\t\n\t\t\tredrawPolygons()\n\t\t}\n\n\t\t/**\n\t\t * This function manages the logic of\n\t\t * the zooming\n\t\t */\n\t\tfunction redrawPolygons(){\n\t\t\tvar i\n\n\t\t\tclearTimeout( timeoutPolygonsRedraw )\n\t\t\ttimeoutPolygonsRedraw = setTimeout( function() {\n\n\t\t\t\tvar cleared\n\t\t\t\tif( viewMode == 'Department' || viewMode == 'Region' ){\n\t\t\t\t\t//Check if the region polygons are already on the map\n\t\t\t\t\tif( ( renderedMode != 'Region' && renderedMode != 'Department') ||\n\t\t\t\t\t\tself.actualVisualization() != renderedMode ){\n\t\t\t\t\t\t//Then check if we already have the regions polygons\n\t\t\t\t\t\t//they are being loading by defer loading and\n\t\t\t\t\t\t//will be drawed later\n\t\t\t\t\t\t// debugger;\n\t\t\t\t\t\tif( self.actualVisualization() == 'Region' &&\n\t\t\t\t\t\t\tpolygons.regions ){\n\t\t\t\t\t\t\trenderedMode = self.actualVisualization()\n\t\t\t\t\t\t\tmap.entities.clear()\n\t\t\t\t\t\t\tcleared = true\n\t\t\t\t\t\t\tmap.entities.push(polygons.regions)\n\t\t\t\t\t\t\tmap.entities.push(infoboxes.regions)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif( self.actualVisualization() == 'Department' &&\n\t\t\t\t\t\t\tpolygons.departments ){\n\t\t\t\t\t\t\trenderedMode = self.actualVisualization()\n\t\t\t\t\t\t\tmap.entities.clear()\n\t\t\t\t\t\t\tcleared = true\n\t\t\t\t\t\t\tmap.entities.push(polygons.departments)\n\t\t\t\t\t\t\tmap.entities.push(infoboxes.departments)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//At the end municipalities\n\t\t\t\telse if( viewMode == 'Municipality' ){\n\t\t\t\t\tif( renderedMode != 'Municipality' &&\n\t\t\t\t\t\tpolygons.municipalities ){\n\t\t\t\t\t\trenderedMode = 'Municipality'\n\t\t\t\t\t\tmap.entities.clear()\n\t\t\t\t\t\tcleared = true\n\t\t\t\t\t\tmap.entities.push(polygons.municipalities)\n\t\t\t\t\t\tmap.entities.push(infoboxes.municipalities)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//No polygons in these levels of zoom\n\t\t\t\telse{\n\t\t\t\t\trenderedMode = ''\n\t\t\t\t}\n\n\t\t\t\t//Draw PushPins\n\t\t\t\t// map.entities.remove( pushpinsContainer )\n\t\t\t\tpushpinsContainer.clear()\n\t\t\t\t// debugger;\n\t\t\t\tvar info\n\t\t\t\tfor(i = pushpins.length; i--;){\n\t\t\t\t\tinfo = pushpins[i]._infobox && pushpins[i]._infobox._content\n\t\t\t\t\t// Maybe this doesn't go any more\n\t\t\t\t\tif( info && (info.isProduction || info.isFiscalization) ){\n\t\t\t\t\t\tif( info.type == 'departamento' ||\n\t\t\t\t\t\t\tinfo.type == 'region'){\n\t\t\t\t\t\t\tif( info.type == 'departamento' &&\n\t\t\t\t\t\t\t\tself.actualVisualization() == 'Department' ){\n\t\t\t\t\t\t\t\tpushpinsContainer.push( pushpins[i] )\n\t\t\t\t\t\t\t}else if( info.type == 'region' &&\n\t\t\t\t\t\t\t\tself.actualVisualization() == 'Region' ){\n\t\t\t\t\t\t\t\tpushpinsContainer.push( pushpins[i] )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tpushpinsContainer.push( pushpins[i] )\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tpushpinsContainer.push( pushpins[i] )\n\t\t\t\t\t}\n\t\t\t\t\t// if( ( info.type &&\n\t\t\t\t\t// \t( info.type.toLowerCase() ==\n\t\t\t\t\t// \tself.actualVisualization().toLowerCase() ) ) ||\n\t\t\t\t\t// \t!info.type ){\n\t\t\t\t\t// \tpushpinsContainer.push( pushpins[i] )\n\t\t\t\t\t// }\n\t\t\t\t}\n\n\t\t\t\tif( !firstTime ){\n\t\t\t\t\tmap.entities.remove( pushpinsContainer )\n\t\t\t\t}\n\t\t\t\tmap.entities.push( pushpinsContainer )\n\n\t\t\t\tfirstTime = false\n\t\t\t}, 100)\n\t\t}\n\n\t\tfunction changeToListMode(){\n\t\t\tAppState.setListMode( true )\n\t\t}\n\t\t\n\t\t//::: Initialization :::\n\t\t\n\t\t// Not necessary \n\t\t// Microsoft.Maps.loadModule('Microsoft.Maps.Themes.BingTheme', { callback: themesModuleLoaded });\n\t\tthemesModuleLoaded()\n\n\t\t//::: Legend :::\n\t\t;(function initLegend(){\n\t\t\tfunction drawCircle( color, selector ){\n\t\t\t\tvar paper = Raphael($(selector)[0], 12, 12)\n\t\t\t\tpaper.circle(6, 6, Math.round(5)).attr({\n\t\t\t\t\tfill: color,\n\t\t\t\t\tstroke: color\n\t\t\t\t})\n\t\t\t\tpaper.circle(6, 6, Math.round(4)).attr({\n\t\t\t\t\tfill: color,\n\t\t\t\t\tstroke: '#fff',\n\t\t\t\t\t'stroke-width': 1\n\t\t\t\t})\n\t\t\t}\n\t\t\t// drawCircle('#EC008E', '.legend-resources_type-region')\n\t\t\tdrawCircle('#29ADEE', '.legend-resources_type-department')\n\t\t\tdrawCircle('#F8921C', '.legend-resources_type-municipality')\n\t\t}());\n\n\t\t// Knockout Bindings And Observables\n\t\tself.isRegion = ko.computed( function () {\n\t\t\treturn self.actualVisualization() == 'Region'\n\t\t}, self.actualVisualization)\n\n\t\tself.toggleMode = function (data, evt) {\n\t\t\tvar array, max = 0, min = 0, i, territory\n\n\t\t\tself.fireEvent('changing-view-mode')\n\t\t\tself.hideInfoboxes()\n\t\t\tself.actualVisualization(\n\t\t\t\tself.actualVisualization() == 'Region' ?\n\t\t\t\t'Department' : 'Region'\n\t\t\t\t)\n\n\t\t\tself.hideInfoboxes()\n\t\t\tredrawPolygons()\n\n\t\t\tif(self.actualVisualization() == 'Department'){\n\t\t\t\tarray = polygonsInfoData.departments\n\t\t\t}else{\n\t\t\t\tarray = polygonsInfoData.regions\n\t\t\t}\n\t\t\tfor(i=0; i<array.length; i++){\n\t\t\t\tterritory = array[i]\n\t\t\t\tmax = Math.max(max, territory.approvedMoney)\n\t\t\t\t// min = Math.min(min, territory.approvedMoney)\n\t\t\t}\n\t\t}\n\t\tko.applyBindings(self, $('#map-view-options .change-view-mode')[0])\n\t\t// ko.applyBindings(self, $('#map-legend')[0])\n\n\t\tthis.zoomToTerritory = function(type, options){\n\t\t\tvar polygons,\n\t\t\t\tleftTopPoint, rightBottomPoint, groupPoints,\n\t\t\t\tlocationRect,\n\t\t\t\tfirstPolygon,\n\t\t\t\tpolygonGroup,\n\t\t\t\tcorners,\n\t\t\t\ttargetBounds\n\t\t\t\n\t\t\tif( type instanceof Polygon ){\n\t\t\t\tfirstPolygon = type\n\t\t\t}else{\n\t\t\t\tif( !options.length ) return;\n\n\t\t\t\tif(type == 'municipio') polygons = polygonsMap.municipalities\n\t\t\t\telse if(type == 'departamento') polygons = polygonsMap.departments\n\t\t\t\telse polygons = polygonsMap.regions\n\n\t\t\t\t//NOTE zoom to territory must be call when all polygons are loaded!!!\n\t\t\t\tif( !polygons ){\n\t\t\t\t\tthis.on('polygons-initialized', function( typeLoaded ){\n\t\t\t\t\t\tif( typeLoaded == type ){\n\t\t\t\t\t\t\tself.zoomToTerritory( type, options )\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tfirstPolygon = polygons[ options[0].value ]\n\t\t\t\t\n\t\t\t\tif( !firstPolygon ) return\n\n\t\t\t\tif( firstPolygon instanceof Array ){\n\t\t\t\t\tfirstPolygon = firstPolygon[0]\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tgroupPoints = firstPolygon.getCoordinates()\n\n\t\t\tif( options ){\n\t\t\t\tfor(var i=1; i<options.length; i++){\n\t\t\t\t\tfirstPolygon = polygons[ options[i].value ]\n\t\t\t\t\tcorners = firstPolygon.getCoordinates()\n\n\t\t\t\t\tif( firstPolygon instanceof Array ){\n\t\t\t\t\t\tfirstPolygon = firstPolygon[0]\n\t\t\t\t\t}\n\n\t\t\t\t\tgroupPoints = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlatitude: Math.min(corners[0].latitude, groupPoints[0].latitude),\n\t\t\t\t\t\t\tlongitude: Math.min(corners[0].longitude, groupPoints[0].longitude)\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlatitude: Math.max(corners[1].latitude, groupPoints[1].latitude),\n\t\t\t\t\t\t\tlongitude: Math.max(corners[1].longitude, groupPoints[1].longitude)\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlocationRect = new Microsoft.Maps.LocationRect.fromCorners(\n\t\t\t\tnew Microsoft.Maps.Location( groupPoints[0].latitude, groupPoints[0].longitude),\n\t\t\t\tnew Microsoft.Maps.Location( groupPoints[1].latitude, groupPoints[1].longitude) )\n\n\t\t\t// console.log(zoomLevel)\n\t\t\tif(groupPoints[0].latitude && groupPoints[0].longitude && groupPoints[1].latitude && groupPoints[1].longitude){\n\t\t\t\t// console.log('setview',locationRect)\n\t\t\t\t\n\t\t\t\tmap.setView({bounds: locationRect})\n\n\t\t\t\ttargetBounds = map.getTargetBounds()\n\t\t\t\t// console.log('setview',map.getTargetZoom())\n\t\t\t\tAppState.setZoomAndCorners({\n\t\t\t\t\tzoom: map.getTargetZoom(),\n\t\t\t\t\tcorners: [\n\t\t\t\t\t\t[targetBounds.getNorth(),targetBounds.getWest()],\n\t\t\t\t\t\t[targetBounds.getSouth(),targetBounds.getEast()]\n\t\t\t\t\t],\n\t\t\t\t\tcenter: [targetBounds.center.latitude,targetBounds.center.longitude]\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tif( console && console.error && typeof console.error == 'function'){\n\t\t\t\t\tconsole.error('Territory without bounds', [groupPoints[0].latitude,groupPoints[0].latitude],[groupPoints[1][0],groupPoints[1].longitude])\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Show Infobox for Municipalities\n\t\t\tif( type == 'municipio' ){\n\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tvar dummyEvent = {}\n\t\t\t\t\tdummyEvent.originalEvent = {}\n\t\t\t\t\tdummyEvent.pageX =\n\t\t\t\t\t\tdummyEvent.originalEvent.x =\n\t\t\t\t\t\t\t$(window).width()/2\n\t\t\t\t\tdummyEvent.pageY =\n\t\t\t\t\t\tdummyEvent.originalEvent.y =\n\t\t\t\t\t\t\t$('#map-div').height()/2 + $('#header').height()\n\t\t\t\t\tfirstPolygon.getInfobox().show( dummyEvent )\n\t\t\t\t}, 2000)\n\t\t\t}\n\t\t\t// AppState.setCorners()\n\t\t\t//console.log(2)\n\t\t}\n\n\t\tthis.hideInfoboxes = function(){\n\t\t\tvar set, key, i, info \n\n\t\t\tfor( key in infoboxes ){\n\t\t\t\tif( infoboxes.hasOwnProperty( key ) ){\n\t\t\t\t\tset = infoboxes[ key ]\n\t\t\t\t\tif( set ){\n\t\t\t\t\t\tfor(i = set.getLength(); i--; ){\n\t\t\t\t\t\t\tset.get(i).hide()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(i=0 ; i < pushpins.length; i++){\n\t\t\t\tinfo = pushpins[i]._infobox\n\t\t\t\tif( info ){\n\t\t\t\t\tinfo.hide()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.panTo = panTo\n\n\t\tthis.viewGroupList = function( dataGroup ){\n\t\t\tAppState.setZoomAndCorners(\n\t\t\t\t\t{\tcorners: [\n\t\t\t\t\t\t\t[dataGroup.latitude, dataGroup.longitude],\n\t\t\t\t\t\t\t[dataGroup.latitude, dataGroup.longitude]\n\t\t\t\t\t\t],\n\t\t\t\t\t\tcenter: [dataGroup.latitude, dataGroup.longitude]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tisGroupList: true\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t}\n\n\t\t// Post-definition listeners\n\t\tAppState.on('projects-list-loaded', this.hideInfoboxes.bind(this))\n\t}\n\n\tMap.prototype = new Observable()\n\n\n\tfunction calculateOpacity(centimal){\n\t\treturn ( 0.15 + 0.5 * centimal ).toFixed(2)\n\t}\n\n\treturn new Map()\n});\n","/*global define*/\ndefine( 'app/utils/allColors',[],function(){\n\treturn [\n\t\t'#6dcff6',\n\t\t'#00bff3',\n\t\t'#00adef',\n\t\t'#0077a2',\n\t\t'#00746b',\n\t\t'#01a89e',\n\t\t'#1cbcb4',\n\t\t'#7accc8',\n\t\t'#82ca9c',\n\t\t'#3cb879',\n\t\t'#00a652',\n\t\t'#197b30',\n\t\t'#598526',\n\t\t'#8ec63f',\n\t\t'#c4df9c',\n\t\t'#fff568',\n\t\t'#fef200',\n\t\t'#aca000',\n\t\t'#f7941d',\n\t\t'#fbae5c',\n\t\t'#f36523',\n\t\t'#f25103',\n\t\t'#f2361d',\n\t\t'#f24257',\n\t\t'#ee1475',\n\t\t'#a72c7d',\n\t\t'#662e91',\n\t\t'#2e3192',\n\t\t'#014a81',\n\t\t'#458ccc',\n\t\t'#014a81',\n\t\t'#2e3192',\n\t\t'#662e91',\n\t\t'#a72c7d',\n\t\t'#ee1475',\n\t\t'#f24257',\n\t\t'#f2361d',\n\t\t'#f25103',\n\t\t'#f36523',\n\t\t'#fbae5c',\n\t\t'#f7941d',\n\t\t'#aca000',\n\t\t'#fef200',\n\t\t'#fff568',\n\t\t'#c4df9c',\n\t\t'#8ec63f',\n\t\t'#598526',\n\t\t'#197b30',\n\t\t'#00a652',\n\t\t'#3cb879',\n\t\t'#82ca9c',\n\t\t'#7accc8',\n\t\t'#1cbcb4',\n\t\t'#01a89e',\n\t\t'#00746b',\n\t\t'#0077a2',\n\t\t'#00adef',\n\t\t'#00bff3',\n\t\t'#6dcff6'\n\t]\n});\n","/*global Raphael, define*/\ndefine('app/grapher/Grapher',['app/utils/allColors'], function( allColors ){\n\tvar sectorColors = allColors,\n\t\tregionsColors = [\n\t\t\t'#FBA74D',\n\t\t\t'#2280A2',\n\t\t\t'#3BB778',\n\t\t\t'#1CC1B3',\n\t\t\t'#8EC63F',\n\t\t\t'#fff568',\n\t\t\t'#f36523'\n\t\t]\n\n\tfunction drawSemiPie(elem, radius, data, labels, colors, noCurrency){\n\t\tvar r = Raphael(elem, radius*2.2, radius*2.2),\n\t\t\tpie, dataNumber = [], i,\n\t\t\tdataLabel = [],\n\t\t\topts = {\n\t\t\t\tstartFromFixedAngle: 90,\n\t\t\t\tlabels: labels,\n\t\t\t\tminPercent: 0.00001\n\t\t\t}\n\n\t\tif(!data)\n\t\t\treturn\n\n\t\tif( colors ){\n\t\t\topts.colors = colors,\n\t\t\topts.stroke = colors\n\t\t}else{\n\t\t\tif(data.length > regionsColors.length){\n\t\t\t\topts.colors = sectorColors\n\t\t\t\topts.stroke = sectorColors\n\t\t\t}else{\n\t\t\t\topts.colors = regionsColors\n\t\t\t\topts.stroke = regionsColors\n\t\t\t}\n\t\t}\n\n\t\tfor(i=0; i<data.length; i++){\n\t\t\tdataNumber[i] = data[i].rawValue\n\t\t\tif( typeof data[i].value == 'Number'||\n\t\t\t\tdata[i].value.indexOf('%') == -1 ){\n\t\t\t\tdata[i].value +='%'\n\t\t\t}\n\t\t\tdataLabel[i] = data[i].value\n\t\t}\n\n\t\tpie = r.semiPiechart(radius*1.1, radius*1.1, radius, dataNumber, opts, dataLabel)\n\n\t\tpie.hover(function () {\n\t\t\tthis.sector.stop();\n\t\t\tthis.sector.animate({ transform: 's1.1 1.1 ' + this.cx + ' ' + this.cy }, 100/*, 'bounce'*/);\n\t\t\t// if(!this.pop)\n\t\t\tthis.pop = createPopup(\n\t\t\t\tthis.sector, data[this.sector.value.order].label + ' - ' +\n\t\t\t\t\tdata[this.sector.value.order].value + '<br />'+\n\t\t\t\t\t(noCurrency ? data[this.sector.value.order].rawValue : data[this.sector.value.order].rawValue.toCurrency()),\n\t\t\t\tlabels ? 19 : 44)\n\t\t\tthis.pop.show()\n\t\t}, function () {\n\t\t\tthis.sector.animate({ transform: 's1 1 ' + this.cx + ' ' + this.cy }, 200/*, 'bounce'*/);\n\t\t\tthis.pop.remove()\n\t\t});\n\n\t\treturn pie\n\t}\n\n\tfunction drawBars(elem, data, labels, opts){\n\t\tvar barGraph,\n\t\t\twidth = elem.offsetWidth,\n\t\t\theight,\n\t\t\tr = Raphael(elem, width, height)\n\t\t\n\t\topts = opts || {}\n\n\t\theight = opts.height || width * 0.577\n\n\t\tif( !data )\n\t\t\treturn\n\t\t\n\t\topts.colors = opts.colors || sectorColors\n\n\t\tif( width < 150 || height < 100) return\n\t\t\t\n\t\tbarGraph = r.barchart(50, 10, width - 100, height - 50, data, opts)\n\n\t\tbarGraph.hover(function () {\n\t\t\tvar raw = data[this.bar.value.order].rawValue\n\t\t\tthis.bar.stop();\n\t\t\tthis.bar.animate({ transform: 's1.1 1 ' + this.cx + ' ' + this.cy }, 100/*, 'bounce'*/);\n\t\t\t// if(!this.pop)\n\t\t\tif(!opts.invertedData){\n\t\t\t\tthis.pop = createPopup(this.bar, data[this.bar.value.order].label +\n\t\t\t\t\t' - ' + data[this.bar.value.order].value +\n\t\t\t\t\t'<br>' + raw.toCurrency().replace(/\\$\\s*/,''), 0, -20)\n\t\t\t}else{\n\t\t\t\tthis.pop = createPopup(this.bar, data[this.bar.value.order].label.replace(/(HIDROCARBURO|MINERAL)_FISCALIZADOS$/i,'$1').replace(/_/g,' ') +\n\t\t\t\t\t'<br>' + raw +\n\t\t\t\t\t'%<br>(' + data[this.bar.value.order].value.toCurrency().replace(/\\$\\s*/,'') + ')', 0, -20)\n\t\t\t}\n\t\t\tthis.pop.show()\n\t\t}, function () {\n\t\t\tthis.bar.animate({ transform: 's1 1 ' + this.cx + ' ' + this.cy }, 200/*, 'bounce'*/);\n\t\t\tthis.pop.remove()\n\t\t})\n\n\t\tif( labels ){\n\t\t\t//Labels\n\t\t\tr.text(width/2, height - 45, labels[0]).attr({\n\t\t\t\t'text-anchor': 'middle',\n\t\t\t\t'fill': '#777',\n\t\t\t\t'font-size': '11px'\n\t\t\t})\n\t\t\tr.text(8, height/2, labels[1]).attr({\n\t\t\t\t'text-anchor': 'middle',\n\t\t\t\t'fill': '#777',\n\t\t\t\t'font-size': '11px'\n\t\t\t}).rotate(-90)\n\t\t}\n\t}\n\n\tfunction createPopup(node, htmlContent, hMargin, vMargin){\n\t\tvar popUp = $('<div>',{'class': 'graph-tooltip'}).html(htmlContent)\n\n\t\tvMargin = vMargin || 0\n\t\thMargin = hMargin || 0\n\n\t\tpopUp.appendTo(document.body)\n\t\t// debugger;\n\t\tpopUp.css({\n\t\t\ttop: $(node.paper.canvas).offset().top + node.getBBox().y - popUp[0].offsetHeight + vMargin,\n\t\t\tleft: $(node.paper.canvas).offset().left + node.getBBox().x + node.getBBox().width/2 + hMargin,\n\t\t\tdisplay: 'none'\n\t\t})\n\n\t\treturn popUp\n\t}\n\n\treturn {\n\t\tdrawSemiPie: drawSemiPie,\n\t\tdrawBars: drawBars\n\t}\n});\n","/*global doT, define*/\ndefine('app/infographic/Infographic',[\n\t'app/controller/AppState',\n\t'app/controller/appStates',\n\t'app/grapher/Grapher',\n\t'app/network/Services'\n\t],\n\tfunction(\n\t\tAppState,\n\t\tappStates,\n\t\tGrapher,\n\t\tServices\n\t){\n\n\tfunction byId( id ){\n\t\treturn document.getElementById( id )\n\t}\n\n\tvar // Zones\n\t\ttopZone = byId('top-graphs'),\n\t\tbottomZone = byId('bottom-graphs'),\n\t\tfactsElem = $('.facts'),\n\t\t// Body Data\n\t\tdataResourcesPerSector = JSON.parse(document.body.getAttribute('data-resourcesPerSector')),\n\t\tdataResourcesPerRegion = JSON.parse(document.body.getAttribute('data-resourcesPerRegion')),\n\t\tdataProjectsPerSector = JSON.parse(document.body.getAttribute('data-projectsPerSector')),\n\t\tdataResourcesPerDepartment = JSON.parse(document.body.getAttribute('data-resourcesPerDepartment')),\n\t\tdataFacts = factsElem[0].getAttribute('data-facts').split('||'),\n\t\t// Templates\n\t\ttmplDepto = doT.compile($('#template-graph-resdepto')[0].innerHTML),\n\t\ttmplResources = doT.compile($('#template-graph-prod-res')[0].innerHTML),\n\t\tfactsTempl = doT.compile($('#template-facts')[0].innerHTML),\n\n\t\t// Static Templates\n\t\ttemplateTopProjects = byId('top-graphs-projects').innerHTML,\n\t\ttemplateBottomProjects = byId('bottom-graphs-projects').innerHTML,\n\t\ttemplateTopResources = byId('top-graphs-resources').innerHTML,\n\t\ttemplateBottomResources = byId('bottom-graphs-resources').innerHTML,\n\t\ttemplateTopProduction = byId('top-graphs-production').innerHTML,\n\t\ttemplateBottomProduction = byId('bottom-graphs-production').innerHTML,\n\t\ttemplateTopFiscalization = byId('top-graphs-fiscalization').innerHTML,\n\t\ttemplateBottomFiscalization = byId('bottom-graphs-fiscalization').innerHTML,\n\t\ttemplateFacsResources,\n\t\ttemplateFacsProyects,\n\t\ttemplateFacsProduction,\n\t\ttemplateFacsFiscalizacion,\n\t\t// Stuff\n\t\troot = $('#infographic'),\n\t\tfirstTime = true,\n\t\tparsedFacts = {\n\t\t\t'Recursos': [],\n\t\t\t'Proyectos': [],\n\t\t\t'Produccion': [],\n\t\t\t'Fiscalizacion': []\n\t\t},\n\t\tfact,\n\t\temptyHTMLBox = '<div class=\"empty\">No hay datos para este periodo.</div>',\n\t\tpendingRequest,\n\t\tresToumeout1,\n\t\tresToumeout2,\n\t\tresToumeout3,\n\t\tresToumeout4,\n\t\tprodToumeout1,\n\t\tprodToumeout2,\n\t\tprodToumeout3,\n\t\tprodToumeout4,\n\t\tproyToumeout1,\n\t\tproyToumeout2,\n\t\tproyToumeout3,\n\t\tproyToumeout4,\n\t\tfisToumeout1,\n\t\tfisToumeout2,\n\t\tfisToumeout3,\n\t\tfisToumeout4,\n\t\tfisToumeout5,\n\t\ttimingRedraw = 200\n\n\n\tdocument.body.removeAttribute('data-resourcesPerSector')\n\tdocument.body.removeAttribute('data-resourcesPerRegion')\n\tdocument.body.removeAttribute('data-projectsPerSector')\n\tdocument.body.removeAttribute('data-resourcesPerDepartment')\n\t//factsElem[0].removeAttribute('data-facts')\n\n\tfor(var i=0; i < dataFacts.length - 1; i++){\n\t\tfact = JSON.parse(dataFacts[i])\n\t\tparsedFacts[fact.type].push(fact)\n\t}\n\n\ttemplateFacsResources = factsTempl({facts: parsedFacts['Recursos']})\n\ttemplateFacsProyects = factsTempl({facts: parsedFacts['Proyectos']})\n\ttemplateFacsProduction = factsTempl({facts: parsedFacts['Produccion']})\n\ttemplateFacsFiscalizacion = factsTempl({facts: parsedFacts['Fiscalizacion']})\n\n\tfunction Infographic(){\n\t\tAppState.on( 'state-change', this.changeState.bind( this ) )\n\t\tAppState.on( 'params-change', this.checkPeriodChange.bind( this ) )\n\t\tthis.changeState.apply(this, AppState.getStateArray())\n\t}\n\n\tInfographic.prototype.checkPeriodChange = function( state, hash, params ){\n\t\tparams = params || ''\n\n\t\tvar periodsParams = params.match(/period[^=]*=([^&]+)/)\n\t\tperiodsParams = periodsParams ? periodsParams[0] : ''\n\t\t\n\t\tif( !this.periodsParams || periodsParams != this.periodsParams ){\n\t\t\tthis.changeState.apply(this, [].slice.call(arguments))\n\t\t\tthis.periodsParams = periodsParams\n\t\t}\n\t}\n\n\tInfographic.prototype.changeState = function( state, hash, params ){\n\t\tvar undef\n\n\t\tthis.setupGraph( state )\n\t\t\n\t\tif( pendingRequest ){\n\t\t\tif( pendingRequest.abort ) pendingRequest.abort()\n\t\t}\n\n\t\tif( !state ){\n\t\t\tinitialize( undef, 'Proyectos' )\n\t\t}else if( state == 'Proyectos' ){\n\t\t\tpendingRequest = Services.infograph.consolidated(params).done(initializeContructor(state))\n\t\t}else if( state == 'Recursos' ){\n\t\t\tpendingRequest = Services.infograph.resources(params).done(initializeContructor(state))\n\t\t}else if( state == 'Produccion' ){\n\t\t\tpendingRequest = Services.infograph.production(params).done(initializeContructor(state))\n\t\t}else if( state == 'Fiscalizacion' ){\n\t\t\tpendingRequest = Services.infograph.fiscalizacion(params).done(initializeContructor(state))\n\t\t}\n\t}\n\n\tInfographic.prototype.setupGraph = function( state ){\n\t\tthis.state = state\n\n\t\tif( state == 'Proyectos' || !state ){\n\t\t\ttopZone.innerHTML = templateTopProjects\n\t\t\tbottomZone.innerHTML = templateBottomProjects\n\t\t}else if( state == 'Recursos' ){\n\t\t\ttopZone.innerHTML = templateTopResources\n\t\t\tbottomZone.innerHTML = templateBottomResources\n\t\t}else if( state == 'Produccion' ){\n\t\t\ttopZone.innerHTML = templateTopProduction\n\t\t\tbottomZone.innerHTML = templateBottomProduction\n\t\t}else if( state == 'Fiscalizacion' ){\n\t\t\ttopZone.innerHTML = templateTopFiscalization\n\t\t\tbottomZone.innerHTML = templateBottomFiscalization\n\t\t}\n\t}\n\n\tfunction initializeContructor( state ){\n\t\treturn function( data ){\n\t\t\tinitialize( data, state )\n\t\t}\n\t}\n\n\tfunction initialize( data, state ){\n\t\t// debugger;\n\t\t// console.log(data,state)\n\t\tif( !data || state == 'Proyectos' ){\n\t\t\tdrawProyectsGraphs( data )\n\t\t\tfactsElem.html( templateFacsProyects )\n\t\t}else if( state == 'Recursos' ){\n\t\t\tfactsElem.html( templateFacsResources )\n\t\t\tdrawResourcesGraphs( data )\n\t\t}else if( state == 'Produccion' ){\n\t\t\tfactsElem.html( templateFacsProduction )\n\t\t\tdrawProductionGraphs( data )\n\t\t}else if( state == 'Fiscalizacion' ){\n\t\t\tfactsElem.html( templateFacsFiscalizacion )\n\t\t\tdrawFiscalizationGraphs( data )\n\t\t}\n\n\t\t// if( data && data.facts ){\n\t\t// \ttempFacs = $('.facts').html()\n\t\t// \t$('.facts').empty().html( factsTempl( data ) )\n\t\t// }else{\n\t\t// \t$('.facts').empty().html( tempFacs )\n\t\t// }\n\t\t\n\n\n\t\tfirstTime = false\n\t}\n\n\tfunction drawProyectsGraphs( data ){\n\t\tvar // Proyects Variables\n\t\t\trootSectorPie,\n\t\t\trootRegionPie,\n\t\t\trootProyBar,\n\t\t\trootResDepto,\n\t\t\tgrapResSec,\n\t\t\t// Shared\n\t\t\tmax = 0, i,\n\t\t\tseriesData\n\n\t\trootSectorPie = root.find('#res-sector').empty()[0]\n\t\trootRegionPie = root.find('#res-region').empty()[0]\n\t\trootProyBar = root.find('#proy-sector').empty()[0]\n\t\trootResDepto = root.find('#res-depto').empty()\n\n\t\tdataResourcesPerSector = data ? data.resourcesPerSector : dataResourcesPerSector\n\t\tdataResourcesPerRegion = data ? data.resourcesPerRegion : dataResourcesPerRegion\n\t\tdataProjectsPerSector = data ? data.projectsPerSector : dataProjectsPerSector\n\t\tdataResourcesPerDepartment = data ? data.resourcesPerDepartment : dataResourcesPerDepartment\n\t\t\n\t\tif( !dataResourcesPerSector || !dataResourcesPerSector.length ){\n\t\t\trootSectorPie[0].innerHTML = emptyHTMLBox\n\t\t}else{\n\t\t\tclearTimeout( proyToumeout1 )\n\t\t\tproyToumeout1 = setTimeout(function(){\n\t\t\t\tgrapResSec = Grapher.drawSemiPie(rootSectorPie, 135, dataResourcesPerSector)\n\t\t\t}, timingRedraw)\n\t\t}\n\t\tif( !dataResourcesPerRegion || !dataResourcesPerRegion.length ){\n\t\t\trootRegionPie[0].innerHTML = emptyHTMLBox\n\t\t}else{\n\t\t\tclearTimeout( proyToumeout2 )\n\t\t\tproyToumeout2 = setTimeout(function(){\n\t\t\t\tGrapher.drawSemiPie(rootRegionPie, 180, dataResourcesPerRegion, true)\n\t\t\t}, timingRedraw)\n\t\t}\n\t\tif( !dataProjectsPerSector || !dataProjectsPerSector.length ){\n\t\t\trootProyBar[0].innerHTML = emptyHTMLBox\n\t\t}else{\n\t\t\tclearTimeout( proyToumeout3 )\n\t\t\tproyToumeout3 = setTimeout(function(){\n\t\t\t\tGrapher.drawBars(rootProyBar, dataProjectsPerSector, ['Sectores', 'Nmero de Proyectos'])\n\t\t\t}, timingRedraw)\n\t\t}\n\t\tif( !dataResourcesPerDepartment || !dataResourcesPerDepartment.length ){\n\t\t\trootResDepto[0].innerHTML = emptyHTMLBox\n\t\t}else{\n\t\t\tclearTimeout( proyToumeout4 )\n\t\t\tproyToumeout4 = setTimeout(function(){\n\t\t\t\tfor(i=0; i<dataResourcesPerDepartment.length; i++){\n\t\t\t\t\tmax = Math.max(dataResourcesPerDepartment[i].rawValue, max)\n\t\t\t\t}\n\n\t\t\t\tfor(i=0; i<dataResourcesPerDepartment.length; i++){\n\t\t\t\t\tdataResourcesPerDepartment[i].valuePercent = ~~( 100 * ( dataResourcesPerDepartment[i].rawValue / max )) + '%'\n\t\t\t\t}\n\n\t\t\t\trootResDepto[0].innerHTML = tmplDepto({array: dataResourcesPerDepartment})\n\t\t\t}, timingRedraw)\n\t\t}\n\t\t\n\t}\n\n\tfunction drawResourcesGraphs( data ){\n\n\t\tif( !data || !data.graficasConsolidadas ) return\n\t\t\n\t\tvar i,\n\t\t\tseriesData,\n\t\t\tpresupuestoData = [],\n\t\t\tdepartmentsData = [],\n\t\t\tregionsData = [],\n\t\t\tdepartmentsList = [],\n\t\t\tregionsList = [],\n\t\t\tgirado,\n\t\t\tdataTemp,\n\t\t\tpresupuestoGraphData = []\n\n\t\tfor( i = 0; i < data.graficasConsolidadas.length; i++ ){\n\t\t\tdataTemp = data.graficasConsolidadas[i]\n\t\t\tif( dataTemp.Nombre == 'Presupuesto' ){\n\t\t\t\tpresupuestoData = dataTemp.ItemsGrafica\n\t\t\t}else if( dataTemp.Nombre == 'RecursosAprobadosXRegion' ){\n\t\t\t\tregionsData = dataTemp.ItemsGrafica\n\t\t\t}else{\n\t\t\t\tdepartmentsData = dataTemp.ItemsGrafica\n\t\t\t}\n\t\t}\n\n\n\t\t//-----------------------------\n\t\t// DEPARTMENTS GRAPH\n\t\t//-----------------------------\n\n\n\t\tif( !departmentsData || !departmentsData.length ){\n\t\t\troot.find('#res-resources-depto')[0].innerHTML = emptyHTMLBox\n\t\t}else{\n\t\t\tclearTimeout( resToumeout1 )\n\t\t\tresToumeout1 = setTimeout(function(){\n\t\t\t\tvar seriesData = [{\n\t\t\t\t\t\tname: 'Recursos Aprobados',\n\t\t\t\t\t\ttype: 'column',\n\t\t\t\t\t\tdata: [],\n\t\t\t\t\t\tcolor: '#00b5c6'\n\t\t\t\t\t},{\n\t\t\t\t\t\tname: 'Recursos Girados',\n\t\t\t\t\t\ttype: 'column',\n\t\t\t\t\t\tdata: [],\n\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\tpattern: '/content/img/chart-pattern.jpg',\n\t\t\t\t\t\t\twidth: 24,\n\t\t\t\t\t\t\theight: 24,\n\t\t\t\t\t\t\tcolor1: '#009dac'\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\tfor (i = 0; i < departmentsData.length ; i++) {\n\t\t\t\t\tgirado = departmentsData[i].Items[0] ? departmentsData[i].Items[0].Valor : 0\n\t\t\t\t\tseriesData[0].data[i] = departmentsData[i].Valor// - girado\n\t\t\t\t\tseriesData[1].data[i] = girado\n\t\t\t\t\tdepartmentsList[i] = departmentsData[i].Label\n\t\t\t\t\t// debugger;\n\t\t\t\t}\n\t\t\t\troot.find('#res-resources-depto').highcharts({\n\t\t\t\t\tchart: {\n\t\t\t\t\t\tmarginBottom: 210\n\t\t\t\t\t},\n\t\t\t\t\tcredits : {\n\t\t\t\t\t\tenabled : false\n\t\t\t\t\t},\n\t\t\t\t\texporting: {\n\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\tcontextButton: {\n\t\t\t\t\t\t\t\tenabled: false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttitle: null,\n\t\t\t\t\txAxis: {\n\t\t\t\t\t\tcategories: departmentsList,\n\t\t\t\t\t\tlabels: {\n\t\t\t\t\t\t\tformatter: function(){\n\t\t\t\t\t\t\t\treturn this.value//.substr(0,3)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trotation: -45,\n\t\t\t\t\t\t\talign: 'right',\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t'font-size': '9px'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\ttext: 'DEPARTAMENTOS',\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\tcolor: '#555',\n\t\t\t\t\t\t\t\t'font-size': '1.2em'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmargin: 30\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tyAxis: {\n\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\ttext: 'RECURSOS APROBADOS<br>Y GIRADOS',\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\tcolor: '#555',\n\t\t\t\t\t\t\t\t'font-size': '1.2em',\n\t\t\t\t\t\t\t\tmarginRight: 20\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmargin: 30\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlabels: {\n\t\t\t\t\t\t\tformatter: function(){\n\t\t\t\t\t\t\t\tvar max = this.axis.max\n\t\t\t\t\t\t\t\t// console.log(max)\n\t\t\t\t\t\t\t\t/*if( max > 1000000000000){\n\t\t\t\t\t\t\t\t\treturn parseFloat((this.value / 1000000000000).toFixed()).toCurrency().replace('$','') + ' Billones'\n\t\t\t\t\t\t\t\t}else*/ if( max > 1000000000){\n\t\t\t\t\t\t\t\t\treturn parseFloat((this.value / 1000000000).toFixed()).toCurrency().replace('$','') + ' MMillones'\n\t\t\t\t\t\t\t\t}else if( max > 1000000){\n\t\t\t\t\t\t\t\t\treturn parseFloat((this.value / 1000000).toFixed()).toCurrency().replace('$','') + ' Millones'\n\t\t\t\t\t\t\t\t}else if( max > 1000){\n\t\t\t\t\t\t\t\t\treturn parseFloat((this.value / 1000).toFixed()).toCurrency().replace('$','') + ' miles'\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\treturn this.value\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// return Highcharts.numberFormat(this.value, -3)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttooltip: {\n\t\t\t\t\t\tformatter: function(){\n\t\t\t\t\t\t\tvar itemData = this.points,\n\t\t\t\t\t\t\t\tgirado = itemData[1] ? (itemData[1].y ? itemData[1].y : 0) : 0,\n\t\t\t\t\t\t\t\taprobado = itemData[0] ? (itemData[0].y ? itemData[0].y : 0) : 0\n\n\t\t\t\t\t\t\treturn '<div class=\"inner-stacked-tooltip\">'+\n\t\t\t\t\t\t\t\t'<h4 class=\"title\">'+ this.x +'</h4 class=\"title\">'+\n\t\t\t\t\t\t\t\t'<p class=\"number\">'+ aprobado.toCurrency() +'</p>'+\n\t\t\t\t\t\t\t\t'<p class=\"name\">Recursos Aprobados</p>'+\n\t\t\t\t\t\t\t\t'<p class=\"number\">'+ girado.toCurrency()+'</p>'+\n\t\t\t\t\t\t\t\t'<p class=\"name\">Recursos Girados</p>'+\n\t\t\t\t\t\t\t\t'</div>';\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbackgroundColor: '#f9f9f9',\n\t\t\t\t\t\tborderRadius: 0,\n\t\t\t\t\t\tborderColor: '#f9f9f9',\n\t\t\t\t\t\tborderWidth: 0,\n\t\t\t\t\t\tuseHTML: true,\n\t\t\t\t\t\tshared: true\n\t\t\t\t\t},\n\t\t\t\t\tlegend: {\n\t\t\t\t\t\tborderColor: '#ddd',\n\t\t\t\t\t\tpadding: 18,\n\t\t\t\t\t\tborderRadius: 0/*,\n\t\t\t\t\t\titemWidth: 200*/\n\t\t\t\t\t},\n\t\t\t\t\tplotOptions: {\n\t\t\t\t\t\tcolumn: {\n\t\t\t\t\t\t\t// stacking: 'normal',\n\t\t\t\t\t\t\tpointPadding: 0.02,\n\t\t\t\t\t\t\tgroupPadding: 0.02\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tseries: seriesData\n\t\t\t\t})\n\t\t\t}, timingRedraw)\n\t\t}\n\n\t\t//-----------------------------\n\t\t// REGIONS GRAPH\n\t\t//-----------------------------\n\n\t\tif( !regionsData || !regionsData.length ){\n\t\t\troot.find('#res-resources-region')[0].innerHTML = emptyHTMLBox\n\t\t}else{\n\t\t\tclearTimeout( resToumeout2 )\n\t\t\tresToumeout2 = setTimeout(function(){\n\t\t\t\tvar seriesData = [{\n\t\t\t\t\t\tname: 'Recursos Aprobados',\n\t\t\t\t\t\ttype: 'column',\n\t\t\t\t\t\tdata: [],\n\t\t\t\t\t\tcolor: '#00b5c6'\n\t\t\t\t\t},{\n\t\t\t\t\t\tname: 'Recursos Girados',\n\t\t\t\t\t\ttype: 'column',\n\t\t\t\t\t\tdata: [],\n\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\tpattern: '/content/img/chart-pattern.jpg',\n\t\t\t\t\t\t\twidth: 24,\n\t\t\t\t\t\t\theight: 24,\n\t\t\t\t\t\t\tcolor1: '#009dac'\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\tfor (i = 0; i < regionsData.length ; i++) {\n\t\t\t\t\tgirado = regionsData[i].Items[0] ? regionsData[i].Items[0].Valor : 0\n\t\t\t\t\tseriesData[0].data[i] = regionsData[i].Valor\n\t\t\t\t\tseriesData[1].data[i] = girado\n\t\t\t\t\tregionsList[i] = regionsData[i].Label\n\t\t\t\t}\n\t\t\t\troot.find('#res-resources-region').highcharts({\n\t\t\t\t\tchart: {\n\t\t\t\t\t\tmarginBottom: 190\n\t\t\t\t\t},\n\t\t\t\t\tcredits : {\n\t\t\t\t\t\tenabled : false\n\t\t\t\t\t},\n\t\t\t\t\texporting: {\n\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\tcontextButton: {\n\t\t\t\t\t\t\t\tenabled: false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttitle: null,\n\t\t\t\t\txAxis: {\n\t\t\t\t\t\tcategories: regionsList,\n\t\t\t\t\t\tlabels: {\n\t\t\t\t\t\t\tformatter: function(){\n\t\t\t\t\t\t\t\treturn this.value\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t'font-size': '9px'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\ttext: 'REGIONES',\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\tcolor: '#555',\n\t\t\t\t\t\t\t\t'font-size': '1.2em'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmargin: 30\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tyAxis: {\n\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\ttitle: {\n\t\t\t\t\t\t\ttext: 'RECURSOS APROBADOS<br>Y GIRADOS',\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\tcolor: '#555',\n\t\t\t\t\t\t\t\t'font-size': '1.2em',\n\t\t\t\t\t\t\t\tmarginRight: 20\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmargin: 30\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlabels: {\n\t\t\t\t\t\t\tformatter: function(){\n\t\t\t\t\t\t\t\tvar max = this.axis.max\n\t\t\t\t\t\t\t\t// console.log(max)\n\t\t\t\t\t\t\t\t/*if( max > 1000000000000){\n\t\t\t\t\t\t\t\t\treturn parseFloat((this.value / 1000000000000).toFixed()).toCurrency().replace('$','') + ' Billones'\n\t\t\t\t\t\t\t\t}else*/ if( max > 1000000000){\n\t\t\t\t\t\t\t\t\treturn parseFloat((this.value / 1000000000).toFixed()).toCurrency().replace('$','') + ' MMillones'\n\t\t\t\t\t\t\t\t}else if( max > 1000000){\n\t\t\t\t\t\t\t\t\treturn parseFloat((this.value / 1000000).toFixed()).toCurrency().replace('$','') + ' Millones'\n\t\t\t\t\t\t\t\t}else if( max > 1000){\n\t\t\t\t\t\t\t\t\treturn parseFloat((this.value / 1000).toFixed()).toCurrency().replace('$','') + ' miles'\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\treturn this.value\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// return Highcharts.numberFormat(this.value, -3)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttooltip: {\n\t\t\t\t\t\tformatter: function(){\n\t\t\t\t\t\t\tvar itemData = this.points,\n\t\t\t\t\t\t\t\tgirado = itemData[1] ? (itemData[1].y ? itemData[1].y : 0) : 0,\n\t\t\t\t\t\t\t\taprobado = itemData[0] ? (itemData[0].y ? itemData[0].y : 0) : 0\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn '<div class=\"inner-stacked-tooltip\">'+\n\t\t\t\t\t\t\t\t'<h4 class=\"title\">'+ this.x +'</h4 class=\"title\">'+\n\t\t\t\t\t\t\t\t'<p class=\"number\">'+ aprobado.toCurrency() +'</p>'+\n\t\t\t\t\t\t\t\t'<p class=\"name\">Recursos Aprobados</p>'+\n\t\t\t\t\t\t\t\t'<p class=\"number\">'+ girado.toCurrency()+'</p>'+\n\t\t\t\t\t\t\t\t'<p class=\"name\">Recursos Girados</p>'+\n\t\t\t\t\t\t\t\t'</div>';\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbackgroundColor: '#f9f9f9',\n\t\t\t\t\t\tborderRadius: 0,\n\t\t\t\t\t\tborderColor: '#f9f9f9',\n\t\t\t\t\t\tborderWidth: 0,\n\t\t\t\t\t\tuseHTML: true,\n\t\t\t\t\t\tshared: true\n\t\t\t\t\t},\n\t\t\t\t\tlegend: {\n\t\t\t\t\t\tborderColor: '#ddd',\n\t\t\t\t\t\tpadding: 18,\n\t\t\t\t\t\tborderRadius: 0/*,\n\t\t\t\t\t\titemWidth: 200*/\n\t\t\t\t\t},\n\t\t\t\t\tplotOptions: {\n\t\t\t\t\t\tcolumn: {\n\t\t\t\t\t\t\t// stacking: 'normal',\n\t\t\t\t\t\t\tpointPadding: 0.02,\n\t\t\t\t\t\t\tgroupPadding: 0.02\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tseries: seriesData\n\t\t\t\t})\n\t\t\t}, timingRedraw)\n\t\t}\n\n\t\t\n\n\t\t//----------------------\n\t\t// PRESUPUESTO\n\t\t//----------------------\n\t\tfor( i = 0; i < presupuestoData.length; i++ ){\n\t\t\tpresupuestoGraphData[i] = {\n\t\t\t\tlabel: presupuestoData[i].Label,\n\t\t\t\tvalue: presupuestoData[i].Porcentaje.toFixed(2),\n\t\t\t\trawValue: presupuestoData[i].Valor,\n\t\t\t\tvaluePercent: presupuestoData[i].Porcentaje\n\t\t\t}\n\t\t}\n\t\tif( !presupuestoGraphData || !presupuestoGraphData.length ){\n\t\t\troot.find('#res-fuente')[0].innerHTML = emptyHTMLBox\n\t\t}else{\n\t\t\tclearTimeout( resToumeout3 )\n\t\t\tresToumeout3 = setTimeout(function(){\n\t\t\t\tGrapher.drawSemiPie( $('#res-fuente').empty()[0], 180, presupuestoGraphData, true )\n\t\t\t}, timingRedraw)\n\t\t}\n\t}\n\n\n\tfunction drawProductionGraphs( data ){\n\t\tvar typeResRoot = root.find('#prod-reg-res').empty()[0],\n\t\t\tresNoRenovableRoot = root.find('#prod-res-no').empty()[0],\n\t\t\tliquidationDepRoot = root.find('#prod-depto').empty()[0],\n\t\t\tresNatRoot = root.find('#prod-res').empty()[0],\n\t\t\ti, dataTemp, prodData = {},\n\t\t\tscales\n\n\t\tfor( i = 0; i < data.graficasConsolidadas.length; i++ ){\n\t\t\tdataTemp = data.graficasConsolidadas[i]\n\t\t\tif( dataTemp.Nombre == 'ProduccionPorRecursos' ){\n\t\t\t\tprodData.resNat = dataTemp.ItemsGrafica\n\t\t\t}else if( dataTemp.Nombre == 'LiquidadoPorTipoRecurso' ){\n\t\t\t\tprodData.typeRes = dataTemp.ItemsGrafica\n\t\t\t}else if( dataTemp.Nombre == 'LiquidadoPorRecurso' ){\n\t\t\t\tprodData.resNoRenovable = dataTemp.ItemsGrafica\n\t\t\t}else{ //LiquidadoPorDepartamento\n\t\t\t\tprodData.liquidationDep = dataTemp.ItemsGrafica\n\t\t\t}\n\t\t}\n\n\t\t//-------------------------\n\t\t// PIE REGALIAS LIQUIDADAS\n\t\t//-------------------------\n\t\tif( !prodData.typeRes || !prodData.typeRes.length ){\n\t\t\ttypeResRoot.innerHTML = emptyHTMLBox\n\t\t}else{\n\t\t\tclearTimeout( prodToumeout1 )\n\t\t\tprodToumeout1 = setTimeout(function(){\n\t\t\t\tvar i\n\t\t\t\tfor( i = 0; i < prodData.typeRes.length; i++ ){\n\t\t\t\t\tprodData.typeRes[i] = {\n\t\t\t\t\t\tlabel: prodData.typeRes[i].Label,\n\t\t\t\t\t\tvalue: prodData.typeRes[i].Porcentaje.toFixed(2),\n\t\t\t\t\t\trawValue: prodData.typeRes[i].Valor,\n\t\t\t\t\t\tvaluePercent: prodData.typeRes[i].Porcentaje\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tGrapher.drawSemiPie(typeResRoot, 135, prodData.typeRes, true)\n\t\t\t}, timingRedraw)\n\t\t}\n\n\t\t//-------------------------\n\t\t// BARS NO RENOVABLE\n\t\t//-------------------------\n\t\tif( !prodData.resNoRenovable || !prodData.resNoRenovable.length ){\n\t\t\tresNoRenovableRoot.innerHTML = emptyHTMLBox\n\t\t}else{\n\t\t\tclearTimeout( prodToumeout2 )\n\t\t\tprodToumeout2 = setTimeout(function(){\n\t\t\t\tvar i, percent, noPercent = false,\n\t\t\t\t\ttotal = 0, max\n\t\t\t\tfor( i = 0; i < prodData.resNoRenovable.length; i++ ){\n\t\t\t\t\tpercent = prodData.resNoRenovable[i].Porcentaje\n\t\t\t\t\tnoPercent = ( typeof percent == 'undefine' || percent === null )\n\t\t\t\t\tprodData.resNoRenovable[i] = {\n\t\t\t\t\t\tlabel: prodData.resNoRenovable[i].Label,\n\t\t\t\t\t\tvalue: percent ? +(percent.toFixed(2)) : null,\n\t\t\t\t\t\trawValue: prodData.resNoRenovable[i].Valor,\n\t\t\t\t\t\tvaluePercent: percent\n\t\t\t\t\t}\n\t\t\t\t\ttotal = total + prodData.resNoRenovable[i].rawValue\n\t\t\t\t\tmax = Math.max(0, prodData.resNoRenovable[i].rawValue)\n\t\t\t\t}\n\t\t\t\tif( noPercent ){\n\t\t\t\t\tfor( i = 0; i < prodData.resNoRenovable.length; i++ ){\n\t\t\t\t\t\tprodData.resNoRenovable[i].valuePercent = 100 * prodData.resNoRenovable[i].rawValue / total \n\t\t\t\t\t\tprodData.resNoRenovable[i].value = (100 * prodData.resNoRenovable[i].rawValue / total).toFixed(2) + '%'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tscales = scalesFor(max , 0, 11)\n\t\t\t\tGrapher.drawBars(resNoRenovableRoot, prodData.resNoRenovable, ['Recurso Natural No Renovable', 'Liquidado ('+scales.units+')'], {height: 350})\n\t\t\t\t// Grapher.drawBars(rootProyBar, dataProjectsPerSector)\n\t\t\t}, timingRedraw)\n\t\t}\n\t\t\n\t\t//-------------------------\n\t\t// BARS LIQUIDATION DEP\n\t\t//-------------------------\n\t\tif( !prodData.liquidationDep || !prodData.liquidationDep.length ){\n\t\t\tresNoRenovableRoot.innerHTML = emptyHTMLBox\n\t\t}else{\n\t\t\tclearTimeout( prodToumeout3 )\n\t\t\tprodToumeout3 = setTimeout(function(){\n\t\t\t\tvar max = prodData.liquidationDep[0].Valor,\n\t\t\t\t\ttotal = 0\n\n\t\t\t\tfor(i=0; i<prodData.liquidationDep.length; i++){\n\t\t\t\t\tmax = Math.max(prodData.liquidationDep[i].Valor, max)\n\t\t\t\t\ttotal += prodData.liquidationDep[i].Valor\n\t\t\t\t}\n\n\t\t\t\tfor(i=0; i<prodData.liquidationDep.length; i++){\n\t\t\t\t\tprodData.liquidationDep[i].rawValue = prodData.liquidationDep[i].Valor\n\t\t\t\t\tprodData.liquidationDep[i].value = prodData.liquidationDep[i].Porcentaje || ( 100 * ( prodData.liquidationDep[i].rawValue / total )).toFixed(2) + '%'\n\t\t\t\t\tprodData.liquidationDep[i].label = prodData.liquidationDep[i].Label\n\t\t\t\t\tprodData.liquidationDep[i].valuePercent = prodData.liquidationDep[i].Porcentaje || ~~( 100 * ( prodData.liquidationDep[i].rawValue / max )) + '%'\n\t\t\t\t}\n\n\t\t\t\tliquidationDepRoot.innerHTML = tmplDepto({array: prodData.liquidationDep})\n\t\t\t}, timingRedraw)\n\t\t}\n\t\t\n\t\t//-------------------------\n\t\t// INFO PROD RES\n\t\t//-------------------------\n\t\tif( !prodData.resNat || !prodData.resNat.length ){\n\t\t\tresNatRoot.innerHTML = emptyHTMLBox\n\t\t}else{\n\t\t\tclearTimeout( prodToumeout4 )\n\t\t\tprodToumeout4 = setTimeout(function(){\n\t\t\t\tresNatRoot.innerHTML = tmplResources({array: prodData.resNat})\n\t\t\t}, timingRedraw)\n\t\t}\n\t}\n\n\tfunction scalesFor(max, min, numScales){\n\t\tvar s, len, hidnDigs, i,\n\t\t\tunits, scales = []\n\n\t\tlen = max.toString().length\n\t\thidnDigs = len - (len % 3 || 3)\n\n\t\tif( len - hidnDigs == 1) hidnDigs -= 3\n\n\t\t// if( hidnDigs == 1 ) hidnDigs = 4\n\t\t\n\t\tfor(i=0; i<=numScales; i++){\n\t\t\ts = min + ((max - min)/\n\t\t\t\tnumScales * i)\n\t\t\ts = Math.round( s / Math.pow(10, hidnDigs) )\n\t\t\tscales.push(s.toString().replace(/(\\d)(\\d{3})/,'$1.$2'))\n\t\t}\n\n\t\tif(hidnDigs == 3){\n\t\t\tunits = 'Miles'\n\t\t}else if(hidnDigs == 6){\n\t\t\tunits = 'Millones'\n\t\t}else if(hidnDigs == 9){\n\t\t\tunits = 'Miles de Millones'\n\t\t}else if(hidnDigs == 12){\n\t\t\tunits = 'Billones'\n\t\t}else if(hidnDigs == 15){\n\t\t\tunits = 'Miles de Billones'\n\t\t}else if(hidnDigs == 18){\n\t\t\tunits = 'Millones de Billones'\n\t\t}else if(hidnDigs == 18){\n\t\t\tunits = 'Trillones'\n\t\t}\n\n\t\treturn {units: units, scales: scales}\n\t}\n\n\n\tfunction drawFiscalizationGraphs( data ){\n\t\tvar fiscHidroAct = root.find('#fisc-hidro-type').empty()[0],\n\t\t\tfiscMinAct = root.find('#fisc-min-act').empty()[0],\n\t\t\tfiscCamposType = root.find('#fisc-camp-type').empty()[0],\n\t\t\tfiscCamposTypeDep = root.find('#fisc-camp-type-dep').empty()[0],\n\t\t\ti, dataTemp = {}, departmentsData = {},\n\t\t\tscales,\n\t\t\t// DATA\n\t\t\tfiscCamposTypeDepData,\n\t\t\tfiscHidroActData,\n\t\t\tfiscMinActData,\n\t\t\tfiscCamposResData,\n\t\t\tlabel\n\n\n\t\tdata = data.graficasConsolidadas\n\n\t\tif($('body').attr('data-debug')){\n\n\t\t\t//data = [{\"Nombre\":\"FiscalizacionPorHidrocarburo\",\"ItemsGrafica\":[{\"Valor\":298.0,\"Label\":\"Campos vigentes\",\"LabelExtendido\":null,\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":298.0,\"Label\":\"Campos fiscalizados\",\"LabelExtendido\":null,\"Porcentaje\":100.0,\"Items\":null}],\"Tipo\":\"H\"},{\"Nombre\":\"FiscalizacionPorMIieral\",\"ItemsGrafica\":[{\"Valor\":10159.0,\"Label\":\"Ttulos vigentes\",\"LabelExtendido\":null,\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":9124.0,\"Label\":\"Ttulos fiscalizados\",\"LabelExtendido\":null,\"Porcentaje\":89.0,\"Items\":null}],\"Tipo\":\"M\"},{\"Nombre\":\"FiscalizacionHidrocarburosPorActividad\",\"ItemsGrafica\":[{\"Valor\":32.0,\"Label\":\"Informe de Taponamiento y Abandono\",\"LabelExtendido\":null,\"Porcentaje\":10.0,\"Items\":null},{\"Valor\":36.0,\"Label\":\"Informe Sobre trabajos Posteriores a la terminacin Oficial\",\"LabelExtendido\":null,\"Porcentaje\":12.0,\"Items\":null},{\"Valor\":2.0,\"Label\":\"Permiso de mantenimiento de presin\",\"LabelExtendido\":null,\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":1.0,\"Label\":\"Permiso de Inyeccin de Agua\",\"LabelExtendido\":null,\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":5.0,\"Label\":\"Informe mensual de Inyeccin de Vapor y produccin adicional de petrleo\",\"LabelExtendido\":null,\"Porcentaje\":1.0,\"Items\":null},{\"Valor\":214.0,\"Label\":\"Informe mensual sobre ensayos de potencial de pozos de petrleo\",\"LabelExtendido\":null,\"Porcentaje\":71.0,\"Items\":null},{\"Valor\":14.0,\"Label\":\"Informe mensual de produccin de pozos de gas\",\"LabelExtendido\":null,\"Porcentaje\":4.0,\"Items\":null},{\"Valor\":15.0,\"Label\":\"Informe mensual sobre inyeccin de agua y produccin\",\"LabelExtendido\":null,\"Porcentaje\":5.0,\"Items\":null},{\"Valor\":3.0,\"Label\":\"Informe mensual sobre mantenimiento de presin (Inyeccin a gas)\",\"LabelExtendido\":null,\"Porcentaje\":1.0,\"Items\":null},{\"Valor\":12.0,\"Label\":\"Informe anual sobre mantenimiento de presin\",\"LabelExtendido\":null,\"Porcentaje\":4.0,\"Items\":null},{\"Valor\":1.0,\"Label\":\"Informe mensual sobre desplazamiento miscible\",\"LabelExtendido\":null,\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":160.0,\"Label\":\"Informe mensual sobre produccin, plantas y consumos de gas natural y procesado\",\"LabelExtendido\":null,\"Porcentaje\":53.0,\"Items\":null},{\"Valor\":3.0,\"Label\":\"Intencin de Perforar  (Pozos de Desarrollo)\",\"LabelExtendido\":null,\"Porcentaje\":1.0,\"Items\":null},{\"Valor\":59.0,\"Label\":\"Informe Quincenal\",\"LabelExtendido\":null,\"Porcentaje\":19.0,\"Items\":null},{\"Valor\":77.0,\"Label\":\"Informe de Terminacin Oficial\",\"LabelExtendido\":null,\"Porcentaje\":25.0,\"Items\":null},{\"Valor\":92.0,\"Label\":\"Permisos para Trabajos Posteriores a la terminacin Oficial\",\"LabelExtendido\":null,\"Porcentaje\":30.0,\"Items\":null},{\"Valor\":20.0,\"Label\":\"Informes sobre prueba de Presin\",\"LabelExtendido\":null,\"Porcentaje\":6.0,\"Items\":null},{\"Valor\":239.0,\"Label\":\"Informe Mensual de Produccin de pozos de petrleo y gas\",\"LabelExtendido\":null,\"Porcentaje\":80.0,\"Items\":null},{\"Valor\":30.0,\"Label\":\"Movimiento de tanques y correcciones\",\"LabelExtendido\":null,\"Porcentaje\":10.0,\"Items\":null},{\"Valor\":256.0,\"Label\":\"Resumen Mensual sobre produccin y movimiento de petrleo\",\"LabelExtendido\":null,\"Porcentaje\":85.0,\"Items\":null},{\"Valor\":164.0,\"Label\":\"Especificacion de  produccion por pozo mensual\",\"LabelExtendido\":null,\"Porcentaje\":55.0,\"Items\":null},{\"Valor\":69.0,\"Label\":\"Otra actividad en el desarrollo de sus funciones\",\"LabelExtendido\":null,\"Porcentaje\":23.0,\"Items\":null},{\"Valor\":2.0,\"Label\":\"Autorizacin de Quemas\",\"LabelExtendido\":null,\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":7.0,\"Label\":\"Autorizacin de Suspensiones\",\"LabelExtendido\":null,\"Porcentaje\":2.0,\"Items\":null},{\"Valor\":11.0,\"Label\":\"Visita a Campo o Pozos\",\"LabelExtendido\":null,\"Porcentaje\":3.0,\"Items\":null}],\"Tipo\":\"H\"},{\"Nombre\":\"FiscalizacionMineralesPorActividad\",\"ItemsGrafica\":[{\"Valor\":8616.0,\"Label\":\"Evaluacin Documental\",\"LabelExtendido\":null,\"Porcentaje\":84.0,\"Items\":null},{\"Valor\":8143.0,\"Label\":\"Visita de Campo\",\"LabelExtendido\":null,\"Porcentaje\":80.0,\"Items\":null},{\"Valor\":8494.0,\"Label\":\"Informe Integral de Fiscalizacin\",\"LabelExtendido\":null,\"Porcentaje\":83.0,\"Items\":null}],\"Tipo\":\"M\"},{\"Nombre\":\"FiscalizacionPorTipoRecursoPorDepartamento\",\"ItemsGrafica\":[{\"Valor\":0.0,\"Label\":\"AMAZONAS\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":1467.0,\"Label\":\"ANTIOQUIA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":85.9,\"Items\":null},{\"Valor\":24.0,\"Label\":\"ARAUCA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":70.6,\"Items\":null},{\"Valor\":106.0,\"Label\":\"ATLANTICO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":97.2,\"Items\":null},{\"Valor\":36.0,\"Label\":\"BOGOTA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":94.7,\"Items\":null},{\"Valor\":312.0,\"Label\":\"BOLIVAR\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":66.2,\"Items\":null},{\"Valor\":1514.0,\"Label\":\"BOYACA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":98.3,\"Items\":null},{\"Valor\":387.0,\"Label\":\"CALDAS\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":97.7,\"Items\":null},{\"Valor\":34.0,\"Label\":\"CAQUETA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":66.7,\"Items\":null},{\"Valor\":116.0,\"Label\":\"CASANARE\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":77.3,\"Items\":null},{\"Valor\":238.0,\"Label\":\"CAUCA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":91.9,\"Items\":null},{\"Valor\":374.0,\"Label\":\"CESAR\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":94.0,\"Items\":null},{\"Valor\":160.0,\"Label\":\"CHOCO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":79.6,\"Items\":null},{\"Valor\":101.0,\"Label\":\"CORDOBA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":87.8,\"Items\":null},{\"Valor\":1012.0,\"Label\":\"CUNDINAMARCA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":91.7,\"Items\":null},{\"Valor\":34.0,\"Label\":\"GUAINIA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":89.5,\"Items\":null},{\"Valor\":5.0,\"Label\":\"GUAVIARE\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":178.0,\"Label\":\"HUILA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":82.0,\"Items\":null},{\"Valor\":60.0,\"Label\":\"LA GUAJIRA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":83.3,\"Items\":null},{\"Valor\":88.0,\"Label\":\"MAGDALENA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":91.7,\"Items\":null},{\"Valor\":188.0,\"Label\":\"META\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":66.9,\"Items\":null},{\"Valor\":199.0,\"Label\":\"NARIO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":93.9,\"Items\":null},{\"Valor\":763.0,\"Label\":\"NORTE DE SANTANDER\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":96.3,\"Items\":null},{\"Valor\":43.0,\"Label\":\"PUTUMAYO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":91.5,\"Items\":null},{\"Valor\":56.0,\"Label\":\"QUINDIO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":80.0,\"Items\":null},{\"Valor\":59.0,\"Label\":\"RISARALDA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":79.7,\"Items\":null},{\"Valor\":0.0,\"Label\":\"SAN ANDRES\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":699.0,\"Label\":\"SANTANDER\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":98.6,\"Items\":null},{\"Valor\":48.0,\"Label\":\"SUCRE\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":80.0,\"Items\":null},{\"Valor\":543.0,\"Label\":\"TOLIMA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":88.0,\"Items\":null},{\"Valor\":269.0,\"Label\":\"VALLE\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":95.7,\"Items\":null},{\"Valor\":5.0,\"Label\":\"VAUPES\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":83.3,\"Items\":null},{\"Valor\":6.0,\"Label\":\"VICHADA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":66.7,\"Items\":null}],\"Tipo\":\"M\"},{\"Nombre\":\"FiscalizacionPorTipoRecursoPorDepartamento\",\"ItemsGrafica\":[{\"Valor\":0.0,\"Label\":\"AMAZONAS\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"ANTIOQUIA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":15.0,\"Label\":\"ARAUCA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"ATLANTICO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"BOGOTA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":2.0,\"Label\":\"BOLIVAR\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":6.0,\"Label\":\"BOYACA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CALDAS\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CAQUETA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":111.0,\"Label\":\"CASANARE\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":2.0,\"Label\":\"CAUCA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":14.0,\"Label\":\"CESAR\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CHOCO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CORDOBA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":2.0,\"Label\":\"CUNDINAMARCA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"GUAINIA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"GUAVIARE\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":25.0,\"Label\":\"HUILA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":3.0,\"Label\":\"LA GUAJIRA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"MAGDALENA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":49.0,\"Label\":\"META\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":1.0,\"Label\":\"NARIO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":8.0,\"Label\":\"NORTE DE SANTANDER\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":19.0,\"Label\":\"PUTUMAYO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"QUINDIO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"RISARALDA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"SAN ANDRES\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":25.0,\"Label\":\"SANTANDER\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":1.0,\"Label\":\"SUCRE\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":14.0,\"Label\":\"TOLIMA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"VALLE\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"VAUPES\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":1.0,\"Label\":\"VICHADA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null}],\"Tipo\":\"H\"}]\n\t\t\t//data = [{\"Nombre\":\"FiscalizacionPorHidrocarburo\",\"ItemsGrafica\":[{\"Valor\":487.0,\"Label\":\"Campos vigentes\",\"LabelExtendido\":null,\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":487.0,\"Label\":\"Campos fiscalizados\",\"LabelExtendido\":null,\"Porcentaje\":100.0,\"Items\":null}],\"Tipo\":\"H\"},{\"Nombre\":\"FiscalizacionPorMIieral\",\"ItemsGrafica\":[{\"Valor\":10159.0,\"Label\":\"Ttulos vigentes\",\"LabelExtendido\":null,\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":8653.0,\"Label\":\"Ttulos fiscalizados\",\"LabelExtendido\":null,\"Porcentaje\":85.0,\"Items\":null}],\"Tipo\":\"M\"},{\"Nombre\":\"FiscalizacionHidrocarburosPorActividad\",\"ItemsGrafica\":[{\"Valor\":487.0,\"Label\":\"Produccin\",\"LabelExtendido\":null,\"Porcentaje\":100.0,\"Items\":null}],\"Tipo\":\"H\"},{\"Nombre\":\"FiscalizacionMineralesPorActividad\",\"ItemsGrafica\":[{\"Valor\":7955.0,\"Label\":\"Evaluacin Documental\",\"LabelExtendido\":null,\"Porcentaje\":78.0,\"Items\":null},{\"Valor\":8025.0,\"Label\":\"Visita de Campo\",\"LabelExtendido\":null,\"Porcentaje\":78.0,\"Items\":null},{\"Valor\":5412.0,\"Label\":\"Informe Integral de Fiscalizacin\",\"LabelExtendido\":null,\"Porcentaje\":53.0,\"Items\":null}],\"Tipo\":\"M\"},{\"Nombre\":\"FiscalizacionPorTipoRecursoPorDepartamento\",\"ItemsGrafica\":[{\"Valor\":0.0,\"Label\":\"AMAZONAS\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":1469.0,\"Label\":\"ANTIOQUIA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":86.0,\"Items\":null},{\"Valor\":25.0,\"Label\":\"ARAUCA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":73.5,\"Items\":null},{\"Valor\":89.0,\"Label\":\"ATLANTICO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":81.7,\"Items\":null},{\"Valor\":35.0,\"Label\":\"BOGOTA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":92.1,\"Items\":null},{\"Valor\":334.0,\"Label\":\"BOLIVAR\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":70.9,\"Items\":null},{\"Valor\":1372.0,\"Label\":\"BOYACA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":89.1,\"Items\":null},{\"Valor\":297.0,\"Label\":\"CALDAS\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":75.0,\"Items\":null},{\"Valor\":43.0,\"Label\":\"CAQUETA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":84.3,\"Items\":null},{\"Valor\":146.0,\"Label\":\"CASANARE\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":97.3,\"Items\":null},{\"Valor\":210.0,\"Label\":\"CAUCA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":81.1,\"Items\":null},{\"Valor\":352.0,\"Label\":\"CESAR\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":88.4,\"Items\":null},{\"Valor\":151.0,\"Label\":\"CHOCO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":75.1,\"Items\":null},{\"Valor\":100.0,\"Label\":\"CORDOBA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":87.0,\"Items\":null},{\"Valor\":987.0,\"Label\":\"CUNDINAMARCA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":89.5,\"Items\":null},{\"Valor\":19.0,\"Label\":\"GUAINIA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":50.0,\"Items\":null},{\"Valor\":3.0,\"Label\":\"GUAVIARE\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":60.0,\"Items\":null},{\"Valor\":185.0,\"Label\":\"HUILA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":85.3,\"Items\":null},{\"Valor\":41.0,\"Label\":\"LA GUAJIRA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":56.9,\"Items\":null},{\"Valor\":87.0,\"Label\":\"MAGDALENA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":90.6,\"Items\":null},{\"Valor\":250.0,\"Label\":\"META\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":89.0,\"Items\":null},{\"Valor\":179.0,\"Label\":\"NARIO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":84.4,\"Items\":null},{\"Valor\":699.0,\"Label\":\"NORTE DE SANTANDER\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":88.3,\"Items\":null},{\"Valor\":36.0,\"Label\":\"PUTUMAYO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":76.6,\"Items\":null},{\"Valor\":52.0,\"Label\":\"QUINDIO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":74.3,\"Items\":null},{\"Valor\":61.0,\"Label\":\"RISARALDA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":82.4,\"Items\":null},{\"Valor\":0.0,\"Label\":\"SAN ANDRES\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":633.0,\"Label\":\"SANTANDER\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":89.3,\"Items\":null},{\"Valor\":38.0,\"Label\":\"SUCRE\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":63.3,\"Items\":null},{\"Valor\":502.0,\"Label\":\"TOLIMA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":81.4,\"Items\":null},{\"Valor\":249.0,\"Label\":\"VALLE\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":88.6,\"Items\":null},{\"Valor\":3.0,\"Label\":\"VAUPES\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":50.0,\"Items\":null},{\"Valor\":6.0,\"Label\":\"VICHADA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":66.7,\"Items\":null}],\"Tipo\":\"M\"},{\"Nombre\":\"FiscalizacionPorTipoRecursoPorDepartamento\",\"ItemsGrafica\":[{\"Valor\":0.0,\"Label\":\"AMAZONAS\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"ANTIOQUIA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":16.0,\"Label\":\"ARAUCA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"ATLANTICO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"BOGOTA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":6.0,\"Label\":\"BOLIVAR\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":16.0,\"Label\":\"BOYACA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CALDAS\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":1.0,\"Label\":\"CAQUETA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":186.0,\"Label\":\"CASANARE\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":3.0,\"Label\":\"CAUCA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":23.0,\"Label\":\"CESAR\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CHOCO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CORDOBA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":3.0,\"Label\":\"CUNDINAMARCA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"GUAINIA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"GUAVIARE\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":28.0,\"Label\":\"HUILA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":2.0,\"Label\":\"LA GUAJIRA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":1.0,\"Label\":\"MAGDALENA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":88.0,\"Label\":\"META\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":1.0,\"Label\":\"NARIO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":10.0,\"Label\":\"NORTE DE SANTANDER\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":30.0,\"Label\":\"PUTUMAYO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"QUINDIO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"RISARALDA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"SAN ANDRES\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":45.0,\"Label\":\"SANTANDER\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":6.0,\"Label\":\"SUCRE\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":24.0,\"Label\":\"TOLIMA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"VALLE\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"VAUPES\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":1.0,\"Label\":\"VICHADA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":100.0,\"Items\":null}],\"Tipo\":\"H\"}]\n\t\t\t// 2012\n\t\t\tdata = [{\"Nombre\":\"FiscalizacionPorHidrocarburo\",\"ItemsGrafica\":[{\"Valor\":0.0,\"Label\":\"Campos vigentes\",\"LabelExtendido\":null,\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"Campos fiscalizados\",\"LabelExtendido\":null,\"Porcentaje\":0.0,\"Items\":null}],\"Tipo\":\"H\"},{\"Nombre\":\"FiscalizacionPorMIieral\",\"ItemsGrafica\":[{\"Valor\":9729.0,\"Label\":\"Ttulos vigentes\",\"LabelExtendido\":null,\"Porcentaje\":100.0,\"Items\":null},{\"Valor\":131.0,\"Label\":\"Ttulos fiscalizados\",\"LabelExtendido\":null,\"Porcentaje\":1.0,\"Items\":null}],\"Tipo\":\"M\"},{\"Nombre\":\"FiscalizacionHidrocarburosPorActividad\",\"ItemsGrafica\":[],\"Tipo\":\"H\"},{\"Nombre\":\"FiscalizacionMineralesPorActividad\",\"ItemsGrafica\":[{\"Valor\":131.0,\"Label\":\"Evaluacin Documental\",\"LabelExtendido\":null,\"Porcentaje\":1.0,\"Items\":null},{\"Valor\":1.0,\"Label\":\"Visita de Campo\",\"LabelExtendido\":null,\"Porcentaje\":0.0,\"Items\":null}],\"Tipo\":\"M\"},{\"Nombre\":\"FiscalizacionPorTipoRecursoPorDepartamento\",\"ItemsGrafica\":[{\"Valor\":0.0,\"Label\":\"AMAZONAS\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":38.0,\"Label\":\"ANTIOQUIA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":2.3,\"Items\":null},{\"Valor\":0.0,\"Label\":\"ARAUCA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"ATLANTICO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"BOGOTA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"BOLIVAR\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"BOYACA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CALDAS\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CAQUETA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":9.0,\"Label\":\"CASANARE\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":6.1,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CAUCA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CESAR\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CHOCO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CORDOBA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":35.0,\"Label\":\"CUNDINAMARCA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":3.2,\"Items\":null},{\"Valor\":0.0,\"Label\":\"GUAINIA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"GUAVIARE\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":10.0,\"Label\":\"HUILA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":4.8,\"Items\":null},{\"Valor\":1.0,\"Label\":\"LA GUAJIRA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":1.4,\"Items\":null},{\"Valor\":0.0,\"Label\":\"MAGDALENA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"META\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"NARIO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"NORTE DE SANTANDER\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"PUTUMAYO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"QUINDIO\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":13.0,\"Label\":\"RISARALDA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":17.8,\"Items\":null},{\"Valor\":0.0,\"Label\":\"SAN ANDRES\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":1.0,\"Label\":\"SANTANDER\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.1,\"Items\":null},{\"Valor\":0.0,\"Label\":\"SUCRE\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":24.0,\"Label\":\"TOLIMA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":4.1,\"Items\":null},{\"Valor\":0.0,\"Label\":\"VALLE\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"VAUPES\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"VICHADA\",\"LabelExtendido\":\"Ttulos mineros\",\"Porcentaje\":0.0,\"Items\":null}],\"Tipo\":\"M\"},{\"Nombre\":\"FiscalizacionPorTipoRecursoPorDepartamento\",\"ItemsGrafica\":[{\"Valor\":0.0,\"Label\":\"AMAZONAS\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"ANTIOQUIA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"ARAUCA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"ATLANTICO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"BOGOTA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"BOLIVAR\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"BOYACA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CALDAS\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CAQUETA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CASANARE\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CAUCA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CESAR\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CHOCO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CORDOBA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"CUNDINAMARCA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"GUAINIA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"GUAVIARE\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"HUILA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"LA GUAJIRA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"MAGDALENA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"META\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"NARIO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"NORTE DE SANTANDER\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"PUTUMAYO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"QUINDIO\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"RISARALDA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"SAN ANDRES\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"SANTANDER\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"SUCRE\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"TOLIMA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"VALLE\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"VAUPES\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null},{\"Valor\":0.0,\"Label\":\"VICHADA\",\"LabelExtendido\":\"Campos\",\"Porcentaje\":0.0,\"Items\":null}],\"Tipo\":\"H\"}]\n\t\t}\n\n\t\t\n\n\t\tfor(i=0; i<data.length; i++){\n\n\t\t\tdataTemp[ data[i].Nombre+data[i].Tipo ] = {}\n\t\t\tdataTemp[ data[i].Nombre+data[i].Tipo ].ItemsGrafica = data[i].ItemsGrafica\n\t\t\tdataTemp[ data[i].Nombre+data[i].Tipo ].categories = []\n\t\t\tdataTemp[ data[i].Nombre+data[i].Tipo ].series = []\n\t\t\tdataTemp[ data[i].Nombre+data[i].Tipo ].valor = []\n\t\t\tdataTemp[ data[i].Nombre+data[i].Tipo ].obj = []\n\t\t\tdataTemp[ data[i].Nombre+data[i].Tipo ].Tipo = data[i].Tipo\n\t\t\tdataTemp[ data[i].Nombre+data[i].Tipo ].showNoData = false\n\n\t\t\tvar showNoData = 0\n\n\t\t\t$.each(dataTemp[ data[i].Nombre+data[i].Tipo ].ItemsGrafica, function(k, v){\n\t\t\t\t\n\t\t\t\tvar temObj = {}\n\n\n\t\t\t\ttemObj.y = v.Porcentaje\n\t\t\t\ttemObj.valor = v.Valor\n\t\t\t\ttemObj.vigentes = Math.round((v.Valor * 100) / v.Porcentaje )\n\t\t\t\tif(isNaN(temObj.vigentes)){\n\t\t\t\t\ttemObj.vigentes = 0\n\t\t\t\t}\n\n\t\t\t\tshowNoData = ( showNoData + v.Porcentaje )\n\n\t\t\t\n\n\n\t\t\t\t//console.log(k, v.Label)\n\t\t   \t\tdataTemp[ data[i].Nombre+data[i].Tipo ].categories.push(v.Label);\n\t\t   \t\tdataTemp[ data[i].Nombre+data[i].Tipo ].series.push(v.Porcentaje);\n\t\t   \t\tdataTemp[ data[i].Nombre+data[i].Tipo ].obj.push(temObj);\n\t\t   \t\tdataTemp[ data[i].Nombre+data[i].Tipo ].showNoData = showNoData\n\n\t\t   \t\t\n\t\t\t})\n\n\t\t   \tconsole.log(dataTemp[ data[i].Nombre+data[i].Tipo ], dataTemp[ data[i].Nombre+data[i].Tipo ].showNoData)\n\n\t\t\t\n\t\t}\n\n\t\tfiscHidrocarburoData = dataTemp.FiscalizacionPorHidrocarburoH.ItemsGrafica\n\t\tfiscMineralData = dataTemp.FiscalizacionPorMIieralM.ItemsGrafica\n\t\tfiscHidroActData = dataTemp.FiscalizacionHidrocarburosPorActividadH.ItemsGrafica\n\t\tfiscMinActData = dataTemp.FiscalizacionMineralesPorActividadM.ItemsGrafica\n\t\tfiscTipoRecursoDepDataM = dataTemp.FiscalizacionPorTipoRecursoPorDepartamentoM.ItemsGrafica\n\t\tfiscTipoRecursoDepDataH = dataTemp.FiscalizacionPorTipoRecursoPorDepartamentoH.ItemsGrafica\n\t\t//fiscCamposResData = dataTemp.FiscalizacionPorTipoRecurso.ItemsGrafica\n\n\t\t//debugger;\n\n\t\tvar typeHA = {};\n\t\t\ttypeHA.type = 'column';\n\t\t\ttypeHA.height = 400;\n\t\t\ttypeHA.align = 'center';\n\t\t\t\n\n\t\tif(dataTemp.FiscalizacionHidrocarburosPorActividadH.obj.length >= 3){\n\t\t\t$('.graph-fiscalization-hidrocarburos').addClass('lay-large')\n\n\t\t\ttypeHA.type = 'bar';\n\t\t\ttypeHA.height = 900;\n\t\t\ttypeHA.align = 'right';\n\t\t}\n\n\t\t$('#FiscalizacionPorHidrocarburo').highcharts({\n            chart: {\n                type: 'column'\n            },\n            title: {\n\t\t\t\ttext: null,\n\t\t\t\tstyle: {\n\t\t\t\t\tcolor: '#555',\n\t\t\t\t\t'font-size': '1.2em'\n\t\t\t\t},\n\t\t\t\tmargin: 30\n\t\t\t},\n            subtitle: {\n                text: null\n            },\n            xAxis: {\n\n                categories: dataTemp.FiscalizacionPorHidrocarburoH.categories,\n                labels: {\n\t\t\t\t\t\n\t\t\t\t\trotation: 0,\n\t\t\t\t\talign: 'center',\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\t'font-size': '9px'\n\t\t\t\t\t}\n\t\t\t\t}\n            },\n            yAxis: {\n                min: 0,\n                max: 100,\n                title: {\n                    text: null\n                }\n            },\n            tooltip: {\n            \t/*formatter: function(){\n\t\t\t\t\t\t\tvar series, data\n\n\t\t\t\t\t\t\tdebugger;\n\n\t\t\t\t\t\t\treturn '<div class=\"inner-stacked-tooltip\">'+\n\t\t\t\t\t\t\t\t'<h4 class=\"title\">'+ this.x +'</h4 class=\"title\">'+\n\t\t\t\t\t\t\t\t'<p class=\"number\">'+ aprobado.toCurrency() +'</p>'+\n\t\t\t\t\t\t\t\t'<p class=\"name\">Recursos Aprobados</p>'+\n\t\t\t\t\t\t\t\t'<p class=\"number\">'+ girado.toCurrency()+'</p>'+\n\t\t\t\t\t\t\t\t'<p class=\"name\">Recursos Girados</p>'+\n\t\t\t\t\t\t\t\t'</div>';\n\t\t\t\t\t\t},*/\n                headerFormat: '<span style=\"font-size:10px\">{point.key}</span><table>',\n                pointFormat: '<tr><td style=\"color:{series.color};padding:0\">Campos: {point.valor} </b></b></td>' +\n                    '</tr>'+\n                    '<tr>' +\n                    '<td style=\"padding:0\"><b>{point.y:.1f} %</b></td></tr>',\n                footerFormat: '</table>',\n                shared: true,\n                useHTML: true,\n                backgroundColor: '#ffffff'\n            },\n            plotOptions: {\n                column: {\n                    pointPadding: 0,\n                    borderWidth: 0\n                }\n            },\n\t        credits: { enabled: false },\n\t\t\texporting: { enabled: false },\n            series: [{\n                name: ' ',\n            \tcolor: '#f2733c',\n                data: dataTemp.FiscalizacionPorHidrocarburoH.obj,\n\n            }]\n        });\n\n\t\t\n\t\t/*$.each(dataTemp.FiscalizacionPorHidrocarburoH.series, function(k, v){\n\n\t\t\tvar html,\n\t\t\t\tvalor = dataTemp.FiscalizacionPorHidrocarburoH.valor[k];\n\t\t\t\tcat = dataTemp.FiscalizacionPorHidrocarburoH.categories[k];\n\t\t\t\t\n\n\t\t\thtml = '<div class=\"box-label\"><span class=\"category\">'+cat+'</span><span class=\"valor\"><p>'+valor+'</p></span><span class=\"percent\">'+v+'%</span></div>'\n\n\t\t\t$('.FiscalizacionPorHidrocarburo .graph-extra-lables').append(html);\n\n\t\t})\n\t\t$('.FiscalizacionPorHidrocarburo .graph-extra-lables').addClass('boxes-by-'+dataTemp.FiscalizacionPorHidrocarburoH.series.length)*/\n\n\t\t$('.FiscalizacionPorHidrocarburo').addClass('data-bars-'+dataTemp.FiscalizacionPorHidrocarburoH.obj.length + ' data-bars-'+ dataTemp.FiscalizacionPorHidrocarburoH.showNoData)\n\n\t\t\n\n\t\t$('#FiscalizacionHidrocarburosPorActividad').highcharts({\n            chart: {\n                type: typeHA.type,\n                height: typeHA.height\n            },\n            title: {\n\t\t\t\ttext: null,\n\t\t\t\tstyle: {\n\t\t\t\t\tcolor: '#555',\n\t\t\t\t\t'font-size': '1.2em'\n\t\t\t\t},\n\t\t\t\tmargin: 30\n\t\t\t},\n            subtitle: {\n                text: null\n            },\n            xAxis: {\n                categories: dataTemp.FiscalizacionHidrocarburosPorActividadH.categories,\n                labels: {\n\t\t\t\t\t\n\t\t\t\t\trotation: 0,\n\t\t\t\t\talign: typeHA.align,\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\t'font-size': '9px'\n\t\t\t\t\t}\n\t\t\t\t}\n            },\n            yAxis: {\n                min: 0,\n                max: 100,\n                title: {\n                    text: null\n                },\n\n            },\n            tooltip: {\n               headerFormat: '<span style=\"font-size:10px\">{point.key}</span><table>',\n                pointFormat: '<tr><td style=\"color:{series.color};padding:0\">Campos: {point.valor} </b></b></td>' +\n                    '</tr>'+\n                    '<tr>' +\n                    '<td style=\"padding:0\"><b>{point.y:.1f} %</b></td></tr>',\n                footerFormat: '</table>',\n                shared: true,\n                useHTML: true,\n                backgroundColor: '#ffffff'\n            },\n            plotOptions: {\n\n                column: {\n                    pointPadding: 0,\n                    borderWidth: 0\n                }\n            },\n            credits: { enabled: false },\n\t\t\texporting: { enabled: false },\n            series: [{\n                name: ' ',\n                color: '#f2733c',\n                data: dataTemp.FiscalizacionHidrocarburosPorActividadH.obj\n    \n            }]\n        });\n\n\t\t/*$.each(dataTemp.FiscalizacionHidrocarburosPorActividadH.series, function(k, v){\n\t\t\tvar html,\n\t\t\t\tvalor = dataTemp.FiscalizacionHidrocarburosPorActividadH.valor[k];\n\t\t\t\tcat = dataTemp.FiscalizacionHidrocarburosPorActividadH.categories[k];\n\n\t\t\thtml = '<div class=\"box-label\"><span class=\"category\">'+cat+'</span><span class=\"valor\"><p>'+valor+'</p></span><span class=\"percent\">'+v+'%</span></div>'\n\n\t\t\t$('.FiscalizacionHidrocarburosPorActividad .graph-extra-lables').append(html);\n\n\t\t})\n\t\t$('.FiscalizacionHidrocarburosPorActividad .graph-extra-lables').addClass('boxes-by-'+dataTemp.FiscalizacionHidrocarburosPorActividadH.series.length)\n\t\t*/\n\n\t\t\n\t\t$('.FiscalizacionHidrocarburosPorActividad').addClass('data-bars-'+dataTemp.FiscalizacionHidrocarburosPorActividadH.obj.length + ' data-bars-'+ dataTemp.FiscalizacionHidrocarburosPorActividadH.showNoData)\n\n\n\t\t$('#FiscalizacionPorMIieral').highcharts({\n            chart: {\n                type: 'column'\n            },\n            title: {\n\t\t\t\ttext: null,\n\t\t\t\tstyle: {\n\t\t\t\t\tcolor: '#555',\n\t\t\t\t\t'font-size': '1.2em'\n\t\t\t\t},\n\t\t\t\tmargin: 30\n\t\t\t},\n            subtitle: {\n                text: null\n            },\n            xAxis: {\n                categories: dataTemp.FiscalizacionPorMIieralM.categories,\n                labels: {\n\t\t\t\t\t\n\t\t\t\t\trotation: 0,\n\t\t\t\t\talign: 'right',\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\t'font-size': '0'\n\t\t\t\t\t}\n\t\t\t\t}\n            },\n            yAxis: {\n                min: 0,\n                max: 100,\n                title: {\n                    text: null\n                }\n            },\n            tooltip: {\n               headerFormat: '<span style=\"font-size:10px\">{point.key}</span><table>',\n                pointFormat: '<tr><td style=\"color:{series.color};padding:0\">Ttulos: {point.valor} </b></b></td>' +\n                    '</tr>'+\n                    '<tr>' +\n                    '<td style=\"padding:0\"><b>{point.y:.1f} %</b></td></tr>',\n                footerFormat: '</table>',\n                shared: true,\n                useHTML: true,\n                backgroundColor: '#ffffff'\n            },\n            plotOptions: {\n                column: {\n                    pointPadding: 0,\n                    borderWidth: 0\n                }\n            },\n            credits: { enabled: false },\n\t\t\texporting: { enabled: false },\n            series: [{\n                name: ' ',\n                color: '#f2361d',\n                data: dataTemp.FiscalizacionPorMIieralM.obj,\n    \n            }]\n        });\n\t\t$.each(dataTemp.FiscalizacionPorMIieralM.series, function(k, v){\n\t\t\tvar html,\n\t\t\t\tvalor = dataTemp.FiscalizacionPorMIieralM.valor[k];\n\t\t\t\tcat = dataTemp.FiscalizacionPorMIieralM.categories[k];\n\n\t\t\thtml = '<div class=\"box-label\"><span class=\"category\">'+cat+'</span><span class=\"valor\"><p>'+valor+'</p></span><span class=\"percent\">'+v+'%</span></div>'\n\n\t\t\t$('.FiscalizacionPorMIieral .graph-extra-lables').append(html);\n\n\t\t})\n\t\t$('.FiscalizacionPorMIieral .graph-extra-lables').addClass('boxes-by-'+dataTemp.FiscalizacionPorMIieralM.series.length)\n\t\t$('.FiscalizacionPorMIieral').addClass('data-bars-'+dataTemp.FiscalizacionPorMIieralM.obj.length + ' data-bars-'+ dataTemp.FiscalizacionPorMIieralM.showNoData)\n\t\t\n\n\n\n\t\t$('#FiscalizacionMineralesPorActividad').highcharts({\n            chart: {\n                type: 'column'\n            },\n            title: {\n\t\t\t\ttext: null,\n\t\t\t\tstyle: {\n\t\t\t\t\tcolor: '#555',\n\t\t\t\t\t'font-size': '1.2em'\n\t\t\t\t},\n\t\t\t\tmargin: 30\n\t\t\t},\n            subtitle: {\n                text: null\n            },\n            xAxis: {\n                categories: dataTemp.FiscalizacionMineralesPorActividadM.categories,\n                labels: {\n\t\t\t\t\t\n\t\t\t\t\trotation: 0,\n\t\t\t\t\talign: 'right',\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\t'font-size': '0'\n\t\t\t\t\t}\n\t\t\t\t}\n            },\n            yAxis: {\n                min: 0,\n                max: 100,\n                title: {\n                    text: null\n                }\n            },\n            tooltip: {\n               headerFormat: '<span style=\"font-size:10px\">{point.key}</span><table>',\n                pointFormat: '<tr><td style=\"color:{series.color};padding:0\">Ttulos: {point.valor} </b></b></td>' +\n                    '</tr>'+\n                    '<tr>' +\n                    '<td style=\"padding:0\"><b>{point.y:.1f} %</b></td></tr>',\n                footerFormat: '</table>',\n                shared: true,\n                useHTML: true,\n                backgroundColor: '#ffffff'\n            },\n            plotOptions: {\n                column: {\n                    pointPadding: 0,\n                    borderWidth: 0\n                }\n            },\n            credits: { enabled: false },\n\t\t\texporting: { enabled: false },\n            series: [{\n                name: ' ',\n                color: '#f2361d',\n                data: dataTemp.FiscalizacionMineralesPorActividadM.obj\n    \n            }]\n        });\n\t\t$.each(dataTemp.FiscalizacionMineralesPorActividadM.series, function(k, v){\n\t\t\tvar html,\n\t\t\t\tvalor = dataTemp.FiscalizacionMineralesPorActividadM.valor[k];\n\t\t\t\tcat = dataTemp.FiscalizacionMineralesPorActividadM.categories[k];\n\n\t\t\thtml = '<div class=\"box-label\"><span class=\"category\">'+cat+'</span><span class=\"valor\"><p>'+valor+'</p></span><span class=\"percent\">'+v+'%</span></div>'\n\n\t\t\t$('.FiscalizacionMineralesPorActividad .graph-extra-lables').append(html);\n\n\t\t})\n\t\t$('.FiscalizacionMineralesPorActividad .graph-extra-lables').addClass('boxes-by-'+dataTemp.FiscalizacionMineralesPorActividadM.series.length)\n\t\t$('.FiscalizacionMineralesPorActividad').addClass('data-bars-'+dataTemp.FiscalizacionMineralesPorActividadM.obj.length + ' data-bars-'+ dataTemp.FiscalizacionMineralesPorActividadM.showNoData)\n\t\t\n\n\n\n\n\t\t$('#FiscalizacionPorTipoRecursoPorDepartamentoM').highcharts({\n            chart: {\n                type: 'column'\n            },\n            title: {\n\t\t\t\ttext: null,\n\t\t\t\tstyle: {\n\t\t\t\t\tcolor: '#555',\n\t\t\t\t\t'font-size': '1.2em'\n\t\t\t\t},\n\t\t\t\tmargin: 30\n\t\t\t},\n            subtitle: {\n                text: null\n            },\n            xAxis: {\n                categories: dataTemp.FiscalizacionPorTipoRecursoPorDepartamentoM.categories,\n                type: 'category',\n                labels: {\n                    rotation: -90,\n                    align: 'right',\n                    style: {\n                        fontSize: '13px',\n                        fontFamily: 'Verdana, sans-serif'\n                    }\n                }\n            },\n            yAxis: {\n                min: 0,\n                max: 100,\n                title: {\n                    text: null\n                }\n            },\n            tooltip: {\n                headerFormat: '<span style=\"font-size:10px\">{point.key}</span><table>',\n                pointFormat: '<tr><td style=\"color:{series.color};padding:0\">Ttulos Fiscalizados: {point.valor} </b></b></td>' +\n                    '</tr>'+\n                     '<tr><td style=\"padding:0\">Ttulos Vigentes: {point.vigentes} </b></b></td>' +\n                    '</tr>'+\n                    '<tr>' +\n                    '<td style=\"padding:0\"><b>{point.y:.1f} %</b></td></tr>',\n                footerFormat: '</table>',\n                shared: true,\n                useHTML: true,\n                backgroundColor: '#ffffff'\n            },\n            plotOptions: {\n                column: {\n                    pointPadding: 0,\n                    borderWidth: 0\n                }\n            },\n            credits: { enabled: false },\n\t\t\texporting: { enabled: false },\n            series: [{\n                name: ' ',\n                color: '#f2361d',\n                data: dataTemp.FiscalizacionPorTipoRecursoPorDepartamentoM.obj,\n                dataLabels: {\n                   \n                    style: {\n                        fontSize: '13px',\n                        fontFamily: 'Verdana, sans-serif',\n                        textShadow: '0 0 3px black'\n                    }\n                }\n\n    \n            }]\n        });\n\t\n\t$('.fisc-camp-type-dep[data-subtipo=\"M\"]').addClass('data-bars-'+dataTemp.FiscalizacionPorTipoRecursoPorDepartamentoM.obj.length + ' data-bars-'+ dataTemp.FiscalizacionPorTipoRecursoPorDepartamentoM.showNoData)\n\n\t$('#FiscalizacionPorTipoRecursoPorDepartamentoH').highcharts({\n            chart: {\n                type: 'column'\n            },\n            title: {\n\t\t\t\ttext: null,\n\t\t\t\tstyle: {\n\t\t\t\t\tcolor: '#555',\n\t\t\t\t\t'font-size': '1.2em'\n\t\t\t\t},\n\t\t\t\tmargin: 30\n\t\t\t},\n            subtitle: {\n                text: null\n            },\n            xAxis: {\n                categories: dataTemp.FiscalizacionPorTipoRecursoPorDepartamentoH.categories,\n                type: 'category',\n                labels: {\n                    rotation: -90,\n                    align: 'right',\n                    style: {\n                        fontSize: '13px',\n                        fontFamily: 'Verdana, sans-serif'\n                    }\n                }\n            },\n            yAxis: {\n                min: 0,\n                max: 100,\n                title: {\n                    text: null\n                }\n            },\n            tooltip: {\n               headerFormat: '<span style=\"font-size:10px\">{point.key}</span><table>',\n                pointFormat: '<tr><td style=\"color:{series.color};padding:0\">Campos Fiscalizados: {point.valor} </b></b></td>' +\n                    '</tr>'+\n                    '<tr><td style=\"color:padding:0\">Campos Vigentes: {point.vigentes} </b></b></td>' +\n                    '</tr>'+\n                    '<tr>' +\n                    '<td style=\"padding:0\"><b>{point.y:.1f} %</b></td></tr>',\n                footerFormat: '</table>',\n                shared: true,\n                useHTML: true,\n                backgroundColor: '#ffffff'\n            },\n            plotOptions: {\n                column: {\n                    pointPadding: 0,\n                    borderWidth: 0\n                }\n            },\n            credits: { enabled: false },\n\t\t\texporting: { enabled: false },\n            series: [{\n                name: ' ',\n                color: '#f2733c',\n                data: dataTemp.FiscalizacionPorTipoRecursoPorDepartamentoH.obj,\n                dataLabels: {\n                   \n                    style: {\n                        fontSize: '13px',\n                        fontFamily: 'Verdana, sans-serif',\n                        textShadow: '0 0 3px black'\n                    }\n                }\n    \n            }]\n        });\n\t\t\n\t\t$('.fisc-camp-type-dep[data-subtipo=\"H\"]').addClass('data-bars-'+dataTemp.FiscalizacionPorTipoRecursoPorDepartamentoH.obj.length + ' data-bars-'+ dataTemp.FiscalizacionPorTipoRecursoPorDepartamentoH.showNoData)\n\t}\n\t\n\treturn new Infographic()\n});\n","define('app/filters/Option',['lib/mvc/Observable'], function(Observable){\n\tvar Option = new Class(Observable, {\n\n\t\tinitialize: function(data){\n\t\t\t$.extend(this, data)\n\t\t\tthis.active = ko.observable(false)\n\t\t\tthis.visible = ko.observable(true)\n\t\t\tthis.important = ko.observable(false)\n\t\t},\n\n\t\ttoggleActive: function(){\n\t\t\t// debugger;\n\t\t\tthis.active(!this.active())\n\t\t\tif(this.active() && this.dependsOn){\n\t\t\t\tthis.fireEvent('require-activate', this.dependsOn)\n\t\t\t}\n\n\t\t\t//debugger;\n\t\t\t//\n\t\t\t// if(this.active()){\n\t\t\t\t// this.fireEvent('activated-by-user', this.value)\n\t\t\t// }\n\t\t\tthis.fireEvent('options-changed', this)\n\t\t},\n\n\t\tsetActive: function( bool, ignoreNotification ){\n\n\t\t\t//debugger;\n\t\t\tthis.active( typeof bool == 'boolean' ? bool : true)\n\t\t\tif( !ignoreNotification ){\n\t\t\t\tthis.fireEvent('options-changed', this, true)\n\t\t\t}\n\t\t\tif(this.dependsOn && this.active()){\n\t\t\t\tthis.fireEvent('require-activate', this.dependsOn)\n\t\t\t}\n\n\n\n\t\t},\n\n\t\tsetVisibility: function(bool){\n\t\t\tthis.visible(bool)\n\t\t},\n\n\t\tgetName: function(){\n\t\t\treturn this.name //+ (this.dependsOn ? this.dependsOn[0].id : '')\n\t\t},\n\t\tgetSubTipo: function(){\n\t\t\t//console.log(this);\n\t\t\t\n\t\t\tif(this.subTipo){\n\t\t\t\treturn this.subTipo\t\n\t\t\t}else{\n\t\t\t\treturn 'none'\n\t\t\t}\n\t\t\t//return this.subTipo //+ (this.dependsOn ? this.dependsOn[0].id : '')\n\t\t},\n\t\tgetValue: function(){\n\t\t\t//console.log(this);\n\t\t\t\n\t\t\tif(this.value){\n\t\t\t\treturn this.value\t\n\t\t\t}else{\n\t\t\t\treturn 'none'\n\t\t\t}\n\t\t\t//return this.subTipo //+ (this.dependsOn ? this.dependsOn[0].id : '')\n\t\t}\n\n\t})\n\n\treturn Option\n});\n","/*global ko, define, Class, Event*/\ndefine('app/filters/Filter',['lib/mvc/Observable',\n\t\t'./Option', 'app/controller/AppState',\n\t],\n\tfunction(\n\t\tObservable,\n\t\tOption,\n\t\tAppState\n\t){\n\t'use strict';\n\n\tvar defaultText = document.body.getAttribute('data-periods-default-text'),\n\t\tsearchTimeout\n\tdocument.body.removeAttribute('data-periods-default-text')\n\n\tvar Filter = new Class(Observable, {\n\t\tinitialize: function( data ){\n\t\t\tvar option, tempArray = [], self = this\n\t\t\t$.extend(this, data)\n\n\t\t\tthis.options = ko.observableArray()\n\t\t\tthis.usaServicioAjax = !!data.usaServicioAjax\n\n\t\t\tif( this.parameter === 'campoProyecto' ){\n\t\t\t\tthis.isExclusive = true\n\t\t\t\tthis.excludes = ['region', 'departamento', 'municipio']\n\t\t\t}\n\n\t\t\tif( !this.usaServicioAjax ){\n\t\t\t\tfor(var i=0; i<this.items.length; i++){\n\t\t\t\t\toption = new Option(this.items[i])\n\t\t\t\t\toption.active.subscribe(this.setActive.bind(this))\n\t\t\t\t\toption.on('require-activate', this.optionActivated.bind(this))\n\t\t\t\t\toption.on('options-changed', this.optionActivatedByUser.bind(this))\n\t\t\t\t\ttempArray[i] = option\n\t\t\t\t}\n\t\t\t\ttempArray.sort( this.alphabetSorting )\n\t\t\t}\n\t\t\t\n\t\t\tthis.options( tempArray )\n\n\t\t\tthis.active = ko.observable(false)\n\t\t\tthis.visible = ko.observable(false)\n\t\t\tthis.hidden = ko.observable(true)\n\t\t\t// this.hidden.subscribe(function(){\n\t\t\t// \tconsole.log(self.hidden(), self.parameter)\n\t\t\t// })\n\n\t\t\tthis.optionChanged = ko.observable()\n\n\n\t\t\tthis.elems = {}\n\t\t\tthis.isLoading = ko.observable( false )\n\t\t\tthis.extraClasses =  ko.computed(function(){\n\t\t\t\tif( self.usaServicioAjax ){\n\t\t\t\t\tif( self.isLoading() ){\n\t\t\t\t\t\treturn 'loading'\n\t\t\t\t\t}\n\t\t\t\t\tif( !self.options().length ){\n\t\t\t\t\t\treturn 'empty'\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn ''\n\t\t\t})\n\t\t\tthis.testcat = ko.computed(function(){\n\t\t\t\t\n\t\t\t\t\n\n\t\t\t}, this)\n\t\t\tthis.getNameStatus =  ko.computed(function(){\n\n\t\t\t\tvar actived = '',\n\t\t\t\t\toption,\n\t\t\t\t\topts = this.options(),\n\t\t\t\t\tstate = AppState.state\n\n\t\t\t\n\t\t\t\tfor(var i = opts.length; i--;){\n\t\t\t\t\toption = opts[i]\n\t\t\t\t\tif(option.active()) actived +=  option.name + ', '\n\t\t\t\t}\n\n\t\t\t\tvar nameoption = actived.replace(/\\,\\s$/, '');\n\t\t\t\t\n\t\t\t\tif(this.parameter === \"tipoRecursoNaturalFiscalizacion\" && nameoption != \"\"){\n\t\t\t\t\t//debugger;\n\t\t\t\t\t//debugger;\n\t\t\t\t\t//console.log(option.name, state, AppState)\n\t\t\t\t\t//console.log(option.name, nameoption)\n\t\t\t\t\tvar valueSubtipo;\n\n\t\t\t\t\tif( nameoption === \"Todos\"){\n\t\t\t\t\t\tvalueSubtipo = \"-1\"\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvalueSubtipo = nameoption.substr(0, 1)\n\t\t\t\t\t}\n\n\t\t\t\t\tnameoption = nameoption.toLowerCase()\n\n\t\t\t\t\t//console.log($(window))\n\t\t\t\t\t//debugger;\n\t\t\t\t\t$('.buttons-filter-fiscalization a').removeClass('active')\n\t\t\t\t\t$('.buttons-filter-fiscalization a.filter-to-'+nameoption).addClass('active')\n\t\t\t\t\t$('.map-container').attr('data-option-subtipo', 'fiscalizacion-option-subtipo-'+valueSubtipo)\n\n\t\t\t\t\t$('.filter-group[data-parameter=campoProyectoFiscalizacion] .txt').text($('.buttons-filter-fiscalization a.active').attr('data-text-filter'))\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\tif(this.name == $('.filter-group[data-parameter=campoProyectoFiscalizacion] .txt').text() ){\n\t\t\t\t\t//debugger;\n\t\t\t\t\tthis.name = $('.buttons-filter-fiscalization a.active').attr('data-text-filter')\n\t\t\t\t\t//this.name = $('.filter-group[data-parameter=campoProyectoFiscalizacion] .txt').text()\n\t\t\t\t}\n\n\n\t\t\t\tif(actived)\n\t\t\t\t\tactived = '<span class=\"no-bold\">' + this.name + ':  </span>' + actived.replace(/\\,\\s$/, '')\n\t\t\t\telse\n\t\t\t\t\tactived = this.name\n\n\t\t\t\t\n\t\t\t\treturn actived\n\t\t\t}, this)\n\n\t\t\tthis.getNameDefault =  ko.computed(function(){\n\t\t\t\tvar actived = '',\n\t\t\t\t\topts = this.options(),\n\t\t\t\t\toption\n\n\t\t\t\tfor(var i = opts.length; i--;){\n\t\t\t\t\toption = opts[i]\n\t\t\t\t\tif(option.active()) actived +=  option.name + ', '\n\t\t\t\t}\n\t\t\t\tif(actived){\n\t\t\t\t\tactived = actived.replace(/\\,\\s$/, '')\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tactived = defaultText\n\t\t\t\t}\n\t\t\t\treturn actived\n\t\t\t}, this)\n\n\t\t\tthis.toggleVisibleBinded = this.toggleVisible.bind(this)\n\t\t},\n\n\t\tfilter: function(){\n\t\t},\n\n\t\ttoggleVisible: function(data, evt){\n\t\t\tvar elem = evt && $(evt.target),\n\t\t\t\tisVisible = this.visible()\n\n\t\t\tif( elem ){\n\t\t\t\tthis.elem = elem\n\t\t\t}\n\t\t\t\n\t\t\tthis.onToggle()\n\n\t\t\tif(!isVisible){\n\t\t\t\tthis.show()\n\t\t\t}else{\n\t\t\t\tif( evt ) evt.stopPropagation()\n\t\t\t\tthis.hide()\n\t\t\t}\n\n\t\t\tif(evt instanceof Event){\n\t\t\t\tif(evt.stopPropagation){\n\t\t\t\t\tevt.stopPropagation()\n\t\t\t\t}else{\n\t\t\t\t\twindow.event.cancelBubble = true\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tsetActive: function(){\n\t\t\t// console.log('damn')\n\t\t\tvar areActive = this.getActive()\n\t\t\tthis.active(areActive.length)\n\t\t\tif( this.isExclusive && this.active() ){\n\t\t\t\t//debugger;\n\t\t\t\t// console.log('firing unselectall', this.parameter, false, this.excludes) \n\t\t\t\tthis.fireEvent('unselect-all-filters', this.parameter, false, this.excludes)\n\t\t\t}\n\t\t\tthis.fireEvent('option-activated', this, areActive)\n\t\t},\n\n\t\tgetActive: function(){\n\t\t\tvar opts = this.options(),\n\t\t\t\toption,\n\t\t\t\tareActive = []\n\t\t\tfor(var i = 0; i < opts.length; i++){\n\t\t\t\toption = opts[i]\n\t\t\t\tif(option.active()) areActive.push( option )\n\t\t\t}\n\t\t\treturn areActive\n\t\t},\n\n\t\tdisActive: function(){\n\t\t\tvar opts = this.options(),\n\t\t\t\toption\n\t\t\tfor(var i = opts.length; i--;){\n\t\t\t\toption = opts[i]\n\t\t\t\tif(option.active()) option.setActive(false)\n\t\t\t}\n\t\t},\n\n\t\toptionClicked: function(parent, evt, option){\n\t\t\tvar target = evt.target,\n\t\t\t\tchild = ko.dataFor(target),\n\t\t\t\tstate = AppState.state,\n\t\t\t\tvalue = child.value;\n\t\t\t\t\n\t\t\t\t//debugger;\n\n\t\t\t\t//console.log(this, $(this), state, AppState, this.getNameStatus(), self, evt.target.dataset.value);\n\n\t\t\t\t\n\t\t\t\tif(this.parameter == \"tipoRecursoNaturalFiscalizacion\"){\n\t\t\t\t\tif(state == '')\n\t\t\t\t\tstate = 'fiscalizacion'\n\n\t\t\t\t\t$('.map-container').attr('data-option-subtipo', state.toLowerCase() + '-option-subtipo-'+value)\n\n\t\t\t\t}\n\n\t\t\tif($(evt.target).hasClass('option'))\n\t\t\t\tchild.toggleActive()\n\t\t},\n\n\t\toptionActivated: function(options){\n\t\t\tthis.fireEvent('activate-options-related', options)\n\t\t},\n\n\t\toptionActivatedByUser: function(option, stopBubbling){\n\t\t\tvar opt,\n\t\t\topts = this.getActive()\n\t\t\t//debugger;\n\t\t\tfor(var i = opts.length; i--;){\n\t\t\t\topt = opts[i]\n\t\t\t\tif( !this.esMultiple &&\n\t\t\t\t\toption.value !== opt.value ){\n\t\t\t\t\topt.setActive( false, 'ignoreNotification' )\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif('periodosFiscalizacion' == this.parameter){\n\t\t\t\t$('#info-select-list-period').trigger('click')\n\t\t\t}\n\t\t\t\n\t\t\tif( !stopBubbling ){\n\t\t\t\tthis.fireEvent('activated-by-user', this.parameter, this.getActive())\n\t\t\t}\n\t\t},\n\n\t\tgetOptionByValue: function(value){\n\t\t\tvar opts = this.options(), i = 0\n\t\t\tfor(; i<opts.length; i++){\n\t\t\t\tif(opts[i].value === value)\n\t\t\t\t\treturn opts[i]\n\t\t\t}\n\t\t},\n\n\t\tactivateOptionByValue: function( value ){\n\t\t\tvar opt = this.getOptionByValue( value )\n\t\t\tif( opt ) opt.setActive()\n\t\t},\n\n\t\tfilterOptions: function(data, evt){\n\t\t\tvar srt = evt.target.value,\n\t\t\t\topts = this.options(),\n\t\t\t\topt, self = this\n\n\t\t\tif( !this.usaServicioAjax ){\n\t\t\t\tfor(var i=0; i<opts.length; i++){\n\t\t\t\t\topt = opts[i]\n\t\t\t\t\topt.setVisibility(!srt || opt.name.score(srt) > 0)\n\t\t\t\t}\n\t\t\t}else if( srt.length > 2 ){\n\t\t\t\tself.options([])\n\t\t\t\tself.isLoading(true)\n\t\t\t\tclearTimeout( searchTimeout )\n\t\t\t\tsearchTimeout = setTimeout(function(){\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\tmethod: 'get',\n\t\t\t\t\t\turl: self.urlServicioAjax,\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tquery: srt\n\t\t\t\t\t\t}\n\t\t\t\t\t}).done(function( data ) {\n\t\t\t\t\t\tvar opts = data.filters ? data.filters[0].items : [],\n\t\t\t\t\t\t\ttempArray = []\n\n\t\t\t\t\t\tfor(var i=0; i<opts.length; i++){\n\t\t\t\t\t\t\topt = new Option(opts[i])\n\t\t\t\t\t\t\topt.active.subscribe(self.setActive.bind(self))\n\t\t\t\t\t\t\topt.on('require-activate', self.optionActivated.bind(self))\n\t\t\t\t\t\t\topt.on('options-changed', self.optionActivatedByUser.bind(self))\n\t\t\t\t\t\t\ttempArray[i] = opt\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tself.options( tempArray )\n\t\t\t\t\t\tself.isLoading(false)\n\t\t\t\t\t})\n\t\t\t\t}, 1000)\n\t\t\t}else{\n\t\t\t\tself.options([])\n\t\t\t}\n\t\t},\n\n\t\tgetQuery: function(){\n\t\t\tif(this.active()){\n\t\t\t\tvar query = this.parameter + '=',\n\t\t\t\t\topts = this.options(),\n\t\t\t\t\toption\n\t\t\t\t\n\t\t\t\tfor(var i = opts.length; i--;){\n\t\t\t\t\toption = opts[i]\n\t\t\t\t\tif(option.active()) query +=  encodeURIComponent( option.value ) + ','\n\t\t\t\t}\n\n\t\t\t\tquery = query.replace(/\\,$/, '')\n\n\t\t\t\treturn query\n\t\t\t}\n\t\t\treturn ''\n\t\t},\n\n\t\tonToggle: function(){\n\t\t\tthis.elem.parents('.filters-group')\n\t\t\t\t//hide all filters\n\t\t\t\t.find('.filter-group')\n\t\t\t\t.end()\n\n\t\t\t//clear the filter inputs only for no ajax\n\t\t\tif( !this.usaServicioAjax ){\n\t\t\t\tthis.elem.parents('.filters-group input')\n\t\t\t\t\t.val('').keyup()\n\t\t\t}\n\t\t},\n\n\t\thide: function(){\n\t\t\tvar self = this\n\n\t\t\tthis.onToggle()\n\t\t\t// this.elem.parents('.filters-group').find('input')\n\t\t\t// \t\t.val('').keyup()\n\t\t\t\n\t\t\t$(document).off('click', this.toggleVisibleBinded)\n\t\t\t\n\t\t\tself.visible( false )\n\n\t\t\tif(this.elem.hasClass('extra')){\n\t\t\t\tthis.elem.next()\n\t\t\t\t\t.slideUp(200, function(){\n\t\t\t\t\t\t$(this).hide().parent()\n\t\t\t\t\t\t\t.removeClass('visible')\n\t\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tthis.elem.next().delay(100)\n\t\t\t\t\t.animate({width: 0}, 250, function(){\n\t\t\t\t\t\t$(this).hide().parent()\n\t\t\t\t\t\t\t.removeClass('visible')\n\t\t\t\t\t\tself.visible(false)\n\t\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\tshow: function(){\n\t\t\tvar self = this\n\n\t\t\tthis.onToggle()\n\t\t\tthis.visible( true )\n\n\t\t\tif(this.elem.hasClass('extra')){\n\t\t\t\tthis.elem.next()\n\t\t\t\t\t.slideDown(200)\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t$(document).on('click', self.toggleVisibleBinded)\n\t\t\t\t}, 10)\n\t\t\t}else{\n\t\t\t\tthis.elem.next()\n\t\t\t\t\t.width(0)\n\t\t\t\t\t.show()\n\t\t\t\t\t.delay(100)\n\t\t\t\t\t.animate({width: 200}, 250)\n\t\t\t}\n\t\t\tthis.elem.parent().addClass('visible')\n\n\t\t\t// SORTING\n\t\t\tthis.fireEvent('filters-gonna-show', this)\n\t\t},\n\n\t\talphabetSorting: function(left, right){\n\t\t\treturn left.name == right.name ? 0 : (left.name < right.name ? -1 : 1)\n\t\t},\n\n\t\tsortOptionsBy: function( fgsActive ){\n\t\t\tvar opts = this.options(),\n\t\t\t\toption\n\t\t\t\n\t\t\tif( !this.filterByType ){\n\t\t\t\tthis.filterByType = function( dependency ){\n\t\t\t\t\tvar activedOptions\n\t\t\t\t\tfor(var i=0; i<fgsActive.length; i++){\n\t\t\t\t\t\tactivedOptions = fgsActive[i].getActive()\n\t\t\t\t\t\tfor(var j=0; j<activedOptions.length; j++){\n\t\t\t\t\t\t\tif(\tfgsActive[i].parameter == dependency.type &&\n\t\t\t\t\t\t\t\tactivedOptions[j].value == dependency.id ){\n\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false\n\t\t\t\t\t// return dependency.type === type &&  dependency.id === id\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tfor(var i = opts.length; i--;){\n\t\t\t\toption = opts[i]\n\t\t\t\tif(!option.dependsOn){\n\t\t\t\t\toption.sortBy = 2+option.name\n\t\t\t\t\toption.important(false)\n\t\t\t\t}else{\n\t\t\t\t\tif( option.dependsOn.filter( this.filterByType ).length ){\n\t\t\t\t\t\toption.sortBy = 1+option.name\n\t\t\t\t\t\toption.important(true)\n\t\t\t\t\t}else{\n\t\t\t\t\t\toption.sortBy = 2+option.name\n\t\t\t\t\t\toption.important(false)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.options.sort( function( left, right ) {\n\t\t\t\treturn left.sortBy == right.sortBy ? 0 : (left.sortBy < right.sortBy ? -1 : 1)\n\t\t\t})\n\t\t},\n\n\t\tselectOption: function( id ) {\n\t\t\tvar opts = this.options(),\n\t\t\t\toption\n\n\t\t\t//debugger;\n\t\t\t\n\t\t\tfor(var i = opts.length; i--;){\n\t\t\t\toption = opts[i]\n\t\t\t\tif( option.value == id ){\n\t\t\t\t\toption.setActive( true )\n\t\t\t\t}else if( !this.esMultiple ){\n\t\t\t\t//}else if( !this.esMultiple ||\n\t\t\t\t//\t( this.parameter.indexOf('period') && AppState.getState().state === 'Fiscalizacion' ) ){\n\t\t\t\t\toption.setActive( false, 'ignoreNotification' )\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n\n\treturn Filter\n});\n","/*global ko, define, Class*/\n/**\n * FiltersGroup\n *\n * This Class manages group of filters\n * easing the action of activating and\n * deactivating groups of filters like\n * Projects, Resources... and so on.\n */\ndefine('app/filters/FiltersGroup',['lib/mvc/Observable',\n\t\t'./Filter',\n\t\t'app/controller/appStates'],\n\t\tfunction( Observable, Filter, appStates ){\n\t\t\t\n\t\t\tvar FiltersGroup = new Class( Observable, {\n\t\t\t// The type of the instance\n\t\t\t// this can be any of FiltersGroup.types\n\t\t\ttype: null,\n\t\t\tfilters: null,\n\t\t\tarrayFilters: [],\n\t\t\tloading: true,\n\t\t\tvisible: false,\n\n\n\t\t/**\n\t\t * Constructor\n\t\t *\n\t\t * @param  FiltersGroup.types type string with the type\n\t\t */\n\t\tinitialize: function(type){\n\t\t\tthis.type = type\n\t\t\tthis.filters = ko.observableArray()\n\t\t\tthis.loading = ko.observable( true )\n\t\t\tthis.visible = ko.observable( false )\n\t\t\tthis.period = null\n\t\t\tthis.visible.subscribe(this.togglePeriods.bind(this))\n\t\t},\n\n\t\t/**\n\t\t * Adds a Filter to the not observable array of filters\n\t\t * @param Object properties of the Filter to construct and add\n\t\t */\n\t\taddFilter: function( properties ){\n\t\t\tvar self = this,\n\t\t\t\tfilter\n\t\t\t\n\t\t\t// if( properties.usaServicioAjax ){\n\t\t\t// \tfilter = new FilterSelect2( properties )\n\t\t\t// }else{\n\t\t\t\tfilter = new Filter( properties )\n\t\t\t// }\n\n\n\t\t\t// Events bindings\n\t\t\tfilter.on('activate-options-related', self.activateOptionsRelated.bind(self))\n\n\t\t\tif(filter.parameter.match(/(region)|(departamento)|(municipio)|(fiscalizacion)/)){\n\t\t\t\tfilter.on('activated-by-user',\n\t\t\t\t\tself.fireEvent.bind(self, 'territory-activated'))\n\t\t\t}\n\n\t\t\tfilter.on('unselect-all-filters', self.unselectAllFilters.bind(self))\n\t\t\tfilter.on('option-activated', self.fireEvent.bind(self,'option-activated'))\n\t\t\tfilter.on('filters-gonna-show', self.hideOtherFilters.bind(self))\n\t\n\t\t\t// All periods:\n\t\t\t// period, periodo, periodos, periodosRecursos...\n\t\t\tif( filter.parameter.indexOf('period') === 0 ){\n\t\t\t\tfilter.hidden( !this.visible() )\n\t\t\t\tfilter.on('option-activated',\n\t\t\t\t\tself.fireEvent.bind(self, 'period-selected'))\n\t\t\t\tself.period = filter\n\t\t\t\tself.togglePeriods()\n\t\t\t}\n\t\t\tif( filter.parameter.indexOf('campoProyecto') === 0 ){\n\t\t\t\tfilter.on('activated-by-user', function(){\n\t\t\t\t\tself.fireEvent('zoom-out')\n\t\t\t\t})\n\t\t\t}\n\t\t\tself.arrayFilters.push(filter)\n\n\t\t\treturn filter\n\t\t},\n\n\t\t/**\n\t\t * Turns the array of filters\n\t\t * to the ko.observableArray\n\t\t */\n\t\tinstantiateObservable: function(){\n\t\t\tthis.filters( this.arrayFilters )\n\t\t\t// Empty memory\n\t\t\tthis.arrayFilters = null\n\t\t\tthis.loading( false )\n\t\t},\n\n\t\t/**\n\t\t * Actiavte the options related,\n\t\t * it's assumed that the related filter\n\t\t * is in this group of filters\n\t\t *\n\t\t * @param  {Array<Option>} opts\n\t\t */\n\t\tactivateOptionsRelated: function( opts ){\n\t\t\tvar filter, option,\n\t\t\t\tfilters = this.filters(),\n\t\t\t\ti, j\n\n\t\t\tfor( i=0; i<opts.length; i++ ){\n\t\t\t\tfor( j=0; j<filters.length; j++ ){\n\t\t\t\t\tfilter = filters[j]\n\t\t\t\t\tif( filter.parameter == opts[i].type ){\n\t\t\t\t\t\tfilter.activateOptionByValue( opts[i].id )\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Wether the user activate or deactivate a\n\t\t * territory option of one of the filters this\n\t\t * fires the event to the Observer in a proxy way\n\t\t */\n\t\tactivatedByUser: function(){\n\t\t\tthis.fireEvent.apply(this, 'territory-activated', [].slice.call( arguments ))\n\t\t},\n\n\t\thideOtherFilters: function( filterActivated, cancelNotify ){\n\t\t\tvar filters = this.filters(),\n\t\t\t\tfilter,\n\t\t\t\tactivated = [],\n\t\t\t\tvisible\n\n\n\t\t\tfor(var i = 0; i < filters.length; i++){\n\t\t\t\tfilter = filters[i]\n\t\t\t\tif( filter.active() ){\n\t\t\t\t\tactivated.push( filter )\n\t\t\t\t}\n\t\t\t\t// Hide other filters in this group\n\t\t\t\tif( filter.visible() &&\n\t\t\t\t\tfilter.parameter != filterActivated.parameter ){\n\t\t\t\t\tfilter.hide()\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfilterActivated.sortOptionsBy( activated )\n\n\t\t\tif( !cancelNotify ) this.fireEvent('filter-activated', this, filterActivated)\n\n\t\t\tthis.fireEvent('filters-gonna-show', filterActivated)\n\t\t\t// This assummes that the related filters are in this group\n\t\t},\n\n\t\thideAllFilters: function(){\n\t\t\tvar filters = this.filters(),\n\t\t\t\tfilter\n\n\t\t\tfor(var i = filters.length; i--;){\n\t\t\t\tfilter = filters[i]\n\t\t\t\tif( filter.visible() ){\n\t\t\t\t\tfilter.hide()\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\ttogglePeriods: function(){\n\t\t\tif( this.period ){\n\t\t\t\tthis.period.hidden(!this.visible())\n\t\t\t}\n\n\t\t},\n\n\t\tgetQuery: function(){\n\t\t\tvar filters = this.filters(),\n\t\t\t\tfilter,\n\t\t\t\tfiltersString = ''\n\n\t\t\tfor(var i = filters.length; i--;){\n\t\t\t\tfilter = filters[i]\n\t\t\t\tif( filter.active() ){\n\t\t\t\t\tfiltersString += filter.getQuery() + '&'\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn filtersString\n\t\t},\n\n\t\tselectFilterWith: function( type, id ){\n\t\t\tvar filters = this.filters(),\n\t\t\t\tfilter\n\t\t\t\n\t\t\tfor(var i = filters.length, j; i--;){\n\t\t\t\tfilter = filters[i]\n\t\t\t\tif( filter.parameter === type ) {\n\t\t\t\t\tif( id instanceof Array ){\n\t\t\t\t\t\tfor(j=id.length; j--;){\n\t\t\t\t\t\t\tfilter.selectOption( id[j] )\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tfilter.selectOption( id )\n\t\t\t\t\t}\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\thasFiltersActive: function(){\n\t\t\tvar filters = this.filters(),\n\t\t\t\tfilter\n\n\t\t\tfor(var i = filters.length; i--;){\n\t\t\t\tfilter = filters[i]\n\t\t\t\tif( filter.active() ) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false\n\t\t},\n\n\t\tunselectAllFilters: function( except, noNotify, filtersToExclude ){\n\t\t\tvar filters = this.filters(),\n\t\t\t\tfilter\n\n\t\t\t// console.log('unselect all filters in '+this.type, except, noNotify, filtersToExclude)\n\t\t\tfor(var i = filters.length; i--;){\n\t\t\t\tfilter = filters[i]\n\t\t\t\t// console.log( filter.parameter, filter.active(), except )\n\t\t\t\tif( filter.active() && filter.parameter !== except){\n\t\t\t\t\t// console.log( filtersToExclude.indexOf( filter.parameter ), filter.parameter )\n\t\t\t\t\tif(\t( filtersToExclude &&\n\t\t\t\t\t\t( filtersToExclude.indexOf( filter.parameter ) !== -1 ) ) ||\n\t\t\t\t\t\t!filtersToExclude ) {\n\t\t\t\t\t\tfilter.disActive()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!noNotify)\n\t\t\t\tthis.fireEvent('unselect-all-filters', this.type, except, filtersToExclude)\n\n\t\t\treturn false\n\t\t},\n\n\t\tunselectExclusives: function( except, a, b ){\n\t\t\t// console.log('disactivating in FG '+except, a, b)\n\t\t\tvar filters = this.filters(),\n\t\t\t\tfilter\n\n\t\t\tfor(var i = filters.length; i--;){\n\t\t\t\tfilter = filters[i]\n\t\t\t\tif( filter.active() && filter.parameter !== except &&\n\t\t\t\t\tfilter.isExclusive && filter.excludes.indexOf(except) != -1 ) {\n\t\t\t\t\tfilter.disActive()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t} )\n\n\treturn FiltersGroup\n});\n","/*global define*/\ndefine('app/utils/Utils',[],function(){\n\t// No more console errors \n\tif(!('console' in window)){\n\t\twindow.console = {\n\t\t\tdata: [],\n\t\t\tlog: function(){\n\t\t\t\tthis.data.push([].slice.call(arguments))\n\t\t\t},\n\t\t\twarn: function(){\n\t\t\t\tthis.data.push([].slice.call(arguments))\n\t\t\t},\n\t\t\terror: function(){\n\t\t\t\tthis.data.push([].slice.call(arguments))\n\t\t\t}\n\t\t}\n\t}\n\n\n\treturn {\n\t\t// toCurrency: toCurrency\n\t}\n});\n","/*global ko, define, Class, Event*/\ndefine('app/filters/FiltersManager',['lib/mvc/Observable',\n\t\t'app/network/Services',\n\t\t'./FiltersGroup',\n\t\t'app/controller/appStates',\n\t\t'app/controller/AppState',\n\t\t'app/utils/Utils',\n\t\t'app/utils/territories'\n\t],\n\tfunction(\n\t\tObservable,\n\t\tServices,\n\t\tFiltersGroup,\n\t\tappStates,\n\t\tAppState,\n\t\tUtils,\n\t\tterritoriesCache\n\t){\n\n\t/**\n\t * Timer to constructuct the query\n\t * (spcially when is activated a related group)\n\t */\n\tvar queryContructTimeout,\n\n\tFiltersManager = new Class(Observable, {\n\n\t\tinitialize: function(){\n\t\t\tvar self = this,\n\t\t\t\ttype,\n\t\t\t\tfilterGroup,\n\t\t\t\tkey\n\n\t\t\t// Flags\n\t\t\tthis.activated = false\n\t\t\tthis.mode = null\n\n\t\t\t// Elements\n\t\t\tthis.elems = {}\n\t\t\tthis.elems.root = $('#controls')\n\t\t\tthis.elems.search = $('#search')\n\t\t\tthis.elems.filterResults = $('#filter-results')\n\t\t\tthis.elems.resetFiltersWrapper = $('#reset-filters-wrapper')\n\t\t\tthis.elems.resetFilters = $('#reset-filters')\n\t\t\tthis.elems.initLink = $('#header .logo, #header .inicio, #footer .inicio')\n\t\t\tthis.elems.share = $('#share')\n\n\t\t\t// Initialize the FiltersGroups\n\t\t\tthis.filtersGroups = {}\n\n\n\t\t\tfor(var i = 0; i < appStates.length; i++){\n\t\t\t\t\tkey = appStates[i]\n\t\t\t\t\tfilterGroup = new FiltersGroup( key )\n\t\t\t\t\tthis.filtersGroups[ key ] = filterGroup\n\t\t\t\t\n\t\t\t\t\tfilterGroup.on('option-activated', function( filterActivated ){\n\t\t\t\t\t\tvar fg \n\t\t\t\t\t\t// console.log('fired with '+filterActivated.parameter)\n\t\t\t\t\t\t// console.log('fired with '+filterActivated.active())\n\t\t\t\t\t\tif( filterActivated.active() ){\n\t\t\t\t\t\t\tfor(var i=0; i<appStates.length; i++){\n\t\t\t\t\t\t\t\tfg = self.filtersGroups[ appStates[i] ]\n\t\t\t\t\t\t\t\tfg.unselectExclusives( filterActivated.parameter )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.notifyNewSearch( filterActivated )\n\t\t\t\t\t})\n\t\t\t\t\t//for polygon zooming\n\t\t\t\t\tfilterGroup.on('territory-activated', self.territoryActivated.bind(self))\n\t\t\t\t\tfilterGroup.on('unselect-all-filters', self.unselectOtherFilterGroups.bind(this))\n\t\t\t\t\tfilterGroup.on('filter-activated', self.checkActivated.bind(self))\n\t\t\t\t\tfilterGroup.on('filters-gonna-show', self.fireEvent.bind(this, 'filters-gonna-show'))\n\t\t\t\t\tfilterGroup.on('zoom-out', self.fireEvent.bind(this, 'zoom-out'))\n\t\t\t}\n\n\t\t\tAppState.on( 'state-change', this.activate.bind( this ) )\n\t\t\tAppState.on( 'filter-reseted', this.unselectAll.bind( this ) )\n\t\t\tAppState.on( 'filter-activated', this.selectFilterWith.bind( this ) )\n\t\t\tAppState.on('view-group-change', function( bool ){\n\t\t\t\tself.viewMode.visible( bool )\n\t\t\t})\n\t\t\t// AppState.on( 'new-search', this.notifyNewSearch.bind( this ) )\n\n\t\t\t// Periods are contained in each filtergroup\n\t\t\t// but they are also contained inside \n\t\t\t// this array of periods for binding\n\t\t\tthis.periods = ko.observableArray()\n\t\t\tthis.periods = ko.observableArray()\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tServices.filters.forProjects().done( self.initializeModels.bind( self ) )\n\t\t\t}, 0)\n\t\t\t\n\t\t\t// Get the filters\n\t\t\tsetTimeout(function(){\n\t\t\t\tself.fireEvent('loading-filters')\n\t\t\t}, 20)\n\t\t\t \n\t\t\tAppState.on('projects-loaded', this.updateStatistics.bind(this))\n\t\t\t\n\t\t\tfunction viewMode(){\n\t\t\t\tthis.visible = ko.observable(true)\n\t\t\t\tthis.toggleVisible = function( bool ){\n\t\t\t\t\tif( typeof bool == 'boolean' && bool === this.visible())\n\t\t\t\t\t\treturn\n\n\t\t\t\t\tif( typeof bool == 'boolean' )\n\t\t\t\t\t\tthis.visible( bool )\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.visible(!this.visible())\n\n\t\t\t\t\tself.toggleControl(this.visible())\n\n\t\t\t\t\tif(bool instanceof Event){\n\t\t\t\t\t\tif(bool.stopPropagation){\n\t\t\t\t\t\t\tbool.stopPropagation()\n\t\t\t\t\t\t}else if(typeof bool != 'boolean'){\n\t\t\t\t\t\t\twindow.event.cancelBubble = true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t\n\t\t\tfunction searchQuery(){\n\t\t\t\tvar that = this\n\t\t\t\tfunction notifyChange(){\n\t\t\t\t\tvar fg, state = AppState.getState().state\n\t\t\t\t\tif( that.query() !== '' ){\n\t\t\t\t\t\t// Query search is exclusive of filters search\n\t\t\t\t\t\tif( state == 'Recursos' || state == 'Produccion' ){\n\t\t\t\t\t\t\tfor(var i=0; i<appStates.length; i++){\n\t\t\t\t\t\t\t\tfg = self.filtersGroups[ appStates[i] ]\n\t\t\t\t\t\t\t\t// HEAD ---> fg.unselectAllFilters(null, true)\n\t\t\t\t\t\t\t\tfg.unselectAllFilters()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself.fireEvent('new-query')\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// self.fireEvent('zoom-out')\n\t\t\t\t\t\tself.hideAllFilters()\n\t\t\t\t\t\tself.resetFilters( true )\n\t\t\t\t\t}else{\n\t\t\t\t\t}\n\n\t\t\t\t\tself.notifyNewSearch()\n\t\t\t\t}\n\t\t\t\tthis.query = ko.observable('')\n\t\t\t\tthis.query.subscribe(notifyChange)\n\t\t\t\tthis.search = notifyChange\n\t\t\t}\n\n\t\t\tthis.searchQuery = new searchQuery()\n\t\t\tthis.viewMode = new viewMode()\n\t\t\t\n\t\t\tthis.resetFilters = ko.observable(false)\n\n\t\t\tko.applyBindings( this.viewMode, $('#toggle-controls')[0] )\n\t\t\tko.applyBindings( this.searchQuery, $('#search')[0] )\n\n\t\t\tthis.elems.initLink.on( 'click', this.unselectAll.bind(this) )\n\n\t\t\t// Get actual state\n\t\t},\n\t\t\n\t\tactivate: function( state, hash, params ){\n\t\t\tvar root = this.elems.root,\n\t\t\t\tactions = root.find('.actions'),\n\t\t\t\tkey,\n\t\t\t\tfg, i\n\n\t\t\t\n\n\t\t\t$('#header nav a').removeClass('selected')\n\t\t\tif( state ){\n\t\t\t\t$('.menu-item-' + state.toLowerCase() ).addClass('selected')\n\t\t\t}else{\n\t\t\t\t$('.menu-item-inicio').addClass('selected')\n\t\t\t}\n\n\t\t\t// Hide other or all filtersGroups\n\t\t\tthis.periods().forEach(function( period ){\n\t\t\t\tperiod.hidden( true )\n\t\t\t})\n\t\t\tif( state !== '' ){\n\t\t\t\tfor(i=0; i<appStates.length; i++){\n\t\t\t\t\tkey = appStates[i]\n\t\t\t\t\tif( key === state ){\n\t\t\t\t\t\tthis.filtersGroups[ key ]\n\t\t\t\t\t\t\t.visible( true )\n\t\t\t\t\t\tactions.find('.search-'+key.toLowerCase())\n\t\t\t\t\t\t\t.removeClass('inactive')\n\t\t\t\t\t}\n\t\t\t\t\telse if( key !== 'Comunes' ){\n\t\t\t\t\t\tthis.filtersGroups[ key ]\n\t\t\t\t\t\t\t.visible( false )\n\t\t\t\t\t\tactions.find('.search-'+key.toLowerCase())\n\t\t\t\t\t\t\t.addClass('inactive')\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.filtersGroups[ key ]\n\t\t\t\t\t\t\t.visible( true )\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t\n\t\t\t\troot.addClass('tabs-mode')\n\t\t\t\t\t.animate({\n\t\t\t\t\t\tmarginLeft: 0,\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t})\n\n\t\t\t\troot.find('.statistics').addClass('small')\n\t\t\t\troot.find('.intro').hide()\n\t\t\t\tthis.elems.search.show()\n\t\t\t\tthis.elems.share.show()\n\n\n\t\t\t\tif(state == 'Fiscalizacion' ){\n\n\t\t\t\t\t$('.buttons-filter-fiscalization').show()\n\n\t\t\t\t\t$('.wrap-gray').addClass('wrap-gray-fiscalization')\n\n\t\t\t\t\tvar attr = $('.map-container').attr('data-option-subtipo');\n\n\t\t\t\t\t$('.map-container').addClass('fiscalizacion-mode')\n\n\t\t\t\t\tif (typeof attr == 'undefined' || attr == '' || attr == 'fiscalizacion-option-subtipo-') {\n\n\t\t\t\t\t\t$('.map-container').attr('data-option-subtipo', 'fiscalizacion-option-subtipo--1')\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar textTmp = $('.buttons-filter-fiscalization a.active').attr('data-text-filter')\n\n\t\t\t\t\t$('.filter-group[data-parameter=campoProyectoFiscalizacion] .txt').text(textTmp)\n\n\n\t\t\t\t}else{\n\t\t\t\t\t$('.buttons-filter-fiscalization').hide()\n\n\t\t\t\t\t$('.wrap-gray').removeClass('wrap-gray-fiscalization')\n\t\t\t\t}\n\n\n\t\t\t\t\n\t\t\t\tif(state != 'Recursos'){\n\t\t\t\t\t$('.legend-resources').hide()\n\t\t\t\t}else{\n\t\t\t\t\t$('.legend-resources').show()\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif( state == 'Recursos' || state == 'Produccion' || state =='Fiscalizacion'){\n\t\t\t\t\troot.find('.statistics').hide()\n\t\t\t\t\t$('#filter-results').hide()\n\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\troot.find('.statistics').show()\n\t\t\t\t\t$('#filter-results').show()\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tfor(i=0; i<appStates.length; i++){\n\t\t\t\t\t//debugger;\n\t\t\t\t\tthis.filtersGroups[ appStates[i] ]\n\t\t\t\t\t\t.visible( false )\n\t\t\t\t}\n\t\t\t\troot.removeClass('tabs-mode')\n\t\t\t\troot.find('.statistics').removeClass('small')\n\t\t\t\troot.find('.statistics').show()\n\t\t\t\troot.find('.intro').show()\n\t\t\t\t$('#filter-results').hide()\n\t\t\t\tthis.elems.search.hide()\n\t\t\t\tthis.elems.share.hide()\n\t\t\t\t\n\t\t\t\tif(\tthis.periods().length ){\n\t\t\t\t\tthis.periods()[0].hidden( false )\n\t\t\t\t\t// root.find('.statistics').addClass('small')\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check reset here too\n\t\t\tthis.resetFilters(false)\n\n\t\t\tfor(i=0; i<appStates.length; i++){\n\t\t\t\tfg = this.filtersGroups[ appStates[i] ]\n\n\t\t\t\tif(fg && fg.visible() && fg.hasFiltersActive()){\n\t\t\t\t\tthis.resetFilters(true)\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( this.searchQuery.query() ) this.resetFilters( true )\n\t\t},\n\n\t\ttoggleControl: function(bool){\n\t\t\tthis.activated = true\n\n\t\t\tif(bool){\n\t\t\t\tthis.elems.root.animate({ marginLeft: 0, left: 0 })\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//FIXME list mode\n\t\t\t\tthis.elems.root.animate({ marginLeft: 0, left: -(this.elems.root.width()) })\n\t\t\t\tthis.hideAllFilters()\n\t\t\t\tif(AppState.listMode)\n\t\t\t\t\tAppState.setListMode(false)\n\t\t\t}\n\n\t\t\treturn false\n\t\t},\n\n\t\tinitializeModels: function(response){\n\t\t\tvar rawData = response.filters,\n\t\t\t\ttempArray = [],\n\t\t\t\tself = this, sectionName\n\n\t\t\tif(rawData){\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tvar length = rawData.length,\n\t\t\t\t\t\ti = 0, j = 0,\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tfilterInstance,\n\t\t\t\t\t\tst = AppState.getState(),\n\t\t\t\t\t\tterritory\n\n\t\t\t\t\tfor(; i<length; i++){\n\t\t\t\t\t\tdata = rawData[i]\n\t\t\t\t\t\tsectionName = data.seccionAplicativo\n\t\t\t\t\t\tif( sectionName.match(/fiscalizacion/i) ){\n\t\t\t\t\t\t\tsectionName = 'Fiscalizacion'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfilterInstance = self.filtersGroups[ sectionName ]\n\t\t\t\t\t\t\t.addFilter( data )\n\t\t\t\t\t\tif( data.parameter === 'municipio' ||\n\t\t\t\t\t\t\tdata.parameter === 'departamento' ||\n\t\t\t\t\t\t\tdata.parameter === 'region' ){\n\t\t\t\t\t\t\tfor( j=0; j<data.items.length; j++ ){\n\t\t\t\t\t\t\t\tterritory = data.items[j]\n\t\t\t\t\t\t\t\tterritoriesCache[data.parameter][territory.value] = {\n\t\t\t\t\t\t\t\t\t'id': territory.value,\n\t\t\t\t\t\t\t\t\t'name': territory.name\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// All periods:\n\t\t\t\t\t\t// period, periodo, periodos, periodosRecursos...\n\t\t\t\t\t\tif( data.parameter.indexOf('period') === 0 ){\n\t\t\t\t\t\t\tself.periods.push( filterInstance )\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Assign the array to observableArray\n\t\t\t\t\tfor(i=0; i<appStates.length; i++){\n\t\t\t\t\t\tself.filtersGroups[ appStates[i] ].instantiateObservable()\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tfunction byId( id ){\n\t\t\t\t\t\t\treturn document.getElementById( id )\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar groupTypes = FiltersGroup.types,\n\t\t\t\t\t\t\tkey, typeName,\n\t\t\t\t\t\t\trootElement = $('#filters-groups-list').removeClass('loading')[0],\n\t\t\t\t\t\t\toriginalTemplate = $(rootElement.children[0]).remove(),\n\t\t\t\t\t\t\tfilterElement\n\t\t\t\t\t\t// TODO actualizar el html para que pinte bien los bindings\n\t\t\t\t\t\t// When period changes... we have to load new graphics\n\t\t\t\t\t\tko.applyBindings( self, byId('map-select-list-period') )\n\t\t\t\t\t\tko.applyBindings( self, byId('info-select-list-period') )\n\t\t\t\t\t\tko.applyBindings( self, byId('filters-stats-list-info') )\n\t\t\t\t\t\t\n\n\t\t\t\t\t\t// Dynamic template generation\n\t\t\t\t\t\tfor(var i=0; i<appStates.length; i++){\n\t\t\t\t\t\t\tkey = appStates[i]\n\t\t\t\t\t\t\tfilterElement = originalTemplate.clone()\n\t\t\t\t\t\t\tfilterElement.attr('data-bind',\n\t\t\t\t\t\t\t\tfilterElement.attr('data-bind')\n\t\t\t\t\t\t\t\t\t.replace(/(filtersGroups)/g, '$1.' + key))\n\t\t\t\t\t\t\trootElement.appendChild( filterElement[0] )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tko.applyBindings(self, rootElement)\n\t\t\t\t\t\t\n\t\t\t\t\t\tko.applyBindings(self, self.elems.resetFiltersWrapper[0])\n\t\t\t\t\t\tself.fireEvent('filters-loaded')\n\t\t\t\t\t}, 0)\n\n\t\t\t\t\t//At the end\n\t\t\t\t\tself.activate(AppState.getState().state, st.hash, st.params)\n\t\t\t\t}, 0)\n\t\t\t}\n\n\t\t},\n\n\t\tterritoryActivated: function(){\n\t\t\tthis.fireEvent.apply(this, ['territory-activated'].concat([].slice.call( arguments )))\n\t\t},\n\n\t\tnotifyNewSearch: function(param){\n\t\t\t//Recorrer filtros y armar nuevo query\n\t\t\tvar self = this\n\n\t\t\tclearTimeout(queryContructTimeout)\n\t\t\tqueryContructTimeout = setTimeout( function(){\n\t\t\t\tvar state = AppState.getState().state\n\t\t\t\t// In resources query search is exclusive\n\t\t\t\tif( state == 'Recursos' ){\n\t\t\t\t\tif( self.searchQuery.query() && self.onlyGetFiltersString() ){\n\t\t\t\t\t\tself.searchQuery.query('')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tAppState.setQuery( encodeURIComponent( self.searchQuery.query() ) )\n\t\t\t\tself.resetFilters( false )\n\t\t\t\tAppState.setFiltersString( self.getQueryFilters() )\n\t\t\t}, 0 )\n\n\t\t},\n\n\t\tgetQueryFilters: function(){\n\t\t\tvar filtersString = '',\n\t\t\t\t\ti = 0,\n\t\t\t\t\tfg, hasVisible = false\n\n\t\t\tfor(i=0; i<appStates.length; i++){\n\t\t\t\tfg = this.filtersGroups[ appStates[i] ]\n\t\t\t\tif(fg.visible()){\n\t\t\t\t\thasVisible = true\n\t\t\t\t\tif(fg.hasFiltersActive()){\n\t\t\t\t\t\tthis.resetFilters( true )\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( this.searchQuery.query() ) this.resetFilters( true )\n\n\t\t\tfor(i=0; i<appStates.length; i++){\n\t\t\t\tfg = this.filtersGroups[ appStates[i] ]\n\t\t\t\tif( fg.visible() ){\n\t\t\t\t\tfiltersString += fg.getQuery()\n\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!hasVisible){\n\t\t\t\tfg = this.filtersGroups['Proyectos']\n\t\t\t\tif(fg.hasFiltersActive()){\n\t\t\t\t\tfiltersString += fg.getQuery()\n\t\t\t\t}\n\t\t\t}\n\n\n\n\n\t\t\treturn filtersString.replace(/&$/, '')\n\t\t},\n\n\t\tonlyGetFiltersString: function(){\n\t\t\tvar filtersString = '',\n\t\t\t\ti\n\t\t\tfor(i=0; i<appStates.length; i++){\n\t\t\t\tfg = this.filtersGroups[ appStates[i] ]\n\t\t\t\tif( fg.visible() ){\n\t\t\t\t\tfiltersString += fg.getQuery()\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//debugger;\n\n\t\t\treturn filtersString\n\t\t},\n\n\t\tunselectAll: function( noNotify, onlyClean, noResetQuery ){\n\t\t\tvar fg,\n\t\t\t\ti\n\n\t\t\t// if( !this.filtersProjects ) return\n\t\t\tif( noNotify !== true ) this.fireEvent('filters-reseted')\n\t\t\t\n\t\t\tfor(i=0; i<appStates.length; i++){\n\t\t\t\tfg = this.filtersGroups[ appStates[i] ]\n\t\t\t\tif( fg.visible() || ( onlyClean === true ) ){\n\t\t\t\t\tfg.unselectAllFilters()\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$('.filter-list .filter input[type=\"text\"]').val('').trigger('keyup')\n\t\t\t$('.buttons-filter-fiscalization a').removeClass('active')\n\t\t\t$('.buttons-filter-fiscalization .filter-to-todos').addClass('active')\n\t\t\t$('.map-container').attr('data-option-subtipo', 'fiscalizacion-option-subtipo--1')\n\n\t\t\tvar currenTyear = new Date().getFullYear(),\n\t\t\t\t$elm =  $('#map-select-list-period .select-period')\n\t\t\t\tbeforeyear = parseInt(currenTyear-1);\n\n\t\t\t//debugger;\n\t\t\t\n\t\t\tif(!$elm.hasClass('selected')){\n\n\t\t\t\tvar eleX = $('#map-select-list-period .select-period .options .option:contains(\"'+beforeyear+'\")').last()\n\t\t\t\t$('#map-select-list-period .select-period .options .option:contains(\"'+beforeyear+'\")').last().trigger('click')\n\t\t\t}\n\n\n\t\t\tif( onlyClean !== true ) $('html, body').animate({ scrollTop: 0 }, 200);\n\t\t\tif( noResetQuery!== true) this.searchQuery.query('')\n\t\t\t\n\t\t\tif( onlyClean !== true ){\n\t\t\t\tthis.hideAllFilters()\n\t\t\t\tlocation.hash = location.hash.replace(/\\?.*/,'')\n\t\t\t}\n\t\t},\n\n\t\tunselectOtherFilterGroups: function( type, except, filtersToExclude){\n\t\t\t// console.log('unselectOtherFilterGroups '+except)\n\t\t\tvar i, fg\n\t\t\tfor(i=0; i<appStates.length; i++){\n\t\t\t\tfg = this.filtersGroups[ appStates[i] ]\n\t\t\t\tif( fg.type !== type ){\n\t\t\t\t\tfg.unselectAllFilters( except, 'noNotify', filtersToExclude )\n\t\t\t\t}\n\t\t\t}\n\t\t\t// this.fireEvent('zoom-out')\n\t\t},\n\n\t\tupdateStatistics: function( data ){\n\t\t\tvar root = this.elems.root\n\n\t\t\tthis.fireEvent('loaded-filters')\n\n\t\t\tif(!this.activated){\n\t\t\t\tthis.activated = true\n\t\t\t}\n\t\t\troot.find('#collected-money').html( parseInt( data.collectedMoney , 10 ).toCurrency() )\n\t\t\troot.find('#approved-money').html( parseInt( data.approvedMoney , 10 ).toCurrency() )\n\t\t\troot.find('#approved-money-home').html( parseInt( data.approvedMoney , 10 ).toCurrency() )\n\t\t\troot.find('#approved-projects').html( data.approvedProjects )\n\t\t\troot.find('#approved-projects-home').html( data.approvedProjects )\n\t\t\troot.find('#total-sources').html( parseInt( data.approvedMoneyTotal , 10 ).toCurrency() )\n\t\t\t//TODO update search results\n\t\t},\n\n\t\thideAllFilters: function(){\n\t\t\tvar fg,\n\t\t\t\ti\n\n\t\t\tfor(i=0; i<appStates.length; i++){\n\t\t\t\tfg = this.filtersGroups[ appStates[i] ]\n\t\t\t\tfg.hideAllFilters()\n\t\t\t}\n\t\t},\n\n\t\tcheckActivated: function( filterGroup, filterActivated ){\n\t\t\tvar fg\n\n\n\t\t\tfor(var i=0; i<appStates.length; i++){\n\t\t\t\tfg = this.filtersGroups[ appStates[i] ]\n\t\t\t\tif( fg.type !== filterGroup.type ){\n\t\t\t\t\tfg.hideOtherFilters( filterActivated, 'cancelNotify' )\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Selects a filter from the filtersgroups\n\t\t * @param  {String} type\n\t\t * @param  {String} id\n\t\t */\n\t\tselectFilterWith: function( type, id ){\n\t\t\tvar fg, i\n\t\t\t\n\t\t\tif( type == 'query' ){\n\t\t\t\tthis.searchQuery.query( decodeURIComponent( id ) )\n\t\t\t\treturn\n\t\t\t}else{\n\t\t\t\tfor(i=0; i<appStates.length; i++){\n\t\t\t\t\tfg = this.filtersGroups[ appStates[i] ]\n\t\t\t\t\t// I suppose that all parameters name are exclusive\n\t\t\t\t\t// So, no validation for visibility or something like that\n\t\t\t\t\t// if( fg.visible() )\n\t\t\t\t\tif( fg.selectFilterWith( type, id ) ) return\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n\n\t//console.log( '--------->', new FiltersManager())\n\n\treturn new FiltersManager()\n});\n","define('app/utils/MailSharer',['app/network/Services','app/utils/Modal'], function( Services, Modal ){\n\tvar mailButtons = $('[data-share-by-email]'),\n\t\tsharerContainer = $('<form class=\"mail-sharer\">' +\n\t\t\t'<h3 class=\"title\">Comparte por Correo Electrnico</h3>' +\n\t\t\t'<div class=\"field\">' +\n\t\t\t\t'<label for=\"field-email\">Correo electrnico:</label>' +\n\t\t\t\t'<input type=\"email\" id=\"field-email\" name=\"to\">' +\n\t\t\t'</div>' +\n\t\t\t'<div class=\"field\">' +\n\t\t\t\t'<label for=\"field-message\">Mensaje:</label>' +\n\t\t\t\t'<textarea id=\"field-message\" name=\"subject\"></textarea>' +\n\t\t\t'</div>' +\n\t\t\t'<div class=\"txt-right\"><button type=\"submit\">Enviar</button></div>' +\n\t\t\t'<div class=\"loader\"></div>' +\n\t\t\t'</form>')\n\t\n\tmailButtons.on('click', reveal )\n\tsharerContainer.on('submit', send )\n\t\n\tfunction reveal(){\n\t\tvar $this = $(this)\n\t\tsharerContainer\n\t\t\t.appendTo(document.body)\n\t\t\t.css({\n\t\t\t\tleft: $this.offset().left,\n\t\t\t\ttop: $this.offset().top\n\t\t\t})\n\t\t\t.show()\n\t\t$(document).on('click', hide)\n\t\treturn false\n\t}\n\tfunction send(evt){\n\t\tvar pre = location.href + '\\n\\n'\n\t\tsharerContainer.addClass('loading')\n\t\tServices.sendByEmail(\n\t\t\t\t'to=' +\n\t\t\t\tencodeURIComponent( sharerContainer.find('#field-email').val() ) +\n\t\t\t\t'&body=' +\n\t\t\t\tencodeURIComponent( pre + sharerContainer.find('#field-message').val() )\n\t\t\t)\n\t\t\t.done( updateUserOk )\n\t\t\t.fail( updateUserError )\n\n\t\tif( evt.preventDefault ) evt.preventDefault()\n\t\telse evt.returnValue = false\n\t\treturn false\n\t}\n\tfunction hide( evt ){\n\t\tif(!evt || $(evt.target).parents('.mail-sharer').length == 0 ){\n\t\t\tsharerContainer\n\t\t\t\t.hide()\n\t\t\t\t.detach()\n\t\t\t$(document).off('click', hide)\n\t\t}\n\t}\n\n\tfunction updateUserOk( response ){\n\t\tsharerContainer.removeClass('loading')\n\t\t\n\t\tif( !response.status ) return\n\t\t\n\t\tsharerContainer.find('#field-email').val('')\n\t\tsharerContainer.find('#field-message').val('')\n\n\t\tvar message = response.message ||\n\t\t\t( 'Esta pgina ha sido compartida con xito al correo: ' +\n\t\t\tsharerContainer.find('#field-email').val() + '.' )\n\n\t\thide()\n\t\tModal.info( message ).show()\n\t}\n\tfunction updateUserError(){\n\t\tsharerContainer.removeClass('loading')\n\t\t// hide()\n\t}\n});\n","define('utils/beta',[\n\t\t'app/utils/Modal'\n\t],\n\tfunction( Modal ){\n\tvar notif = $('.beta-notification'),\n\t\theader = notif.find('.beta-notification__header'),\n\t\tclose = notif.find('.close-notification'),\n\t\tdesc = notif.find('.beta-notification__description')\n\n\theader.on('click', toggleDescription)\n\tclose.on('click', toggleDescription)\n\n\tfunction toggleDescription(){\n\t\tdesc.slideToggle()\n\t\theader.toggleClass('open')\n\t}\n\n\t$(document)\n\t\t.on('mouseenter', '.tooltip', function(){\n\t\t\t$('.info-tool', this).fadeIn('fast')\n\t\t})\n\t\t.on('mouseleave', '.tooltip', function(){\n\t\t\t$('.info-tool', this).fadeOut('fast')\n\t\t})\n\n\tvar modal = new Modal('<iframe src=\"//player.vimeo.com/video/98644859?portrait=0&amp;badge=0\" width=\"700\" height=\"410\" frameborder=\"0\" webkitallowfullscreen=\"\" mozallowfullscreen=\"\" allowfullscreen=\"\"></iframe>');\n\t//style = modal.getElement().style\n\n\t//style.width = 700\n\t//style.height = 410\n\n\t$('.get-video-regalias').on('click', function(){\n\t\tmodal.show()\t\n\t\t$('.modal .wrapper').css('width', 700)\n\t})\n\n\n\tvar $tabbed = $('.main-content__consolidated-tabbed'),\n\t\t$getTab = $('.main-content__type-filters__link')\n\n\n\t$getTab.click(function() {\n\n\t\tvar $this = $(this),\n\t\t\thref = $(this).attr('href');\n\n\tif(href == \"#/fiscalizacion\"){\n\t\t$tabbed.fadeIn()//.addClass('show-tabbed')\n\n\t}else{\n\t\t$tabbed.fadeOut()//.addClass('show-tabbed')\n\n\t}\n\t\t\t\n\t\treturn false;\n\t\t\n\t});\n\n\n});\n"]}