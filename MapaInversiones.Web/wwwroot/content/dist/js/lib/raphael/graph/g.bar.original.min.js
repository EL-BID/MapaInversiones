(function(){function t(t,i,r,f,e,o,s,h){var c;if(e&&!f||!e&&!r)return s?"":h.path();o={round:"round",sharp:"sharp",soft:"soft",square:"square"}[o]||"square",f=Math.round(f),r=Math.round(r),t=Math.round(t),i=Math.round(i);switch(o){case"round":e?(e=~~(r/2),c=f<e?["M",t-~~(r/2),i,"l",0,0,"a",~~(r/2),f,0,0,1,r,0,"l",0,0,"z"]:["M",t-e,i,"l",0,e-f,"a",e,e,0,1,1,r,0,"l",0,f-e,"z"]):(e=~~(f/2),c=r<e?["M",t+.5,i+.5-~~(f/2),"l",0,0,"a",r,~~(f/2),0,0,1,0,f,"l",0,0,"z"]:["M",t+.5,i+.5-e,"l",r-e,0,"a",e,e,0,1,1,0,f,"l",e-r,0,"z"]);break;case"sharp":e?(e=~~(r/2),c=["M",t+e,i,"l",-r,0,0,-u(f-e,0),e,-n(e,f),e,n(e,f),e,"z"]):(e=~~(f/2),c=["M",t,i+e,"l",0,-f,u(r-e,0),0,n(e,r),e,-n(e,r),e+(2*e<f),"z"]);break;case"square":c=e?["M",t+~~(r/2),i,"l",1-r,0,0,-f,r-1,0,"z"]:["M",t,i+~~(f/2),"l",0,-f,r,0,0,f,"z"];break;case"soft":e?(e=n(Math.round(r/5),f),c=["M",t-~~(r/2),i,"l",0,e-f,"a",e,e,0,0,1,e,-e,"l",r-2*e,0,"a",e,e,0,0,1,e,e,"l",0,f-e,"z"]):(e=n(r,Math.round(f/5)),c=["M",t+.5,i+.5-~~(f/2),"l",r-e,0,"a",e,e,0,0,1,e,e,"l",0,f-2*e,"a",e,e,0,0,1,-e,e,"l",e-r,0,"z"])}return s?c.join(","):h.path(c)}function i(n,i,r,u,f,e,o){var o=o||{},ft=o.type||"square",d=parseFloat(o.gutter||"20%"),w=n.set(),g=n.set(),v=n.set(),b=n.set(),nt=Math.max.apply(Math,e),k=[],c=0,ot=o.colors||this.colors,p=e.length,y,l,tt,rt,et;if(Raphael.is(e[0],"array")){for(var nt=[],c=p,p=0,s=e.length;s--;)g.push(n.set()),nt.push(Math.max.apply(Math,e[s])),p=Math.max(p,e[s].length);if(o.stacked)for(s=p;s--;){for(y=0,l=e.length;l--;)y+=+e[l][s]||0;k.push(y)}for(s=e.length;s--;)if(e[s].length<p)for(l=p;l--;)e[s].push(0);nt=Math.max.apply(Math,o.stacked?k:nt)}var nt=o.to||nt,u=100*(u/(p*(100+d)+d)),d=u*d/100,it=null==o.vgutter?20:o.vgutter,k=[],y=i+d,ut=(f-2*it)/nt;for(o.stretch||(d=Math.round(d),u=Math.floor(u)),o.stacked||(u/=c||1),s=0;s<p;s++){for(k=[],l=0;l<(c||1);l++){var a=Math.round((c?e[l][s]:e[s])*ut),tt=r+f-it-a,h=t(Math.round(y+u/2),tt+a,u,a,!0,ft,null,n).attr({stroke:"none",fill:ot[c?l:s]});c?g[l].push(h):g.push(h),h.y=tt,h.x=Math.round(y+u/2),h.w=u,h.h=a,h.value=c?e[l][s]:e[s],o.stacked?k.push(h):y+=u}if(o.stacked){for(b.push(l=n.rect(k[0].x-k[0].w/2,r,u,f).attr(this.shim)),l.bars=n.set(),tt=0,rt=k.length;rt--;)k[rt].toFront();for(rt=0,et=k.length;rt<et;rt++){var h=k[rt],a=(tt+h.value)*ut,st=t(h.x,r+f-it-.5*!!tt,u,a,!0,ft,1,n);l.bars.push(h),tt&&h.attr({path:st}),h.h=a,h.y=r+f-it-.5*!!tt-a,v.push(a=n.rect(h.x-h.w/2,h.y,u,h.value*ut).attr(this.shim)),a.bar=h,a.value=h.value,tt+=h.value}y+=u}y+=d}if(b.toFront(),y=i+d,!o.stacked)for(s=0;s<p;s++){for(l=0;l<(c||1);l++)v.push(a=n.rect(Math.round(y),r+it,u,f-it).attr(this.shim)),a.bar=c?g[l][s]:g[s],a.value=a.bar.value,y+=u;y+=d}return w.label=function(t,i){var h,a,u,y,s,l;if(t=t||[],this.labels=n.set(),a=-Infinity,o.stacked)for(u=0;u<p;u++)for(y=0,s=0;s<(c||1);s++)y=y+(c?e[s][u]:e[u]),s==c-1&&(h=n.labelise(t[u],y,nt),h=n.text(g[u*(c||1)+s].x,r+f-it/2,h).attr(txtattr).insertBefore(v[u*(c||1)+s]),l=h.getBBox(),l.x-7<a?h.remove():(this.labels.push(h),a=l.x+l.width));else for(u=0;u<p;u++)for(s=0;s<(c||1);s++)h=n.labelise(c?t[s]&&t[s][u]:t[u],c?e[s][u]:e[u],nt),h=n.text(g[u*(c||1)+s].x,i?r+f-it/2:g[u*(c||1)+s].y-10,h).attr(txtattr).insertBefore(v[u*(c||1)+s]),l=h.getBBox(),l.x-7<a?h.remove():(this.labels.push(h),a=l.x+l.width);return this},w.hover=function(n,t){return b.hide(),v.show(),v.mouseover(n).mouseout(t),this},w.hoverColumn=function(n,t){return v.hide(),b.show(),b.mouseover(n).mouseout(t||function(){}),this},w.click=function(n){return b.hide(),v.show(),v.click(n),this},w.each=function(n){if(!Raphael.is(n,"function"))return this;for(var t=v.length;t--;)n.call(v[t]);return this},w.eachColumn=function(n){if(!Raphael.is(n,"function"))return this;for(var t=b.length;t--;)n.call(b[t]);return this},w.clickColumn=function(n){return v.hide(),b.show(),b.click(n),this},w.push(g,v,b),w.bars=g,w.covers=v,w}function r(n,i,r,u,f,e,o){var o=o||{},ut=o.type||"square",p=parseFloat(o.gutter||"20%"),b=n.set(),g=n.set(),y=n.set(),k=n.set(),tt=Math.max.apply(Math,e),w=[],a=0,et=o.colors||this.colors,d=e.length,nt,c,l,h,rt,it,ft;if(Raphael.is(e[0],"array")){for(var tt=[],a=d,d=0,s=e.length;s--;)g.push(n.set()),tt.push(Math.max.apply(Math,e[s])),d=Math.max(d,e[s].length);if(o.stacked)for(s=d;s--;){for(nt=0,c=e.length;c--;)nt+=+e[c][s]||0;w.push(nt)}for(s=e.length;s--;)if(e[s].length<d)for(c=d;c--;)e[s].push(0);tt=Math.max.apply(Math,o.stacked?w:tt)}var tt=o.to||tt,v=Math.floor(100*(f/(d*(100+p)+p))),f=Math.floor(v*p/100),p=[],w=r+f,nt=(u-1)/tt;for(o.stacked||(v/=a||1),s=0;s<d;s++){for(p=[],c=0;c<(a||1);c++)l=a?e[c][s]:e[s],h=t(i,w+v/2,Math.round(l*nt),v-1,!1,ut,null,n).attr({stroke:"none",fill:et[a?c:s]}),a?g[c].push(h):g.push(h),h.x=i+Math.round(l*nt),h.y=w+v/2,h.w=Math.round(l*nt),h.h=v,h.value=+l,o.stacked?p.push(h):w+=v;if(o.stacked){for(c=n.rect(i,p[0].y-p[0].h/2,u,v).attr(this.shim),k.push(c),c.bars=n.set(),rt=0,it=p.length;it--;)p[it].toFront();for(it=0,ft=p.length;it<ft;it++){var h=p[it],l=Math.round((rt+h.value)*nt),ot=t(i,h.y,l,v-1,!1,ut,1,n);c.bars.push(h),rt&&h.attr({path:ot}),h.w=l,h.x=i+l,y.push(l=n.rect(i+rt*nt,h.y-h.h/2,h.value*nt,v).attr(this.shim)),l.bar=h,rt+=h.value}w+=v}w+=f}if(k.toFront(),w=r+f,!o.stacked)for(s=0;s<d;s++){for(c=0;c<(a||1);c++)l=n.rect(i,w,u,v).attr(this.shim),y.push(l),l.bar=a?g[c][s]:g[s],l.value=l.bar.value,w+=v;w+=f}return b.label=function(t,r){var u,f,o,s;for(t=t||[],this.labels=n.set(),u=0;u<d;u++)for(f=0;f<a;f++)o=n.labelise(a?t[f]&&t[f][u]:t[u],a?e[f][u]:e[u],tt),s=r?"end":"start",this.labels.push(o=n.text(r?g[u*(a||1)+f].x-v/2+3:i+5,g[u*(a||1)+f].y,o).attr(txtattr).attr({"text-anchor":s}).insertBefore(y[0])),o.getBBox().x<i+5?o.attr({x:i+5,"text-anchor":"start"}):g[u*(a||1)+f].label=o;return this},b.hover=function(n,t){return k.hide(),y.show(),y.mouseover(n).mouseout(t||function(){}),this},b.hoverColumn=function(n,t){return y.hide(),k.show(),k.mouseover(n).mouseout(t||function(){}),this},b.each=function(n){if(!Raphael.is(n,"function"))return this;for(var t=y.length;t--;)n.call(y[t]);return this},b.eachColumn=function(n){if(!Raphael.is(n,"function"))return this;for(var t=k.length;t--;)n.call(k[t]);return this},b.click=function(n){return k.hide(),y.show(),y.click(n),this},b.clickColumn=function(n){return y.hide(),k.show(),k.click(n),this},b.push(g,y,k),b.bars=g,b.covers=y,b}var n=Math.min,u=Math.max,f=function(){};f.prototype=Raphael.g,r.prototype=i.prototype=new f,Raphael.fn.barchart=function(n,t,r,u,f,e){return new i(this,n,t,r,u,f,e)},Raphael.fn.hbarchart=function(n,t,i,u,f,e){return new r(this,n,t,i,u,f,e)}})();
//@ sourceMappingURL=g.bar.original.min.js.map