/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.2.1 (2020-03-25)
 */
!function(u){"use strict";function e(){***REMOVED***function l(e){return function(){return e***REMOVED******REMOVED***function n(){return p***REMOVED***var r,t=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=0,o=function(e,n,r){e.plugins.table?e.plugins.table.insertTable(n,r):function(r,t,o){r.undoManager.transact(function(){var e,n;r.insertContent(function(e,n){var r,t,o;for(o='<table data-mce-id="mce" style="width: 100%">',o+="<tbody>",t=0;t<n;t++){for(o+="<tr>",r=0;r<e;r++)o+="<td><br></td>";o+="</tr>"***REMOVED***return o+="</tbody>",o+="</table>"***REMOVED***(t,o)),(e=function(e){return e.dom.select("*[data-mce-id]")[0]***REMOVED***(r)).removeAttribute("data-mce-id"),n=r.dom.select("td,th",e),r.selection.setCursorLocation(n[0],0)***REMOVED***)***REMOVED***(e,n,r)***REMOVED***,c=function(e,n,r){var t,o;o=(t=e.editorUpload.blobCache).create(function(e){var n=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++i+String(n)***REMOVED***("mceu"),r,n),t.add(o),e.insertContent(e.dom.createHTML("img",{src:o.blobUri()***REMOVED***))***REMOVED***,s=tinymce.util.Tools.resolve("tinymce.util.Promise"),a=function(r){return new s(function(e){var n=new u.FileReader;n.onloadend=function(){e(n.result.split(",")[1])***REMOVED***,n.readAsDataURL(r)***REMOVED***)***REMOVED***,f=tinymce.util.Tools.resolve("tinymce.Env"),d=tinymce.util.Tools.resolve("tinymce.util.Delay"),m=function(i){return new s(function(r){var t=u.document.createElement("input");t.type="file",t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0.001",u.document.body.appendChild(t);t.addEventListener("change",function(e){r(Array.prototype.slice.call(e.target.files))***REMOVED***);var o=function(e){function n(){r([]),t.parentNode.removeChild(t)***REMOVED***f.os.isAndroid()&&"remove"!==e.type?d.setEditorTimeout(i,n,0):n(),i.off("focusin remove",o)***REMOVED***;i.on("focusin remove",o),t.click()***REMOVED***)***REMOVED***,g=function(r){r.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:function(){m(r).then(function(e){if(0<e.length){var n=e[0];a(n).then(function(e){c(r,e,n)***REMOVED***)***REMOVED******REMOVED***)***REMOVED******REMOVED***),r.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:function(){o(r,2,2)***REMOVED******REMOVED***)***REMOVED***,h=l(!1),v=l(!0),p=(r={fold:function(e,n){return e()***REMOVED***,is:h,isSome:h,isNone:v,getOr:N,getOrThunk:b,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")***REMOVED***,getOrNull:l(null),getOrUndefined:l(undefined),or:N,orThunk:b,map:n,each:e,bind:n,exists:h,forall:v,filter:n,equals:O,equals_:O,toArray:function(){return[]***REMOVED***,toString:l("none()")***REMOVED***,Object.freeze&&Object.freeze(r),r);function O(e){return e.isNone()***REMOVED***function b(e){return e()***REMOVED***function N(e){return e***REMOVED***function E(n){return function(e){return function(e){if(null===e)return"null";var n=typeof e;return"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n***REMOVED***(e)===n***REMOVED******REMOVED***var T=function(r){function e(){return o***REMOVED***function n(e){return e(r)***REMOVED***var t=l(r),o={fold:function(e,n){return n(r)***REMOVED***,is:function(e){return r===e***REMOVED***,isSome:v,isNone:h,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(e){return T(e(r))***REMOVED***,each:function(e){e(r)***REMOVED***,bind:n,exists:n,forall:n,filter:function(e){return e(r)?o:p***REMOVED***,toArray:function(){return[r]***REMOVED***,toString:function(){return"some("+r+")"***REMOVED***,equals:function(e){return e.is(r)***REMOVED***,equals_:function(e,n){return e.fold(h,function(e){return n(r,e)***REMOVED***)***REMOVED******REMOVED***;return o***REMOVED***,w={some:T,none:n,from:function(e){return null===e||e===undefined?p:T(e)***REMOVED******REMOVED***,S=function(e){if(null===e||e===undefined)throw new Error("Node cannot be null or undefined");return{dom:l(e)***REMOVED******REMOVED***,y={fromHtml:function(e,n){var r=(n||u.document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||1<r.childNodes.length)throw u.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return S(r.childNodes[0])***REMOVED***,fromTag:function(e,n){var r=(n||u.document).createElement(e);return S(r)***REMOVED***,fromText:function(e,n){var r=(n||u.document).createTextNode(e);return S(r)***REMOVED***,fromDom:S,fromPoint:function(e,n,r){var t=e.dom();return w.from(t.elementFromPoint(n,r)).map(S)***REMOVED******REMOVED***,x=(u.Node.ATTRIBUTE_NODE,u.Node.CDATA_SECTION_NODE,u.Node.COMMENT_NODE,u.Node.DOCUMENT_NODE,u.Node.DOCUMENT_TYPE_NODE,u.Node.DOCUMENT_FRAGMENT_NODE,u.Node.ELEMENT_NODE),k=(u.Node.TEXT_NODE,u.Node.PROCESSING_INSTRUCTION_NODE,u.Node.ENTITY_REFERENCE_NODE,u.Node.ENTITY_NODE,u.Node.NOTATION_NODE,"undefined"!=typeof u.window?u.window:Function("return this;")(),E("string")),C=E("object"),D=E("array"),_=E("boolean"),A=E("undefined"),R=E("function"),I=Array.prototype.slice;R(Array.from)&&Array.from;function M(e,n,r,t,o){return e(r,t)?w.some(r):R(o)&&o(r)?w.none():n(r,t,o)***REMOVED***function q(e,n,r){return 0!=(e.compareDocumentPosition(n)&r)***REMOVED***function L(e,n){var r=function(e,n){for(var r=0;r<e.length;r++){var t=e[r];if(t.test(n))return t***REMOVED***return undefined***REMOVED***(e,n);if(!r)return{major:0,minor:0***REMOVED***;function t(e){return Number(n.replace(r,"$"+e))***REMOVED***return V(t(1),t(2))***REMOVED***function P(e,n){return function(){return n===e***REMOVED******REMOVED***function F(e,n){return function(){return n===e***REMOVED******REMOVED***function U(e,n){var r=String(n).toLowerCase();return function(e,n){for(var r=0,t=e.length;r<t;r++){var o=e[r];if(n(o,r))return w.some(o)***REMOVED***return w.none()***REMOVED***(e,function(e){return e.search(r)***REMOVED***)***REMOVED***function B(e,n){return-1!==e.indexOf(n)***REMOVED***function j(n){return function(e){return B(e,n)***REMOVED******REMOVED***function H(e,n){var r=e.dom();if(r.nodeType!==ge)return!1;var t=r;if(t.matches!==undefined)return t.matches(n);if(t.msMatchesSelector!==undefined)return t.msMatchesSelector(n);if(t.webkitMatchesSelector!==undefined)return t.webkitMatchesSelector(n);if(t.mozMatchesSelector!==undefined)return t.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")***REMOVED***function X(e,n,r){for(var t=e.dom(),o=R(r)?r:l(!1);t.parentNode;){t=t.parentNode;var i=y.fromDom(t);if(n(i))return w.some(i);if(o(i))break***REMOVED***return w.none()***REMOVED***function z(e,n,r){return X(e,function(e){return H(e,n)***REMOVED***,r)***REMOVED***var G,W=function(e,n){return q(e,n,u.Node.DOCUMENT_POSITION_CONTAINED_BY)***REMOVED***,Y=function(e){function n(){return r***REMOVED***var r=e;return{get:n,set:function(e){r=e***REMOVED***,clone:function(){return Y(n())***REMOVED******REMOVED******REMOVED***,$=function(){return V(0,0)***REMOVED***,V=function(e,n){return{major:e,minor:n***REMOVED******REMOVED***,J={nu:V,detect:function(e,n){var r=String(n).toLowerCase();return 0===e.length?$():L(e,r)***REMOVED***,unknown:$***REMOVED***,K="Firefox",Q=function(e){var n=e.current;return{current:n,version:e.version,isEdge:P("Edge",n),isChrome:P("Chrome",n),isIE:P("IE",n),isOpera:P("Opera",n),isFirefox:P(K,n),isSafari:P("Safari",n)***REMOVED******REMOVED***,Z={unknown:function(){return Q({current:undefined,version:J.unknown()***REMOVED***)***REMOVED***,nu:Q,edge:l("Edge"),chrome:l("Chrome"),ie:l("IE"),opera:l("Opera"),firefox:l(K),safari:l("Safari")***REMOVED***,ee="Windows",ne="Android",re="Solaris",te="FreeBSD",oe="ChromeOS",ie=function(e){var n=e.current;return{current:n,version:e.version,isWindows:F(ee,n),isiOS:F("iOS",n),isAndroid:F(ne,n),isOSX:F("OSX",n),isLinux:F("Linux",n),isSolaris:F(re,n),isFreeBSD:F(te,n),isChromeOS:F(oe,n)***REMOVED******REMOVED***,ue={unknown:function(){return ie({current:undefined,version:J.unknown()***REMOVED***)***REMOVED***,nu:ie,windows:l(ee),ios:l("iOS"),android:l(ne),linux:l("Linux"),osx:l("OSX"),solaris:l(re),freebsd:l(te),chromeos:l(oe)***REMOVED***,ce=function(e,r){return U(e,r).map(function(e){var n=J.detect(e.versionRegexes,r);return{current:e.name,version:n***REMOVED******REMOVED***)***REMOVED***,se=function(e,r){return U(e,r).map(function(e){var n=J.detect(e.versionRegexes,r);return{current:e.name,version:n***REMOVED******REMOVED***)***REMOVED***,ae=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,fe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return B(e,"edge/")&&B(e,"chrome")&&B(e,"safari")&&B(e,"applewebkit")***REMOVED******REMOVED***,{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ae],search:function(e){return B(e,"chrome")&&!B(e,"chromeframe")***REMOVED******REMOVED***,{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return B(e,"msie")||B(e,"trident")***REMOVED******REMOVED***,{name:"Opera",versionRegexes:[ae,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:j("opera")***REMOVED***,{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:j("firefox")***REMOVED***,{name:"Safari",versionRegexes:[ae,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(B(e,"safari")||B(e,"mobile/"))&&B(e,"applewebkit")***REMOVED******REMOVED***],de=[{name:"Windows",search:j("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]***REMOVED***,{name:"iOS",search:function(e){return B(e,"iphone")||B(e,"ipad")***REMOVED***,versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]***REMOVED***,{name:"Android",search:j("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]***REMOVED***,{name:"OSX",search:j("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]***REMOVED***,{name:"Linux",search:j("linux"),versionRegexes:[]***REMOVED***,{name:"Solaris",search:j("sunos"),versionRegexes:[]***REMOVED***,{name:"FreeBSD",search:j("freebsd"),versionRegexes:[]***REMOVED***,{name:"ChromeOS",search:j("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]***REMOVED***],le={browsers:l(fe),oses:l(de)***REMOVED***,me=Y(function(e,n){var r=le.browsers(),t=le.oses(),o=ce(r,e).fold(Z.unknown,Z.nu),i=se(t,e).fold(ue.unknown,ue.nu);return{browser:o,os:i,deviceType:function(e,n,r,t){var o=e.isiOS()&&!0===/ipad/i.test(r),i=e.isiOS()&&!o,u=e.isiOS()||e.isAndroid(),c=u||t("(pointer:coarse)"),s=o||!i&&u&&t("(min-device-width:768px)"),a=i||u&&!s,f=n.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),d=!a&&!s&&!f;return{isiPad:l(o),isiPhone:l(i),isTablet:l(s),isPhone:l(a),isTouch:l(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:l(f),isDesktop:l(d)***REMOVED******REMOVED***(i,o,e,n)***REMOVED******REMOVED***(u.navigator.userAgent,function(e){return u.window.matchMedia(e).matches***REMOVED***)),ge=x,he=(me.get().browser.isIE(),{getToolbarItemsOr:(G=k,function(e,n,r){return function(e,n){if(!n(e))throw new Error("Default value doesn't match requested type.")***REMOVED***(r,G),function(e,n){if(D(e)||C(e))throw new Error("expected a string but found: "+e);return A(e)?n:_(e)?!1===e?"":n:e***REMOVED***(e.getParam(n,r),r)***REMOVED***)***REMOVED***),ve=function(e){return he.getToolbarItemsOr(e,"quickbars_selection_toolbar","bold italic | quicklink h2 h3 blockquote")***REMOVED***,pe=function(e){return he.getToolbarItemsOr(e,"quickbars_insert_toolbar","quickimage quicktable")***REMOVED***,Oe=function(e){return he.getToolbarItemsOr(e,"quickbars_image_toolbar","alignleft aligncenter alignright")***REMOVED***,be=function(o){var e=pe(o);0<e.trim().length&&o.ui.registry.addContextToolbar("quickblock",{predicate:function(e){function n(e){return e.dom()===o.getBody()***REMOVED***var r=y.fromDom(e),t=o.schema.getTextBlockElements();return function(e,n,r){return M(H,z,e,n,r)***REMOVED***(r,"table",n).fold(function(){return function(e,n,r){return M(function(e,n){return n(e)***REMOVED***,X,e,n,r)***REMOVED***(r,function(e){return function(e){return e.dom().nodeName.toLowerCase()***REMOVED***(e)in t&&o.dom.isEmpty(e.dom())***REMOVED***,n).isSome()***REMOVED***,function(){return!1***REMOVED***)***REMOVED***,items:e,position:"line",scope:"editor"***REMOVED***)***REMOVED***,Ne=function(n){function r(e){return"IMG"===e.nodeName||"FIGURE"===e.nodeName&&/image/i.test(e.className)***REMOVED***var e=Oe(n);0<e.trim().length&&n.ui.registry.addContextToolbar("imageselection",{predicate:r,items:e,position:"node"***REMOVED***);var t=ve(n);0<t.trim().length&&n.ui.registry.addContextToolbar("textselection",{predicate:function(e){return!r(e)&&!n.selection.isCollapsed()&&function(e){return"false"!==n.dom.getContentEditableParent(e)***REMOVED***(e)***REMOVED***,items:t,position:"selection",scope:"editor"***REMOVED***)***REMOVED***;!function Ee(){t.add("quickbars",function(e){g(e),be(e),Ne(e)***REMOVED***)***REMOVED***()***REMOVED***(window);