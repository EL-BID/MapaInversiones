/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.2.1 (2020-03-25)
 */
!function(r){"use strict";function n(){***REMOVED***function u(n){return function(){return n***REMOVED******REMOVED***function e(){return l***REMOVED***var t,o=function(n){function e(){return t***REMOVED***var t=n;return{get:e,set:function(n){t=n***REMOVED***,clone:function(){return o(e())***REMOVED******REMOVED******REMOVED***,i=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=function(n){return{isEnabled:function(){return n.get()***REMOVED******REMOVED******REMOVED***,a=function(n,e){return n.fire("VisualChars",{state:e***REMOVED***)***REMOVED***,f=u(!1),s=u(!0),l=(t={fold:function(n,e){return n()***REMOVED***,is:f,isSome:f,isNone:s,getOr:g,getOrThunk:m,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")***REMOVED***,getOrNull:u(null),getOrUndefined:u(undefined),or:g,orThunk:m,map:e,each:n,bind:e,exists:f,forall:s,filter:e,equals:d,equals_:d,toArray:function(){return[]***REMOVED***,toString:u("none()")***REMOVED***,Object.freeze&&Object.freeze(t),t);function d(n){return n.isNone()***REMOVED***function m(n){return n()***REMOVED***function g(n){return n***REMOVED***function N(e){return function(n){return function(n){if(null===n)return"null";var e=typeof n;return"object"==e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e***REMOVED***(n)===e***REMOVED******REMOVED***function v(n,e){for(var t=0,r=n.length;t<r;t++){e(n[t],t)***REMOVED******REMOVED***function h(n){return n.dom().nodeValue***REMOVED***function p(n,e,t){!function(n,e,t){if(!(L(t)||P(t)||R(t)))throw r.console.error("Invalid call to Attr.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")***REMOVED***(n.dom(),e,t)***REMOVED***function E(n,e){n.dom().removeAttribute(e)***REMOVED***function T(n,e){var t=function(n,e){var t=n.dom().getAttribute(e);return null===t?undefined:t***REMOVED***(n,e);return t===undefined||""===t?[]:t.split(" ")***REMOVED***function O(n){return n.dom().classList!==undefined***REMOVED***function y(n,e){return function(n,e,t){var r=T(n,e).concat([t]);return p(n,e,r.join(" ")),!0***REMOVED***(n,"class",e)***REMOVED***function b(n,e){return function(n,e,t){var r=function(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)***REMOVED***return t***REMOVED***(T(n,e),function(n){return n!==t***REMOVED***);return 0<r.length?p(n,e,r.join(" ")):E(n,e),!1***REMOVED***(n,"class",e)***REMOVED***function D(n){0===(O(n)?n.dom().classList:function(n){return T(n,"class")***REMOVED***(n)).length&&E(n,"class")***REMOVED***function C(n,e){var t,r="";for(t in n)r+=t;return new RegExp("["+r+"]",e?"g":"")***REMOVED***function A(n){var e,t="";for(e in n)t&&(t+=","),t+="span.mce-"+n[e];return t***REMOVED***function _(n){return"span"===n.nodeName.toLowerCase()&&n.classList.contains("mce-nbsp-wrap")***REMOVED***function w(u,n){var e=W.filterDescendants(F.fromDom(n),W.isMatch);v(e,function(n){var e=n.dom().parentNode;if(_(e))!function(n,e){O(n)?n.dom().classList.add(e):y(n,e)***REMOVED***(F.fromDom(e),H.nbspClass);else{for(var t=W.replaceWithSpans(u.dom.encode(h(n))),r=u.dom.create("div",null,t),o=void 0;o=r.lastChild;)u.dom.insertAfter(o,n.dom());u.dom.remove(n.dom())***REMOVED******REMOVED***)***REMOVED***function M(e,n){var t=e.dom.select(H.selector,n);v(t,function(n){_(n)?function(n,e){O(n)?n.dom().classList.remove(e):b(n,e);D(n)***REMOVED***(F.fromDom(n),H.nbspClass):e.dom.remove(n,!0)***REMOVED***)***REMOVED***function S(t,r){return function(e){e.setActive(r.get());function n(n){return e.setActive(n.state)***REMOVED***return t.on("VisualChars",n),function(){return t.off("VisualChars",n)***REMOVED******REMOVED******REMOVED***var k,x=function(t){function n(){return o***REMOVED***function e(n){return n(t)***REMOVED***var r=u(t),o={fold:function(n,e){return e(t)***REMOVED***,is:function(n){return t===n***REMOVED***,isSome:s,isNone:f,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:n,orThunk:n,map:function(n){return x(n(t))***REMOVED***,each:function(n){n(t)***REMOVED***,bind:e,exists:e,forall:e,filter:function(n){return n(t)?o:l***REMOVED***,toArray:function(){return[t]***REMOVED***,toString:function(){return"some("+t+")"***REMOVED***,equals:function(n){return n.is(t)***REMOVED***,equals_:function(n,e){return n.fold(f,function(n){return e(t,n)***REMOVED***)***REMOVED******REMOVED***;return o***REMOVED***,I=function(n){return null===n||n===undefined?l:x(n)***REMOVED***,L=N("string"),P=N("boolean"),B=N("function"),R=N("number"),V=Array.prototype.slice,U=(B(Array.from)&&Array.from,r.Node.ATTRIBUTE_NODE,r.Node.CDATA_SECTION_NODE,r.Node.COMMENT_NODE,r.Node.DOCUMENT_NODE,r.Node.DOCUMENT_TYPE_NODE,r.Node.DOCUMENT_FRAGMENT_NODE,r.Node.ELEMENT_NODE,r.Node.TEXT_NODE),j=(r.Node.PROCESSING_INSTRUCTION_NODE,r.Node.ENTITY_REFERENCE_NODE,r.Node.ENTITY_NODE,r.Node.NOTATION_NODE,"undefined"!=typeof r.window?r.window:Function("return this;")(),k=U,function(n){return function(n){return n.dom().nodeType***REMOVED***(n)===k***REMOVED***),q=function(n){if(null===n||n===undefined)throw new Error("Node cannot be null or undefined");return{dom:u(n)***REMOVED******REMOVED***,F={fromHtml:function(n,e){var t=(e||r.document).createElement("div");if(t.innerHTML=n,!t.hasChildNodes()||1<t.childNodes.length)throw r.console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return q(t.childNodes[0])***REMOVED***,fromTag:function(n,e){var t=(e||r.document).createElement(n);return q(t)***REMOVED***,fromText:function(n,e){var t=(e||r.document).createTextNode(n);return q(t)***REMOVED***,fromDom:q,fromPoint:function(n,e,t){var r=n.dom();return I(r.elementFromPoint(e,t)).map(q)***REMOVED******REMOVED***,G={"\xa0":"nbsp","\xad":"shy"***REMOVED***,H={charMap:G,regExp:C(G),regExpGlobal:C(G,!0),selector:A(G),nbspClass:"mce-nbsp",charMapToRegExp:C,charMapToSelector:A***REMOVED***,Y=function(n){return'<span data-mce-bogus="1" class="mce-'+H.charMap[n]+'">'+n+"</span>"***REMOVED***,z=function(n,e){var t=[],r=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)***REMOVED***return r***REMOVED***(n.dom().childNodes,F.fromDom);return v(r,function(n){e(n)&&(t=t.concat([n])),t=t.concat(z(n,e))***REMOVED***),t***REMOVED***,W={isMatch:function(n){var e=h(n);return j(n)&&e!==undefined&&H.regExp.test(e)***REMOVED***,filterDescendants:z,findParentElm:function(n,e){for(;n.parentNode;){if(n.parentNode===e)return n;n=n.parentNode***REMOVED******REMOVED***,replaceWithSpans:function(n){return n.replace(H.regExpGlobal,Y)***REMOVED******REMOVED***,K=w,X=M,J=function(n){var e=n.getBody(),t=n.selection.getBookmark(),r=W.findParentElm(n.selection.getNode(),e);r=r!==undefined?r:e,M(n,r),w(n,r),n.selection.moveToBookmark(t)***REMOVED***,Q=function(n,e){var t,r=n.getBody(),o=n.selection;e.set(!e.get()),a(n,e.get()),t=o.getBookmark(),!0===e.get()?K(n,r):X(n,r),o.moveToBookmark(t)***REMOVED***,Z=function(n,e){n.addCommand("mceVisualChars",function(){Q(n,e)***REMOVED***)***REMOVED***,$=tinymce.util.Tools.resolve("tinymce.util.Delay"),nn=function(e,t){var r=$.debounce(function(){J(e)***REMOVED***,300);!1!==e.settings.forced_root_block&&e.on("keydown",function(n){!0===t.get()&&(13===n.keyCode?J(e):r())***REMOVED***)***REMOVED***,en=function(n){return n.getParam("visualchars_default_state",!1)***REMOVED***,tn=function(e,t){e.on("init",function(){var n=!en(e);t.set(n),Q(e,t)***REMOVED***)***REMOVED***;!function rn(){i.add("visualchars",function(n){var e=o(!1);return Z(n,e),function(n,e){n.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:function(){return n.execCommand("mceVisualChars")***REMOVED***,onSetup:S(n,e)***REMOVED***),n.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",onAction:function(){return n.execCommand("mceVisualChars")***REMOVED***,onSetup:S(n,e)***REMOVED***)***REMOVED***(n,e),nn(n,e),tn(n,e),c(e)***REMOVED***)***REMOVED***()***REMOVED***(window);