/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.2.1 (2020-03-25)
 */
!function(l){"use strict";function n(){***REMOVED***function i(n){return function(){return n***REMOVED******REMOVED***function t(){return a***REMOVED***var e,r=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=i(!1),u=i(!0),a=(e={fold:function(n,t){return n()***REMOVED***,is:c,isSome:c,isNone:u,getOr:f,getOrThunk:s,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")***REMOVED***,getOrNull:i(null),getOrUndefined:i(undefined),or:f,orThunk:s,map:t,each:n,bind:t,exists:c,forall:u,filter:t,equals:o,equals_:o,toArray:function(){return[]***REMOVED***,toString:i("none()")***REMOVED***,Object.freeze&&Object.freeze(e),e);function o(n){return n.isNone()***REMOVED***function s(n){return n()***REMOVED***function f(n){return n***REMOVED***function m(n,t){return-1!==n.indexOf(t)***REMOVED***function g(n,t){return m(n.title.toLowerCase(),t)||function(n,t){for(var e=0,r=n.length;e<r;e++){if(t(n[e],e))return!0***REMOVED***return!1***REMOVED***(n.keywords,function(n){return m(n.toLowerCase(),t)***REMOVED***)***REMOVED***function d(n,t,e){for(var r=[],o=t.toLowerCase(),i=e.fold(function(){return c***REMOVED***,function(t){return function(n){return t<=n***REMOVED******REMOVED***),u=0;u<n.length&&(0!==t.length&&!g(n[u],o)||(r.push({value:n[u]["char"],text:n[u].title,icon:n[u]["char"]***REMOVED***),!i(r.length)));u++);return r***REMOVED***function y(n,t){for(var e=D(n),r=0,o=e.length;r<o;r++){var i=e[r];t(n[i],i)***REMOVED******REMOVED***function p(n,t){return function(n,t){return S.call(n,t)***REMOVED***(n,t)?n[t]:t***REMOVED***function v(n){return function(n,e){return x(n,function(n,t){return{k:t,v:e(n,t)***REMOVED******REMOVED***)***REMOVED***(z(n),function(n){return T({keywords:[],category:"user"***REMOVED***,n)***REMOVED***)***REMOVED***function h(e,o,n){var r=k(A.none()),u=k(A.none());e.on("init",function(){L.load(n,o).then(function(n){var t=v(e);!function(n){var o={***REMOVED***,i=[];y(n,function(n,t){var e={title:t,keywords:n.keywords,"char":n["char"],category:p(M,n.category)***REMOVED***,r=o[e.category]!==undefined?o[e.category]:[];o[e.category]=r.concat([e]),i.push(e)***REMOVED***),r.set(A.some(o)),u.set(A.some(i))***REMOVED***(P(n,t))***REMOVED***,function(n){l.console.log("Failed to load emoticons: "+n),r.set(A.some({***REMOVED***)),u.set(A.some([]))***REMOVED***)***REMOVED***);var i=function(){return u.get().getOr([])***REMOVED***,c=function(){return r.get().isSome()&&u.get().isSome()***REMOVED***;return{listCategories:function(){return[I].concat(D(r.get().getOr({***REMOVED***)))***REMOVED***,hasLoaded:c,waitForLoad:function(){return c()?E.resolve(!0):new E(function(n,t){var e=15,r=N.setInterval(function(){c()?(N.clearInterval(r),n(!0)):--e<0&&(l.console.log("Could not load emojis from url: "+o),N.clearInterval(r),t(!1))***REMOVED***,100)***REMOVED***)***REMOVED***,listAll:i,listCategory:function(t){return t===I?i():r.get().bind(function(n){return A.from(n[t])***REMOVED***).getOr([])***REMOVED******REMOVED******REMOVED***var b,O,w=function(e){function n(){return o***REMOVED***function t(n){return n(e)***REMOVED***var r=i(e),o={fold:function(n,t){return t(e)***REMOVED***,is:function(n){return e===n***REMOVED***,isSome:u,isNone:c,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:n,orThunk:n,map:function(n){return w(n(e))***REMOVED***,each:function(n){n(e)***REMOVED***,bind:t,exists:t,forall:t,filter:function(n){return n(e)?o:a***REMOVED***,toArray:function(){return[e]***REMOVED***,toString:function(){return"some("+e+")"***REMOVED***,equals:function(n){return n.is(e)***REMOVED***,equals_:function(n,t){return n.fold(c,function(n){return t(e,n)***REMOVED***)***REMOVED******REMOVED***;return o***REMOVED***,A={some:w,none:t,from:function(n){return null===n||n===undefined?a:w(n)***REMOVED******REMOVED***,j=(b="function",function(n){return function(n){if(null===n)return"null";var t=typeof n;return"object"==t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t***REMOVED***(n)===b***REMOVED***),C=Array.prototype.slice,k=(j(Array.from)&&Array.from,function(n){function t(){return e***REMOVED***var e=n;return{get:t,set:function(n){e=n***REMOVED***,clone:function(){return k(t())***REMOVED******REMOVED******REMOVED***),T=function(){return(T=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n***REMOVED***).apply(this,arguments)***REMOVED***,_=Object.prototype.hasOwnProperty,P=(O=function(n,t){return t***REMOVED***,function(){for(var n=new Array(arguments.length),t=0;t<n.length;t++)n[t]=arguments[t];if(0===n.length)throw new Error("Can't merge zero objects");for(var e={***REMOVED***,r=0;r<n.length;r++){var o=n[r];for(var i in o)_.call(o,i)&&(e[i]=O(e[i],o[i]))***REMOVED***return e***REMOVED***),D=Object.keys,S=Object.hasOwnProperty,x=function(n,r){var o={***REMOVED***;return y(n,function(n,t){var e=r(n,t);o[e.k]=e.v***REMOVED***),o***REMOVED***,L=tinymce.util.Tools.resolve("tinymce.Resource"),N=tinymce.util.Tools.resolve("tinymce.util.Delay"),E=tinymce.util.Tools.resolve("tinymce.util.Promise"),F=function(n,t){return n.getParam("emoticons_database_url",t+"/js/emojis"+n.suffix+".js")***REMOVED***,q=function(n){return n.getParam("emoticons_database_id","tinymce.plugins.emoticons","string")***REMOVED***,z=function(n){return n.getParam("emoticons_append",{***REMOVED***,"object")***REMOVED***,I="All",M={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"***REMOVED***,U="pattern",R=function(e,i){function n(){return{title:"Emoticons",size:"normal",body:{type:"tabpanel",tabs:function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var i=n[o];r[o]=t(i,o)***REMOVED***return r***REMOVED***(i.listCategories(),function(n){return{title:n,name:n,items:[o,c]***REMOVED******REMOVED***)***REMOVED***,initialData:t,onTabChange:function(n,t){u.set(t.newTabName),r.throttle(n)***REMOVED***,onChange:r.throttle,onAction:function(n,t){"results"===t.name&&(function(n,t){n.insertContent(t)***REMOVED***(e,t.value),n.close())***REMOVED***,buttons:[{type:"cancel",text:"Close",primary:!0***REMOVED***]***REMOVED******REMOVED***var t={pattern:"",results:d(i.listAll(),"",A.some(300))***REMOVED***,u=k(I),r=function(e,r){var o=null;return{cancel:function(){null!==o&&(l.clearTimeout(o),o=null)***REMOVED***,throttle:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];null!==o&&l.clearTimeout(o),o=l.setTimeout(function(){e.apply(null,n),o=null***REMOVED***,r)***REMOVED******REMOVED******REMOVED***(function(n){!function(n){var t=n.getData(),e=u.get(),r=i.listCategory(e),o=d(r,t[U],e===I?A.some(300):A.none());n.setData({results:o***REMOVED***)***REMOVED***(n)***REMOVED***,200),o={label:"Search",type:"input",name:U***REMOVED***,c={type:"collection",name:"results"***REMOVED***,a=e.windowManager.open(n());a.focus(U),i.hasLoaded()||(a.block("Loading emoticons..."),i.waitForLoad().then(function(){a.redial(n()),r.throttle(a),a.focus(U),a.unblock()***REMOVED***)["catch"](function(n){a.redial({title:"Emoticons",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"<p>Could not load emoticons</p>"***REMOVED***]***REMOVED***,buttons:[{type:"cancel",text:"Close",primary:!0***REMOVED***],initialData:{pattern:"",results:[]***REMOVED******REMOVED***),a.focus(U),a.unblock()***REMOVED***))***REMOVED***,B=function(n,t){function e(){return R(n,t)***REMOVED***n.ui.registry.addButton("emoticons",{tooltip:"Emoticons",icon:"emoji",onAction:e***REMOVED***),n.ui.registry.addMenuItem("emoticons",{text:"Emoticons...",icon:"emoji",onAction:e***REMOVED***)***REMOVED***;!function G(){r.add("emoticons",function(n,t){var e=F(n,t),r=q(n),o=h(n,e,r);B(n,o),function(r,o){r.ui.registry.addAutocompleter("emoticons",{ch:":",columns:"auto",minChars:2,fetch:function(t,e){return o.waitForLoad().then(function(){var n=o.listAll();return d(n,t,A.some(e))***REMOVED***)***REMOVED***,onAction:function(n,t,e){r.selection.setRng(t),r.insertContent(e),n.hide()***REMOVED******REMOVED***)***REMOVED***(n,o)***REMOVED***)***REMOVED***()***REMOVED***(window);