@model PlataformaTransparencia.Modelos.ModelHeaderLocalitacionProfileData

@inject OrchardCore.IOrchardHelper Orchard
@using PlataformaTransparencia.Negocios.Comunes
@inject ICdnService Cdn

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    System.IFormatProvider cultureMoneda = new System.Globalization.CultureInfo("es-CO");
}

<body>
    <!--ENCABEZADO-->
    <section class="banner-main-section s0-section" style="background-image: url(@Model.UrlImage)">
        <div class="bgBlueOverlay">&nbsp;</div><!-- DON'T EREASE-->
        <div class="container">
            <!-- Begin bread crumbs -->
            <nav class="bread-crumbs mb-5">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <ul class="bread-crumbs-list">
                                <li>
                                    <a href="\">Inicio</a>
                                    <i class="material-icons md-18">chevron_right</i>
                                </li>
                                <li><a href="#!">Localización</a><i class="material-icons md-18">chevron_right</i></li>
                                <li></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>
            <!-- End bread crumbs -->
            <div class="row justify-content-center">

                <!-- intro map-->
                <input type="hidden" id="locationId" value=@Model.LocationId />
                <input type="hidden" id="typeLocationId" value=@Model.Type />
                <div class="col-md-12 text-center">
                    <h1 class="mainTit_t1 text-center" id="nomLocation">@Model.Name </h1>
                    <div class="banner-main-desc">
                        <span class="h6 sub_t1_red text-center" id="typeLocation"><b>@Model.NameType</b></span>
                    </div>
                </div>
                <div class="col-md-6 text-center">
                    <ul class="list-inline details">
                        @if (@Model != null)
                        {
                            <li>
                                <span class="h2"> @Model.GeneralInformacion.num_proyectos_pdl</span>
                                <span>Proyectos de inversión de desarrollo local</span>
                            </li>
                            <li>
                                <span class="h2"> @Model.GeneralInformacion.num_proyectos_pot</span>
                                <span>Proyectos POT</span>
                            </li>
                        }
                    </ul>
                </div>
            </div>
            <div class="row navs-shortcuts">
                <div class="" id="navs-header">
                   @*  <a class="btn-section" href="#s0">
                        <span class="ic-shortcut"><span class="material-icons md-24">travel_explore</span></span>
                        <span class="text-btn">Información general 2</span>
                    </a>
                    <a class="btn-section" href="#s1">
                        <span class="ic-shortcut"><i class="material-icons md-24">dashboard</i></span>
                        <span class="text-btn">Proyectos</span>
                    </a> *@
                </div>
            </div>
        </div>
    </section>
    <section class="banner-ppd">
        <div class="container px-4">
            <div class="row align-items-center banner-content">
                <div class="col-lg-4 col-md-5 text-center d-none d-md-block">
                    <div class="character-placeholder mx-auto">
                        <img src="~/img/Proyecto/ppd-002.png" />
                    </div>
                </div>
                <div class="col-lg-8 col-md-7">
                    <span class=" h2 display-4 fw-bolder text-primary-red text-uppercase mb-2">
                        PROYECTOS
                    </span><br />
                    <span class="h3 fw-bold text-primary-blue text-uppercase mb-4">
                        DE LOS FONDOS DE DESARROLLO LOCAL
                    </span>
                    <p class="fs-6 text-dark lh-base mb-4">
                       Aquí podrás conocer cómo las alcaldías locales invierten en mejorar cada localidad. Estas inversiones se traducen en obras que impactan directamente su entorno: parques de la red de proximidad, vías locales e intermedias, espacio público como alamedas, andenes, dotación de equipamientos culturales, entre otros.

                    </p>
                    <p>Todo esto hace parte de los <span class="text-italic">Proyectos Integrales de Proximidad</span>, que son parte del POT, y que están a cargo de los alcaldes y alcaldesas locales.</p>
                    <a href="#modal-pdd" class="btn btn-pdd btn-lg text-white text-decoration-none">
                        Aquí te contamos
                    </a>
                </div>
            </div>
        </div>
    </section>
    <!--PRESUPUESTO POR AÑO-->
    <section class="section" id="s1">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 offset-lg-3">
                    <div class="alert alert-info d-flex align-items-center" role="alert">
                        <i class="bi bi-lightbulb bulbicn me-2"></i>
                        <span>Los datos de <strong>presupuesto y distribución</strong> cambian según el año seleccionado.</span>
                    </div>
                </div>
            </div>
            <div class="row sep mb-4 py-4">
                <div class="section-heading heading-left">
                    <h2>Presupuesto fondos de desarrollo local</h2>
                </div>
                <div class="contadores">
                    <div class="row" id="divTxtTodosProy"></div>
                </div>
                <!--SELECT AÑO-->
                <div class="row justify-content-center mb-4 py-4">
                    <div class="col-lg-4">
                        <!--YEAR FILTER-->
                        <div class="form-group mb-5">
                            <label for="input-select">Selecciona un año</label>
                            <select class="form-select" aria-label="Selecciona un año:" id="annioPresupuestoLocation">
                                @foreach (var item in Model.Years)
                                {
                                    <text>
                                    <option value="@item.id">@item.name</option>
                                    </text>

                                }
                            </select>
                        </div>
                    </div>
                    <div class="row justify-content-center mb-4">
                        <div class="col-lg-12">
                            <div class="Section-infograph mb-4 justify-content-center">
                                <div class="main-icon-value">
                                    <img src="~/img/svg-icons/ICO-Org-009.svg" class="img-fluid" alt="Icono decorativo Presupuesto" />
                                </div>
                                <div class="cont-pres-infograph">
                                    <span class="h4 d-block mb-3">Presupuesto total vigente </span>
                                    <div class="h2 mb-0">
                                        <span class="big-number valor-vigente" tipo="general"></span>
                                        <span class="lblEtiquetaMoneda"></span>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="col-lg-6 mb-3">
                            <div class="card white-card comprometido">
                                <div class="card-body">
                                    <div class="main-icon-value">
                                        <div class="ic-wrap">
                                            <img src="~/img/ic-comprometido.svg" class="img-fluid" alt="Icono decorativo Presupuesto" />
                                        </div>
                                        <div class="desc-data">
                                            <div class="executeV">Presupuesto <span class="text-bold">COMPROMETIDO</span>
                                                <a href="#popup1" class="p-2 popup1_open ic-ttip">
                                                    <span class="material-icons md-32">
                                                        info
                                                    </span>
                                                </a>

                                            </div>
                                            <div class="presupuestoN valor-comprometido" tipo="general"></div>

                                            <small>Ejecución</small>
                                            <div class="percentage">
                                                <div class="completed comprometido" tipo="general"></div>
                                                <div class="indicatorValues">
                                                    <span class="startPoint text-center porcentaje-comprometido" tipo="general"></span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 mb-3">
                            <div class="card white-card girado">
                                <div class="card-body">
                                    <div class="main-icon-value">
                                        <div class="ic-wrap">
                                            <img src="~/img/ic-girado.svg" class="img-fluid" alt="Icono decorativo Presupuesto" />
                                        </div>
                                        <div class="desc-data">
                                            <div class="executeV">Presupuesto <span class="text-bold">GIRADO</span>
                                                <a href="#popup2" class="p-2 popup2_open ic-ttip">
                                                    <span class="material-icons md-32">
                                                        info
                                                    </span>
                                                </a>
                                            </div>
                                            <div class="presupuestoN valor-girado" tipo="general"></div>
                                            <small>Porcentaje de ejecución</small>
                                            <div class="percentage">
                                                <div class="completed girado" tipo="general"></div>
                                                <div class="indicatorValues">
                                                    <span class="startPoint text-center porcentaje-girado" tipo="general"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!--DISTRIBUCIÓN POR TIPO DE GASTO-->
    <section class="section" id="s10">
        <div class="container">
        <div class="row sep mb-4">
            <div class="section-heading heading-left">
                <h2>Distribución por tipo de gasto año <span class="lblAnyoSelected" id="distribucionTipoGastoAnio"></span></h2>
            </div>
            <div class="section-heading">
                @* <p>El presupuesto actual del sector @Model.EncabezadoSector.nomSector se distribuye en diferentes lineas estratégicas para garantizar el acceso, la portección y la promoción de este sector en Bogotá. Esta visualización permite identificar las áreas con mayor asignacón presupuestal y cómo se priorizan iniciativas alineadas al desarrollo territorial y social de la ciudad. </p>  *@
            </div>
            <div class="row">
                <div class="pChart">
                    <div id="divGraphGastoLocalizacion" style="position: relative;">
                    </div>
                </div>
                <div>
                   <p id="fechaCorteGastoLocalizacion" style="text-align: center;"></p>
                </div>
            </div>
        </div>
        </div>
    </section>

    <!--PROYECTOS POR SECTOR-->
    <section class="section" id="s2">
        <div class="container">
            <div class="row sep mb-4">
                <div class="section-heading heading-left">
                    <h2>Proyectos por sector</h2>
                </div>
                <div class="section-subheading">
                    <div class="wrap-desc-pot">
                        <p>Los proyectos por sector se distribuye en diferentes líneas estratégicas para garantizar el acceso, la protección y la promoción de la vida cultural en Bogotá.</p>
                    </div>
                </div>
                <div class="col-lg-12 wrap-pry-destacados mb-4">
                    <div class="graphWrap py-3" id="divGraphProy"></div>
                </div>
            </div>
        </div>
    </section>

    <!--INVERSIÓN EN LA LOCALIDAD-->
    <section class="section" id="s2">
        <div class="container">
            <div class="row sep mb-4">
                <div class="section-heading heading-left">
                    <h2>Inversión en la localidad</h2>
                    <br />
                    <p>Las estrategias de inversión permiten fortalecer el acceso, la participación y el disfrute de los derechos culturales en toda la ciudad. Estas inversiones promueven la transformación del territorio, impulsan la economía creativa y contribuyen al desarrollo sostenible desde el arte, el patrimonio y la identidad local</p>
                </div>
                <div class="content">
                    <div class="row justify-content-center mb-4">
                        <div class="col-12 d-flex justify-content-center align-items-center mb-3 wrap-pryheader">
                            <img alt="icono de proyectos destacados y su alineacion a ODS" src="..\img\imgsector\icn_proyectodestacado.png" />
                            <h2 class="display-4 fw-bold mb-0" id="cantidadProyectosLocalizacion"></h2>
                        </div>
                        <!-- Descripción -->
                        <div class="col-lg-10 col-xl-8 mb-4">
                            <div class="text-center">
                                <p>
                                    Los proyectos de inversión en Bogotá están ajustados a los ODS porque estos
                                    objetivos ofrecen una guía global para lograr desarrollo sostenible. Alinearlos garantiza
                                    que las inversiones locales contribuyan al bienestar social, económico y ambiental, en
                                    coherencia con metas internacionales.
                                </p>
                               @*  <p class="mb-4">
                                    Estos proyectos contribuyen estratégicamente a estos ODS.
                                </p> *@
                            </div>
                            <div class="col-lg-10 offset-lg-1 py-4 mb-4">
                                <div class="alert alert-info d-flex align-items-center" role="alert">
                                    <i class="bi bi-lightbulb me-2 bulbicn"></i>
                                    <span class="text-center lh-sm">
                                        En la siguiente tabla se muestran los <strong>valores totales programados, comprometidos y girados</strong>. Si desea consultar los valores por año, puede hacerlo en el perfil individual de cada proyecto.
                                    </span>
                                </div>
                            </div>
                        </div>
                        <!--ODS-->
                        <div class="col-lg-8 col-xl-8 col-md-8">
                            <input id="proyDesarrollo" name="proyDesarrollo" type="hidden" value="">
                            <div class="row" id="odsDesarrolloLoc">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label for="selectLocalidades" class="small">Filtrar por sector</label>
                                <select class="form-select" aria-label="Filtrar por" id="selectSectorLocalidades">
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label for="selectLocalidades" class="small">Filtrar por entidad</label>
                                <select class="form-select" aria-label="Filtrar por" id="selectEntidadLocalidades">
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="form-group">
                                <label for="selectLocalidades" class="small">Filtrar por destacados</label>
                                <select class="form-select" aria-label="Filtrar por" id="selectDestacadosLocalidades">
                                </select>
                            </div>
                        </div>
                    </div>
                   @*  <div class="row">
                        <div class="col-lg-12 text-center">
                            <div class="comparativeTable">
                                <div class="card-entidades-group">
                                    <div class="card d-flex cardborder">
                                        <div class="headEnt">
                                            <div class="data1 mainDataEntidad4">
                                                <span class="labelTit">Código BPIN: 2260</span>
                                                <span class="td1">ACCIONES FORMATIVAS Y HERRAMIENTAS PEDAGÓGICAS INNOVADORAS PARA LA AUTORREGULACIÓN, SOLIDARIDAD Y CORRESPONSABILIDAD</span>
                                            </div>
                                            <div class="data1c">
                                                <span class="labelTit">Valor programado2</span>
                                                <span class="td1">$ 1.603,0 millones</span>
                                            </div>
                                            <div class="data1c">
                                                <span class="labelTit">% Valor programado2</span>
                                                <span class="td1">32%</span>
                                            </div>
                                            <div class="data1c">
                                                <span class="labelTit">Valor comprometido2 </span>
                                                <span class="td1">$ 46,1 billones</span>
                                            </div>
                                            <div class="data1c">
                                                <span class="labelTit">Valor comprometido2 </span>
                                                <span class="td1">52%</span>
                                            </div>
                                            <div class="data1c">
                                                <span class="labelTit">Valor girado2</span>
                                                <span class="td1">$ 15,4 billones</span>
                                            </div>
                                        </div>
                                        <div class="btn-action">
                                            <div class="btnPerfil">
                                                <a class="text-small" target="_blank" href="/PerfilProyecto/2260"><i class="material-icons md-18">arrow_forward</i><br><span>Ver perfil</span></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="divPagDistDesarrolloLoc" class="">
                        </div>
                    </div> *@
                    <div class="row">
                        <div class="col-lg-12 text-center">
                            <div class="comparativeTable">
                                <div class="card-entidades-group" id="listdesarrolloLocalizacion">
                                </div>
                            </div>
                        </div>
                        <div id="divPagDistDesarrolloLoc" class="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!--PROYECTOS POT-->
    <section class="section" id="s9">
        <div class="container">
            <div class="row sep mb-4">
                <div class="section-heading heading-left">
                    <h2>Proyectos POT</h2>
                </div>

                <div class="section-subheading">
                    <div class="wrap-desc-pot">
                        <p>En Bogotá se dividen los proyectos de inversión y los de desarrollo local porque tienen diferentes alcances: los de inversión responden a necesidades de toda la ciudad, mientras que los locales atienden prioridades específicas de cada localidad. Así se asegura una mejor gestión y uso de los recursos.</p>
                        <div class="city-card-logopot">
                            <img alt="logo del Plan de ordenamiento territorial" src="..\img\imgsector\Logopot.png" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-4">
                        <div class="form-group">
                            <label for="selectLocalidades" class="small">Filtrar por sector</label>
                            <select class="form-select" aria-label="Filtrar por" id="selectSectorProyectosPOT">
                            </select>
                        </div>
                    </div>
                </div>

                <div class="col-lg-12 wrap-pry-destacados mb-4">
                    <div class="row py-4" id="divProyectosPotLoc">
                    </div>
                    <div id="divPagPotLoc" class="">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal usando Bootstrap 5 structure -->
    <div id="modal-pdd" class="modal-overlay">
        <a href="#close" class="modal-backdrop-custom"></a>

        <div class="modal-dialog-custom">
            <div class="modal-content-custom PDL">

                <!-- Modal Header -->
                <div class="modal-header-custom p-4 text-center">
                    <a href="#close" class="btn-close-custom text-white">
                        x
                    </a>
                </div>

                <!-- Modal Body -->
                <div class="modal-body p-4">
                    <div class="row">
                        <!-- Columna del contenido -->
                        <div class="col-lg-9 col-md-8 offset-md-3 card h-100">
                            <div class="card-body">
                                <span class="h4 display-5 fw-bolder text-primary-blue text-uppercase mb-4">
                                    PROYECTOS DE LOS FONDOS DE DESARROLLO LOCAL
                                </span>
                                <!-- Primeras dos preguntas -->
                                <div class="row">
                                    <div class="col-md-12 mb-2">
                                        <span class="h5 text-primary-red fw-bold fs-6">
                                            ¿Cómo se participa en la inversión de las alcaldías locales?
                                        </span>
                                        <p class="small text-dark lh-base">
                                            La mitad de la inversión que hacen las alcaldías locales se prioriza anualmente a través de los Presupuestos Participativos, en los que usted vota. La otra mitad corresponde a tareas de las administraciones (como vigilancia y control, entrega de subsidios, etc.) que se diseñan cada cuatro años en los planes de desarrollo local, también con participación de los Consejos de Planeación Local y los ediles.
                                        </p>
                                    </div>
                                    <div class="col-md-12 mb-2">
                                        <span class="h5 text-primary-red fw-bold fs-6">
                                            ¿Cómo se prioriza la inversión de las alcaldías locales?
                                        </span>
                                        <p class="small text-dark lh-base">
                                            Cerca del 40% de los recursos de presupuestos participativos se enmarca en los Proyectos Integrales de Proximidad, que corresponden a infraestructuras de escala local definidas en el POT, como vías locales, parques de proximidad, equipamientos, entre otros. De esa manera la ciudadanía activa prioriza las cuadras, parques, alamedas que quiere que la administración local construya o mejore cada año.
                                        </p>
                                    </div>
                                    <div class="col-md-12 mb-2 d-flex">
                                      <div class="row">
                                          <div class="col-md-12">
                                              <span class="h5 text-primary-red fw-bold fs-6">
                                            ¿Cómo se le asigna el dinero a estos proyectos?
                                        </span>
                                            <p class="small text-dark lh-base">
                                            Bogotá le asigna 12% de sus ingresos corrientes -impuestos distritales, tasas, y transferencias de la Nación- a los proyectos de las alcaldías locales. Para saber cuántos recursos van a cada localidad, la administración distrital tiene en cuenta necesidades insatisfechas. 
                                        </p>
                                          
                                        </div>
                                        <div class="col-md-8 offset-md-2 bd-callout bd-callout-info d-flex dData">
                                                    <div class="stat-number text-primary-blue fw-bolder text-center">1,8<br /><p class="fs-6 lh-1">Billones de pesos</p></div>
                                                    <p class="small text-dark lh-base align-middle">
                                                        Son ejecutados  al año por los alcaldes y alcaldesas locales.
                                                    </p>
                                                </div>
                                      </div>
                                      </div>
                                    
                                    <div class="col-md-12">
                                        <span class="h5 text-primary-red fw-bold fs-6">
                                            ¿Qué tiene que ver el POT aquí?
                                        </span>
                                        <p class="small text-dark lh-base">
                                            Existen varios mecanismos para priorizar la inversión de las alcaldías locales. Los gastos más agregados, llamados líneas de inversión, se deciden en el CONFIS a partir de propuestas que entregan los Consejos de Planeación Local. Los alcaldes adaptan a sus localidades estas líneas y las presentan ante las JAL para su posterior aprobación. La mitad de los recursos aprobados se destina a presupuestos participativos, para que los ciudadanos decidan el detalle de su implementación con iniciativas muy concretas.
                                        </p>
                                    </div>
                                    <div class="col-md-12 py-4">
                                        <!-- Estadísticas usando-->
                                        <span class="h4 text-primary-red fw-bold text-uppercase letter-spacing-1 text-center">
                                            ¡INVERSIÓN LOCAL CON PARTICIPACIÓN CIUDADANA!
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--MODAL 1-->
        <div id="popup1" class="popup_style popup_style_wide popup_style_sally open_popup" style="display:none;">
            <div class="popup">
                <div class="popup_content">
                    <h4 class="popup_title">Tipos de presupuesto</h4>
                    <div class="content2">
                        <ul>
                            <li>
                                <span class="text-bold">Presupuesto Comprometido:</span>  <br />Es la parte del dinero ya reservada para cumplir obligaciones, como contratos, órdenes de compra o convenios.
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="popup1_close popup_close"><i class="material-icons md-24">close</i></div>
            </div>
        </div>
        <!--MODAL 2-->
        <div id="popup2" class="popup_style popup_style_wide popup_style_sally open_popup" style="display:none;">
            <div class="popup">
                <div class="popup_content">
                    <h4 class="popup_title">Tipos de presupuesto</h4>
                    <div class="content2">
                        <ul>
                            <li>
                                <span class="text-bold">Presupuesto Girado:</span>  <br />Es el dinero efectivamente pagado, una vez que se han recibido los bienes o servicios contratados.
                            </li>

                        </ul>
                    </div>
                </div>
                <div class="popup2_close popup_close"><i class="material-icons md-24">close</i></div>
            </div>
        </div>

    </div>

    <!-- Elemento invisible para cerrar modal -->
    <div id="close"></div>
  
    <style>
        .container-linkMap path:hover {
            fill: #6ECAE4;
            stroke: #0171bb;
            stroke-width: 3px;
            transition: fill 0.4s;
        }
    </style>
    @section scripts
    {
        <script src="@Cdn.Url(Url, "~/js/jquery/jquery-ui.min.js")"></script>
        <script src="@Cdn.Url(Url, "~/Content/dist/js/lib/D3/d3.min.js")" charset="utf-8"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/d3plus@2"></script>
        <script src="@Cdn.Url(Url, "~/js/localizacion_aux.js")"></script>
    }

</body>

