@model PlataformaTransparencia.Modelos.ModelPresupuestoEmergenciaData
@inject OrchardCore.IOrchardHelper Orchard
@{ Layout = "~/Views/Shared/_Layout.cshtml"; }

<style>
    .node rect {
        cursor: move;
        fill-opacity: .8;
        shape-rendering: crispEdges;
    }

    .node text {
        pointer-events: none;

    }

    .link {
        fill: none;
        stroke: #000;
        stroke-opacity: .1;
    }

        .link:hover {
            stroke-opacity: .2;
        }

    .arc text {
        font: 12px sans-serif;
        text-anchor: middle;
        font-weight: bold;
    }

    .arc path {
        stroke: #fff;
    }

    .toolTip {
        position: absolute;
        display: none;
        width: auto;
        height: auto;
        background: none repeat scroll 0 0 white;
        border: 0 none;
        border-radius: 8px 8px 8px 8px;
        box-shadow: -3px 3px 15px #888888;
        color: black;
        font: 12px sans-serif;
        padding: 5px;
        text-align: center;
    }
</style>

<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-bottom" class="contractProfile">

    <section id="s0" class="banner-main">
       <!-- DON'T EREASE-->
        <div class="container">
          <nav class="bread-crumbs">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <ul class="bread-crumbs-list">
                            <li>
                                <a href="\">Inicio</a>
                                <i class="material-icons md-18">chevron_right</i>
                            </li>
                            <li><a href="#!">Presupuesto Emergencia</a><i class="material-icons md-18">chevron_right</i></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav><!-- End bread crumbs -->

            <div class="row justify-content-center">

            <div class="col-lg-8">
                <div class="banner-main-info">
                    <div class="banner-main-title">
                        <h1> 
                            Presupuesto general para atención de emergencia @Model.NombreEmergencia
                        </h1>
                    </div>
                    <div class="banner-main-desc">
                        <p>
                            Productos bienes y servicios
                        </p>

                    </div>

                </div>
            </div>
            </div>
        </div>
    </section>
    <section class="section">
        <div class="container">
            <div class="row">
                <div class="col-lg-10">
                    <div class="section-heading heading-left">
                       <h2>Distribución de la ejecución de gastos</h2>
                       
                    </div>
                    <div class="banner-main-desc">
                        <p>Explora la distribución de las fuentes internas y externas de los recursos, destinados a cubrir la emergencia @Model.NombreEmergencia </p>
                    </div>
                </div>
            </div>
                    <!-- VIEW OPTIONS-->
                    <div class="row justify-content-center">
                        <div class="col-lg-10">
                            <div class="Options">
                                <div class="switchTable" id="filtro_iconos" opc="">
                                    <p class="vis-none">Tipo de visualización</p>
                                    <a role="button" id="btnGastoAdminCentral" codigo="gastoAdminCentral" class="tipo_presupuesto btn activo">
                                        <span class="txt-bold">ADMINISTRACIÓN CENTRAL</span>
                                    </a>
                                    <a codigo="gastoDescentralizado" role="button" class="tipo_presupuesto btn ">
                                        <span class="txt-bold">ADMINISTRACIÓN DESCENTRALIZADA</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="divListadoRecursosObjeEnte">
                        <!--TABLA COMPARATIVA-->
                        <input type="hidden" id="migapanlistado" value="" />
                        <div class="comparativeTable" id="divListadoRecursosAdminCentral">
                            @if (Model.RecursosAdministracionCentral.Count() > 0)
                            {
                                int i = 0;
                                int j = 0;
                                int k = 0;
                                int l = 0;
                                decimal total_avance = 0;
                                decimal total_presupuesto = 0;
                                <div class="panel-group accordion" id="accordion" role="tablist" aria-multiselectable="true">
                                    @foreach (var item in Model.RecursosAdministracionCentral)
                                    {
                                        var nomCollapse = "collapseAdminOne_" + i.ToString() + "_" + j.ToString();
                                        var nomHeading = "headingAdminOne_" + i.ToString() + "_" + j.ToString();
                                        total_avance += item.total_avance;
                                        total_presupuesto += item.total_presupuesto;
                                        <div class="panel panel-default">
                                            <div class="panel-heading" role="tab" id="@nomHeading">
                                                <div class="panel-title">
                                                    <a role="button" id="a_@item.IdItem" class="prueba_enlace" item="@item.IdItem" data-toggle="collapse" data-parent="#accordion" href="#@nomCollapse" aria-expanded="true" aria-controls="@nomCollapse">
                                                        <div class="head">
                                                            <div class="mainData">
                                                                <span class="labelTit">Institución</span>
                                                                <span class="td1"> @item.Nombre</span>
                                                            </div>
                                                            <div class="data1">
                                                                <span class="labelTit">Ejecutado</span>
                                                                <span class="td1">RD $ @String.Format("{0:n2}", @item.total_avance / 1000000) Millones</span>
                                                            </div>
                                                        </div>
                                                    </a>
                                                </div>
                                            </div>
                                            <div id="@nomCollapse" class="panel-collapse collapse nivel1" role="tabpanel" aria-labelTitledby="@nomHeading" item="@item.Nombre.ToUpper()">
                                                <div class="panel-body">
                                                    @foreach (var ent in item.Detalles)
                                                    {
                                                        var nomNivel2 = "accordionAdmin_l2_" + i.ToString() + "_" + j.ToString();
                                                        var headNivel2 = "headLevelAdmin2_" + i.ToString() + "_" + j.ToString();
                                                        var panelHijo2 = "cAdmin2_" + j.ToString() + "_" + k.ToString();
                                                        var nomHeadLevel3 = "headLevelAdmin3_" + j.ToString() + "_" + k.ToString();
                                                        <div class="panel-group nivel22" id="@nomNivel2" role="tablist" aria-multiselectable="true">
                                                            <div class="panel panel-default">
                                                                <div class="panel-heading" role="tab" id="@headNivel2">
                                                                    <div class="panel-title">
                                                                        <a role="button" data-toggle="collapse" data-parent="#@nomNivel2" href="#@panelHijo2" aria-expanded="true" aria-controls="@nomCollapse">
                                                                            <div class="head">
                                                                        <div class="mainDatalvl2">
                                                                                    <span class="labelTit">Unidad ejecutora</span>
                                                                                    <span class="td1p">@ent.NomCapitulo</span>
                                                                                </div>
                                                                                <div class="data2">
                                                                                    <span class="labelTit">Ejecutado</span>
                                                                                    <span class="td1p">RD $ @String.Format("{0:n2}", @ent.avance / 1000000) Millones</span>
                                                                                </div>
                                                                            </div>
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                                <div id="@panelHijo2" class="panel-collapse collapse level3 nivel2" role="tabpanel" aria-labelledby="@nomHeadLevel3" entidad="@ent.NomCapitulo.ToUpper()">
                                                                    <div class="panel-body">
                                                                        @foreach (var act in ent.Detalles)
                                                                        {
                                                                            var nomNivel3 = "accordionAdmin_l3_" + j.ToString() + "_" + k.ToString();
                                                                            var nomCnivel3 = "cAdmin3_" + j.ToString() + "_" + k.ToString();
                                                                            <div class="panel-group nivel33" id="@nomNivel3" role="tablist" aria-multiselectable="true">
                                                                                <div class="panel panel-default">
                                                                                    <div class="panel-heading" role="tab" id="@nomHeadLevel3">
                                                                                        <div class="panel-title">
                                                                                            <a role="button" data-toggle="collapse" data-parent="#@nomNivel3" aria-expanded="true" aria-controls="@nomCollapse">
                                                                                                <div class="head">
                                                                                            <div class="data2 mainDatalvl2">
                                                                                                        <span class="labelTit">Cuenta</span>
                                                                                                        <span class="td1p">@act.NomConcepto</span>
                                                                                                    </div>
                                                                                                    <div class="data2">
                                                                                                        <span class="labelTit">Ejecutado</span>
                                                                                                        <span class="td1p">$ @String.Format("{0:n2}", @act.avance / 1000000) Millones</span>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </a>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            k++;
                                                                        }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        j++;
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                        i++;
                                    }
                                </div>
                                <div id="divAdminTotales" class="summUp">
                                    <div class="panel-title">
                                        <div class="head">
                                            <div class="mainData">
                                                <span class="labelTit">&nbsp;</span>
                                                <span class="td1">Totales</span>
                                            </div>
                                            <div class="data2">
                                                <span class="labelTit">Ejecutado</span>
                                                <span class="td1">RD $ @String.Format("{0:n0}", @total_avance / 1000000) Millones</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                    <div id="divListadoRecursosObjeEnteNoCentral">
                        <!--TABLA COMPARATIVA-->
                        <input type="hidden" id="migapanlistado" value="" />
                        <div class="comparativeTable" id="divListadoRecursosAdminNoCentral">
                            @if (Model.RecursosAdministracionDescentralizado.Count() > 0)
                            {
                                int i = 0;
                                int j = 0;
                                int k = 0;
                                int l = 0;
                                decimal total_avance = 0;
                                decimal total_presupuesto = 0;
                                <div class="panel-group accordion" id="accordionAdminNoCentral" role="tablist" aria-multiselectable="true">
                                    @foreach (var item in Model.RecursosAdministracionDescentralizado)
                                    {
                                        var nomCollapse = "collapseOne_" + i.ToString() + "_" + j.ToString();
                                        var nomHeading = "headingOne_" + i.ToString() + "_" + j.ToString();
                                        total_avance += item.total_avance;
                                        total_presupuesto += item.total_presupuesto;
                                        <div class="panel panel-default">
                                            <div class="panel-heading" role="tab" id="@nomHeading">
                                                <div class="panel-title">
                                                    <a role="button" id="a_@item.IdItem" class="prueba_enlace" item="@item.IdItem" data-toggle="collapse" data-parent="#accordion" href="#@nomCollapse" aria-expanded="true" aria-controls="@nomCollapse">
                                                        <div class="head">
                                                    <div class="mainData">
                                                                <span class="labelTit">Institución</span>
                                                                <span class="td1"> @item.Nombre</span>
                                                            </div>
                                                            <div class="data2">
                                                                <span class="labelTit">Ejecutado</span>
                                                                <span class="td1">RD $ @String.Format("{0:n2}", @item.total_avance / 1000000) Millones</span>
                                                            </div>
                                                        </div>
                                                    </a>
                                                </div>
                                            </div>
                                            <div id="@nomCollapse" class="panel-collapse collapse nivel1" role="tabpanel" aria-labelTitledby="@nomHeading" item="@item.Nombre.ToUpper()">
                                                <div class="panel-body">
                                                    @foreach (var ent in item.Detalles)
                                                    {
                                                        var nomNivel2 = "accordion_l2_" + i.ToString() + "_" + j.ToString();
                                                        var headNivel2 = "headLevel2_" + i.ToString() + "_" + j.ToString();
                                                        var panelHijo2 = "c2_" + j.ToString() + "_" + k.ToString();
                                                        var nomHeadLevel3 = "headLevel3_" + j.ToString() + "_" + k.ToString();
                                                        //var val_nivel2 = @ent.avance / 1000000;
                                                        <div class="panel-group nivel22" id="@nomNivel2" role="tablist" aria-multiselectable="true">
                                                            <div class="panel panel-default">
                                                                <div class="panel-heading" role="tab" id="@headNivel2">
                                                                    <div class="panel-title">
                                                                        <a role="button" data-toggle="collapse" data-parent="#@nomNivel2" href="#@panelHijo2" aria-expanded="true" aria-controls="@nomCollapse">
                                                                            <div class="head">
                                                                        <div class="mainDatalvl2">
                                                                                    <span class="labelTit">Unidad ejecutora</span>
                                                                                    <span class="td1p">@ent.NomCapitulo</span>
                                                                                </div>
                                                                                <div class="data2">
                                                                                    <span class="labelTit">Ejecutado</span>
                                                                                    <span class="td1p">RD $ @String.Format("{0:n2}", @ent.avance / 1000000) Millones</span>
                                                                                </div>
                                                                            </div>
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                                <div id="@panelHijo2" class="panel-collapse collapse level3 nivel2" role="tabpanel" aria-labelledby="@nomHeadLevel3" entidad="@ent.NomCapitulo.ToUpper()">
                                                                    <div class="panel-body">
                                                                        @foreach (var act in ent.Detalles)
                                                                        {
                                                                            var nomNivel3 = "accordion_l3_" + j.ToString() + "_" + k.ToString();
                                                                            var nomCnivel3 = "c3_" + j.ToString() + "_" + k.ToString();
                                                                            <div class="panel-group nivel33" id="@nomNivel3" role="tablist" aria-multiselectable="true">
                                                                                <div class="panel panel-default">
                                                                                    <div class="panel-heading" role="tab" id="@nomHeadLevel3">
                                                                                        <div class="panel-title">
                                                                                            <a role="button" data-toggle="collapse" data-parent="#@nomNivel3" aria-expanded="true" aria-controls="@nomCollapse">
                                                                                                <div class="head">
                                                                                                    <div class="data2 mainDatalvl2">
                                                                                                        <span class="labelTit">Cuenta</span>
                                                                                                        <span class="td1p">@act.NomConcepto</span>
                                                                                                    </div>
                                                                                                    <div class="data2 mainDatalvl2">
                                                                                                        <span class="labelTit">Ejecutado</span>
                                                                                                        <span class="td1p">$ @String.Format("{0:n2}", @act.avance / 1000000) Millones</span>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </a>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            k++;
                                                                        }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        j++;
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                        i++;
                                    }
                                </div>
                                <div id="divTotales" class="summUp">
                                    <div class="panel-title">

                                        <div class="head">
                                            <div class="mainData">
                                                <span class="labelTit">&nbsp;</span>
                                                <span class="td1">Totales</span>
                                            </div>
                                            <div class="data2">
                                                <span class="labelTit">Ejecutado</span>
                                                <span class="td1">RD $ @String.Format("{0:n0}", @total_avance / 1000000) Millones</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="divPagFichas">
                                </div>
                            }
                        </div>

                    </div>


        </div>
    </section>

    <!--GRAFICA TREEMAP-->
    <section class="section" id="secGrafica">
        <div class="container">
            <div class="row">

                <div class="col-md-8">
                    <div class="section-heading heading-left">
                        <h2>Organismo financiador</h2>

                    </div>
                    <div class="banner-main-desc">
                        <p>Explora la distribución de las fuentes internas y externas de los recursos, destinados a cubrir la emergencia @Model.NombreEmergencia </p>
                    </div>
                </div>
            </div>


            <div id="contenido">

                <!--PRESUPUESTO Y AVANCE-->
                <div class="wrap_avance">

                    <!--OPCIONES GRAFICA-->
                    <div id="divOptionsGrafica">
                        <div class="row">
                            <!-- VIEW OPTIONS-->
                            <div class="col-md-10 col-md-offset-1">
                                <div class="Options">
                                    <div class="switchTable" id="filtro_iconos">
                                        <p class="vis-none">Tipo de visualización</p>
                                        <a id="enlacesankey_og" codigo="sankey" role="button" class="tipo_grafica btn ">
                                            <span id="iconSankey" class="txt-bold icSankey">Según fuente</span>
                                        </a>
                                        <a id="enlacelistado_og" codigo="listado" role="button" class="tipo_grafica btn activo">
                                            <span id="iconList" class="txt-bold icRD">En RD $</span>
                                        </a>
                                        <a id="enlacegrafica_og" codigo="grafica" role="button" class="tipo_grafica btn ">
                                            <span id="iconTree" class="txt-bold icGraph">En términos porcentuales</span>
                                        </a>


                                    </div>

                                </div>

                            </div>
                        </div>


                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="wrap_sankey">
                                <div id="sankey_basic" style="width: 100%; height: auto;"></div>
                            </div>
                            <div style="width:100%;" id="divListadoRecursosObje" class="objHidden">
                                <!--TABLA COMPARATIVA-->
                                <input type="hidden" id="migapanlistado" value="" />
                                <div class="comparativeTable" id="divListado1">
                                    @if (Model.DetallePerObjetoGasto.Count() > 0)
                                    {
                                        int i = 0;
                                        int j = 0;
                                        int k = 0;
                                        int l = 0;
                                        decimal total_avance = 0;
                                        decimal total_presupuesto = 0;
                                        <div class="panel-group accordion" id="accordion" role="tablist" aria-multiselectable="true">
                                            @foreach (var item in Model.DetallePerObjetoGasto)
                                            {
                                                var nomCollapse = "collapseOrganismoFinanciadorOne_" + i.ToString() + "_" + j.ToString();
                                                var nomHeading = "headingOrganismoFinanciadorOne_" + i.ToString() + "_" + j.ToString();
                                                total_avance += item.total_avance;
                                                total_presupuesto += item.total_presupuesto;
                                                var val_nivel1 = @item.avance / 1000000;

                                                <div class="panel panel-default">
                                                    <div class="panel-heading" role="tab" id="@nomHeading">
                                                        <div class="panel-title">
                                                            <a role="button" id="a_@item.IdItem" class="prueba_enlace" item="@item.IdItem" data-toggle="collapse" data-parent="#accordion" href="#@nomCollapse" aria-expanded="true" aria-controls="@nomCollapse">
                                                                <div class="head">
                                                                    <div class="data1 mainData">
                                                                        @if (item.es_programa == true)
                                                                        {
                                                                            <span class="labelTit">Programa</span>
                                                                        }
                                                                        <span class="td1"> @item.Nombre</span>
                                                                    </div>

                                                                    <div class="data1">
                                                                        <span class="labelTit">Gastos devengados</span>
                                                                        @if (val_nivel1 < 1)
                                                                        {
                                                                            <span class="td1">RD $ @String.Format("{0:n2}", @item.avance / 1000000) Millones</span>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="td1">RD $ @String.Format("{0:n0}", @item.avance / 1000000) Millones</span>
                                                                        }
                                                                    </div>
                                                                </div>
                                                            </a>
                                                        </div>
                                                    </div>
                                                    <!--NIVEL 2 CON IN-->
                                                    <div id="@nomCollapse" class="panel-collapse collapse nivel1 in" role="tabpanel" aria-labelTitledby="@nomHeading" item="@item.Nombre.ToUpper()">
                                                        <div class="panel-body">
                                                            @foreach (var ent in item.Detalles)
                                                            {
                                                                var nomNivel2 = "accordionOrganismoFinanciador_l2_" + i.ToString() + "_" + j.ToString();
                                                                var headNivel2 = "headLevelOrganismoFinanciador2_" + i.ToString() + "_" + j.ToString();
                                                                var panelHijo2 = "cOrganismoFinanciador2_" + j.ToString() + "_" + k.ToString();
                                                                var nomHeadLevel3 = "headLevelOrganismoFinanciador3_" + j.ToString() + "_" + k.ToString();
                                                                var val_nivel2 = @ent.avance / 1000000;

                                                                <div class="panel-group nivel22" id="@nomNivel2" role="tablist" aria-multiselectable="true">
                                                                    <div class="panel panel-default">
                                                                        <div class="panel-heading" role="tab" id="@headNivel2">
                                                                            <div class="panel-title">
                                                                                <a role="button" data-toggle="collapse" data-parent="#@nomNivel2" href="#@panelHijo2" aria-expanded="true" aria-controls="@nomCollapse">
                                                                                    <div class="head">
                                                                                        <div class="data1 mainData">
                                                                                            <span class="labelTit">Capítulo</span>
                                                                                            <span class="td1p">@ent.NomCapitulo</span>
                                                                                        </div>

                                                                                        <div class="data1">
                                                                                            <span class="labelTit">Gastos devengados</span>
                                                                                            @if (val_nivel2 < 1)
                                                                                            {
                                                                                                <span class="td1p">RD $ @String.Format("{0:n2}", @ent.avance / 1000000) Millones</span>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <span class="td1p">RD $ @String.Format("{0:n0}", @ent.avance / 1000000) Millones</span>
                                                                                            }

                                                                                        </div>
                                                                                    </div>
                                                                                </a>
                                                                            </div>
                                                                        </div>
                                                                        <div id="@panelHijo2" class="panel-collapse collapse level3 nivel2" role="tabpanel" aria-labelledby="@nomHeadLevel3" entidad="@ent.NomCapitulo.ToUpper()">
                                                                            <div class="panel-body">

                                                                                @foreach (var act in ent.Detalles)
                                                                                {

                                                                                    var nomNivel3 = "accordion_lOrganismoFinanciador3_" + j.ToString() + "_" + k.ToString();
                                                                                    var nomCnivel3 = "cOrganismoFinanciador3_" + j.ToString() + "_" + k.ToString();
                                                                                    var val_nivel3 = @act.avance / 1000000;

                                                                                    <!--NIVEL 3-->
                                                                                    <div class="panel-group nivel33" id="@nomNivel3" role="tablist" aria-multiselectable="true">
                                                                                        <div class="panel panel-default">
                                                                                            <div class="panel-heading" role="tab" id="@nomHeadLevel3">
                                                                                                <div class="panel-title">
                                                                                                    <a role="button" data-toggle="collapse" data-parent="#@nomNivel3" href="#@nomCnivel3" aria-expanded="true" aria-controls="@nomCollapse">
                                                                                                        <div class="head">
                                                                                                            <div class="data1 mainData">
                                                                                                                <span class="labelTit">Concepto</span>
                                                                                                                <span class="td1p">@act.NomConcepto</span>
                                                                                                            </div>

                                                                                                            <div class="data1">
                                                                                                                <span class="labelTit">Gastos devengados</span>
                                                                                                                @if (val_nivel3 < 1)
                                                                                                                {
                                                                                                                    <span class="td1p">$ @String.Format("{0:n2}", @act.avance / 1000000) Millones</span>
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    <span class="td1p">$ @String.Format("{0:n0}", @act.avance / 1000000) Millones</span>
                                                                                                                }

                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </a>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div id="@nomCnivel3" class="panel-collapse collapse nivel3" role="tabpanel" aria-labelledby="@nomHeadLevel3" actividad="@act.NomConcepto.ToUpper()">

                                                                                                <div class="panel-body">
                                                                                                    <span class="h6">Cuenta</span>
                                                                                                    <ul class="list-group">
                                                                                                        @foreach (var gasto in act.Detalles)
                                                                                                        {
                                                                                                            var val_nivel4 = @gasto.avance / 1000000;
                                                                                                            <li class="list-group-item">
                                                                                                                <div class="head">
                                                                                                                    <div class="data1 mainData">
                                                                                                                        <span class="td1p">@gasto.nom_cuenta</span>
                                                                                                                    </div>

                                                                                                                    <div class="data1">
                                                                                                                        <span class="labelTit">Gastos devengados</span>
                                                                                                                        @if (val_nivel4 < 1)
                                                                                                                        {
                                                                                                                            <span class="td1p">RD $ @String.Format("{0:n2}", @gasto.avance / 1000000) Millones</span>
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            <span class="td1p">RD $ @String.Format("{0:n0}", @gasto.avance / 1000000) Millones</span>
                                                                                                                        }

                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </li>
                                                                                                            l++;
                                                                                                        }


                                                                                                    </ul>

                                                                                                </div>

                                                                                            </div>

                                                                                        </div>

                                                                                    </div>

                                                                                    k++;
                                                                                }
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                j++;
                                                            }
                                                        </div>
                                                    </div>

                                                </div>

                                                i++;
                                                <!--CIERRE PANEL NIVEL 1-->
                                            }
                                        </div>
                                        <div id="divTotales" class="summUp">
                                            <div class="panel-title">

                                                <div class="head">
                                                    <div class="data1 mainData">
                                                        <span class="labelTit">&nbsp;</span>
                                                        <span class="td1">Totales</span>
                                                    </div>

                                                    <div class="data1">
                                                        <span class="labelTit">Gastos devengados</span>
                                                        <span class="td1">RD $ @String.Format("{0:n0}", @total_avance / 1000000) Millones</span>
                                                    </div>
                                                </div>

                                            </div>

                                        </div>


                                    }

                                </div>

                            </div>
 
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="pChart">
                                <div id="divGraphRecursosObj"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--CIERRE DIV CONTENIDO-->
            </div>
        </div>
    </section>

    <!--FIN GRAFICA-->

    <section class="section">
        <div class="container">
            <div class="row justify-content-center">

                <div class="col-lg-12">
                    <div class="section-heading heading-left">
                        <h2>Artículos comprados</h2>

                    </div>
                    <div class="banner-main-desc">
                        <p>Explora los detalles y el estado de los contratos asociados a la atención de la emergencia @Model.NombreEmergencia </p>
                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="pChart">
                        <div id="divGraphRecursosArticulos"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--SOLICITAR MAS INFORMACION-->
    <!--participacion y denuncias-->
    <section class="section">
        <div class="container">
            <div class="section-heading heading-left">
                <h2>Control ciudadano</h2>

            </div>

            <div class="row justify-content-center">
                <!--Participa-->
                <div class="col-lg-5 tParticipe">
                    <div class="card wrap-participe">
                        <div class="card-header"> <span class="h4">Participa</span></div>
                        <div class="card-body">
                            <div class="wrap-icon"><img src="../img/ic_control1.svg" alt="Solicita mas información"></div>
                            <div class="text-section">
                                <p>
                                    En una interacción rápida con las autoridades sobre la información de la plataforma, podrás hacer comentarios, preguntas, recomendaciones, recibir respuestas y conocer la participación realizada por otras personas.
                                </p>
                            </div>
                        </div>
                        <div class="card-footer">
                            <div class="text-center">
                                <a class="btn btn-outlined" id="divEnlaceParticipaCon" href="/Participa/Comentarios/">Contratos <span class="glyphicon glyphicon-circle-arrow-right"></span></a>
                            </div>
                        </div>
                    </div>

                </div>
                <!--mas imformación-->
                <div class="col-lg-5 tParticipe">
                    <div class="card wrap-participe">
                        <div class="card-header">
                            <span class="h4">Solicita más información</span>
                        </div>
                        <div class="card-body">
                            <div class="wrap-icon"><img src="../img/ic_control2.svg" alt="Solicita mas informacion"></div>
                            <div class="text-section">
                                <p>
                                    Gracias al libre acceso a la información pública y la transparencia gubernamental puedes realizar solicitudes de información pública específica y detallada a las instituciones responsables.
                                </p>

                            </div>
                        </div>
                        <div class="card-footer">
                            <div class="text-center">
                                <a class="btn btn-outlined" href="https://saip.gob.do/apps/sip/?step=one" target="_blank" rel="noopener"> Solicitar <span class="glyphicon glyphicon-circle-arrow-right"></span></a>
                               
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>

    </section>


    <!--DATOS ABIERTOS-->


    @{
        var parame = "emergencia" + @Model.TipoEmergencia;
    }
    <input type="hidden" id="param" value="@parame" />
     <div class="clearfix"></div>

    @if (ViewBag.dataSource != null)
    {
        <text>

            @foreach (var source in @ViewBag.dataSource)
            {
                <text>

                                    <div class="boxDataSource">
                                        <h6 class="text-center">@source.data</h6>
                                        <div class="row">
                                            <div class="col-md-4">
                                <span class="t1">@ViewBag.TitulosHome.BuscarTituloPorLlave("Home_FuentesDatos_Fuente") </span>
                                                <span>@source.source</span>
                                            </div>
                                            <div class="col-md-6 col-xs-6 border-right">
                                <span class="t1">@ViewBag.TitulosHome.BuscarTituloPorLlave("Home_FuentesDatos_lblFechaData") </span>
                                                <span>@source.lastUpdate.ToShortDateString()</span>
                                            </div>
                                            <div class="col-md-6 col-xs-6">
                                <span class="t1">@ViewBag.TitulosHome.BuscarTituloPorLlave("Home_FuentesDatos_lblFechaCorteData") </span>
                                                <span>@source.FechaCorteData.ToShortDateString()</span>
                                            </div>
                                        </div>
                                    </div>
                </text>
            }
        </text>
    }
     


</body>


@section Scripts {
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js" integrity="sha384-N8EP0Yml0jN7e0DcXlZ6rt+iqKU9Ck6f1ZQ+j2puxatnBq4k9E8Q6vqBcY34LNbn" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3plus@2" integrity="sha384-c1J7R3OBhP9G7a0SkXCaVW1lVtOHAOuukFed365bi4B0GwZvKL2hd8mjE7tRMl2U" crossorigin="anonymous"></script>
    <script src="~/content/dist/js/sankey.js"></script>
    <script src="js/emergencia_presupuesto_aux.js"></script>

    @using (Html.BeginForm("DescargarIndicadoresProgramaDatosAbiertos", "Covid", FormMethod.Post, new { id = "formCsvProg" }))
    {
        <input type="button" id="btnEnviar" value="Generar Csv" style="display:none;" />
    }
    @using (Html.BeginForm("DescargarProgramaMetasFinancierasDatosAbiertos", "Covid", FormMethod.Post, new { id = "formCsvProgFin" }))
    {
        <input type="button" id="btnEnviar" value="Generar Csv" style="display:none;" />
    }
    @using (Html.BeginForm("DescargarEjecucionPresupuestariaDatosAbiertos", "Covid", FormMethod.Post, new { id = "formCsvProgEjePre" }))
    {
        <input type="button" id="btnEnviarEjePre" value="Generar Csv" style="display:none;" />
    }
    @using (Html.BeginForm("DescargarEjecucionContableDatosAbiertos", "Covid", FormMethod.Post, new { id = "formCsvProgEjeCon" }))
    {
        <input type="button" id="btnEnviarEjeCon" value="Generar Csv" style="display:none;" />
    }
    @using (Html.BeginForm("DescargarSubsidiosDatosAbiertos", "Covid", FormMethod.Post, new { id = "formCsvSub" }))
    {
        <input type="button" id="btnEnviarSub" value="Generar Csv" style="display:none;" />
    }
    @using (Html.BeginForm("DescargarProgramasMetasFisicasDatosAbiertos", "Covid", FormMethod.Post, new { id = "formCsvProMetFis" }))
    {
        <input type="button" id="btnEnviarProMetFis" value="Generar Csv" style="display:none;" />
    }
    @using (Html.BeginForm("DescargarCreditoAgricolaDatosAbiertos", "Covid", FormMethod.Post, new { id = "formCsvCredAgricola" }))
    {
        <input type="button" id="btnEnviarCredAgri" value="Generar Csv" style="display:none;" />
    }
}
@section DataBody {
    data-periods='[{"name":"2012", "id":1},{"name":"2011", "id":2},{"name":"2010", "id":3}]'
    data-periods-default-text=""
    data-busqueda=''
    data-tipoEmergencia=@Model.TipoEmergencia
    data-location='[{}]'
    data-resourcesPerContratos='[@foreach (var item in @Model.InfoRecursosContratos)
    {
        <text>
            {"labelGroup":"@item.labelGroup","label":"@item.label", "label_inf": "@item.label_inf", "label_nivel4":"@item.label_nivel4", "value": "@item.value", "rawValue": "@item.rawValue"}@if (item != @Model.InfoRecursosContratos.Last())
    {<text>,</text>}</text>}]'
    data-recursosPerObjetoGroup='[@foreach (var grupo in @Model.RecursosPerObjeto)
    {<text> {"labelGroup": "@grupo.labelGroup" , "label":"@grupo.label","label_inf":"@grupo.label_inf","label_nivel4":"@grupo.label_nivel4","value": "@grupo.value", "rawValue": @grupo.rawValue}@if (grupo != @Model.RecursosPerObjeto.Last())
    {<text>,</text>}</text>}]'
    data-recursosPerObjetoAvanceGroup='[@foreach (var grupo in @Model.RecursosPerObjetoAvance)
    {
        <text>
            {"labelGroup": "@grupo.labelGroup" , "label":"@grupo.label","label_inf":"@grupo.label_inf","label_nivel4":"@grupo.label_nivel4","value": "@grupo.value", "rawValue": "@grupo.rawValue"}@if (grupo != @Model.RecursosPerObjetoAvance.Last())
    {<text>,</text>}</text>}]'
}